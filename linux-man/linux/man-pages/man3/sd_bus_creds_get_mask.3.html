
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <link rel="stylesheet" type="text/css" href="../../../style.css" title="style" />
    <link rel="stylesheet" type="text/css" href="../style.css" title="style" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <title>sd_bus_creds_new_from_pid(3) - Linux manual page</title>
</head>

<body>

<div class="page-top"><a id="top_of_page"></a></div>
<!--%%%TOP_BAR%%%-->
    <div class="nav-bar">
        <table class="nav-table">
            <tr>
                <td class="nav-cell">
                    <p class="nav-text">
                        <a href="http://man7.org/index.html">man7.org</a> &gt; Linux &gt; <a href="../index.html">man-pages</a>
                    </p>
                </td>
                <td class="training-cell">
                    <p class="training-text"><a class="training-link" href="http://man7.org/training/">Linux/UNIX system programming training</a></p>
                </td>
            </tr>
        </table>
    </div>

<hr class="nav-end" />

<!--%%%PAGE_START%%%-->


<table class="sec-table">
<tr>
    <td>
        <p class="section-dir">
<a href="#NAME">NAME</a> | <a href="#SYNOPSIS">SYNOPSIS</a> | <a href="#DESCRIPTION">DESCRIPTION</a> | <a href="#RETURN_VALUE">RETURN&nbsp;VALUE</a> | <a href="#REFERENCE_OWNERSHIP">REFERENCE&nbsp;OWNERSHIP</a> | <a href="#ERRORS">ERRORS</a> | <a href="#NOTES">NOTES</a> | <a href="#SEE_ALSO">SEE&nbsp;ALSO</a> | <a href="#NOTES">NOTES</a> | <a href="#COLOPHON">COLOPHON</a>
        </p>
    </td>
    <td class="search-box">
        <div class="man-search-box">

            <form method="get" action="http://www.google.com/search">
                <fieldset class="man-search">
                    <input type="text" name="q" size="10" maxlength="255" value="" />
                    <input type="hidden" name="sitesearch" value="man7.org/linux/man-pages" />
                    <input type="submit" name="sa" value="Search online pages" />
                </fieldset>
            </form>

        </div>
    </td>
    <td> </td>
</tr>
</table>

<pre>
<span class="headline">SD_BUS_CREDS_NEW_FROM_PID(3)_bus_creds_new_from_pidBUS_CREDS_NEW_FROM_PID(3)</span>
</pre>
<h2><a id="NAME" href="#NAME"></a>NAME  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       sd_bus_creds_new_from_pid, sd_bus_creds_get_mask,
       sd_bus_creds_get_augmented_mask, sd_bus_creds_ref,
       sd_bus_creds_unref, sd_bus_creds_unrefp - Retrieve credentials object
       for the specified PID
</pre>
<h2><a id="SYNOPSIS" href="#SYNOPSIS"></a>SYNOPSIS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>#include &lt;systemd/sd-bus.h&gt;</b>

       <b>int sd_bus_creds_new_from_pid(pid_t </b><i>pid</i><b>, uint64_t </b><i>creds_mask</i><b>,</b>
                                     <b>sd_bus_creds **</b><i>ret</i><b>);</b>

       <b>uint64_t sd_bus_creds_get_mask(sd_bus_creds *</b><i>c</i><b>);</b>

       <b>uint64_t sd_bus_creds_get_augmented_mask(sd_bus_creds *</b><i>c</i><b>);</b>

       <b>sd_bus_creds *sd_bus_creds_ref(sd_bus_creds *</b><i>c</i><b>);</b>

       <b>sd_bus_creds *sd_bus_creds_unref(sd_bus_creds *</b><i>c</i><b>);</b>

       <b>void sd_bus_creds_unrefp(sd_bus_creds **</b><i>c</i><b>);</b>

       <b>SD_BUS_CREDS_PID</b>, <b>SD_BUS_CREDS_PPID</b>, <b>SD_BUS_CREDS_TID</b>,
       <b>SD_BUS_CREDS_UID</b>, <b>SD_BUS_CREDS_EUID</b>, <b>SD_BUS_CREDS_SUID</b>,
       <b>SD_BUS_CREDS_FSUID</b>, <b>SD_BUS_CREDS_GID</b>, <b>SD_BUS_CREDS_EGID</b>,
       <b>SD_BUS_CREDS_SGID</b>, <b>SD_BUS_CREDS_FSGID</b>,
       <b>SD_BUS_CREDS_SUPPLEMENTARY_GIDS</b>, <b>SD_BUS_CREDS_COMM</b>,
       <b>SD_BUS_CREDS_TID_COMM</b>, <b>SD_BUS_CREDS_EXE</b>, <b>SD_BUS_CREDS_CMDLINE</b>,
       <b>SD_BUS_CREDS_CGROUP</b>, <b>SD_BUS_CREDS_UNIT</b>, <b>SD_BUS_CREDS_SLICE</b>,
       <b>SD_BUS_CREDS_USER_UNIT</b>, <b>SD_BUS_CREDS_USER_SLICE</b>,
       <b>SD_BUS_CREDS_SESSION</b>, <b>SD_BUS_CREDS_OWNER_UID</b>,
       <b>SD_BUS_CREDS_EFFECTIVE_CAPS</b>, <b>SD_BUS_CREDS_PERMITTED_CAPS</b>,
       <b>SD_BUS_CREDS_INHERITABLE_CAPS</b>, <b>SD_BUS_CREDS_BOUNDING_CAPS</b>,
       <b>SD_BUS_CREDS_SELINUX_CONTEXT</b>, <b>SD_BUS_CREDS_AUDIT_SESSION_ID</b>,
       <b>SD_BUS_CREDS_AUDIT_LOGIN_UID</b>, <b>SD_BUS_CREDS_TTY</b>,
       <b>SD_BUS_CREDS_UNIQUE_NAME</b>, <b>SD_BUS_CREDS_WELL_KNOWN_NAMES</b>,
       <b>SD_BUS_CREDS_DESCRIPTION</b>, <b>SD_BUS_CREDS_AUGMENT</b>, <b>_SD_BUS_CREDS_ALL</b>
</pre>
<h2><a id="DESCRIPTION" href="#DESCRIPTION"></a>DESCRIPTION  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>sd_bus_creds_new_from_pid() </b>creates a new credentials object and
       fills it with information about the process <i>pid</i>. The pointer to this
       object will be stored in the <i>ret</i> pointer. Note that credential
       objects may also be created and retrieved via
       <b>sd_bus_get_name_creds</b>(3), <b>sd_bus_get_owner_creds</b>(3) and
       <b>sd_bus_message_get_creds</b>(3).

       The information that will be stored is determined by <i>creds_mask</i>. It
       may contain a subset of ORed constants <b>SD_BUS_CREDS_PID</b>,
       <b>SD_BUS_CREDS_PPID</b>, <b>SD_BUS_CREDS_TID</b>, <b>SD_BUS_CREDS_UID</b>,
       <b>SD_BUS_CREDS_EUID</b>, <b>SD_BUS_CREDS_SUID</b>, <b>SD_BUS_CREDS_FSUID</b>,
       <b>SD_BUS_CREDS_GID</b>, <b>SD_BUS_CREDS_EGID</b>, <b>SD_BUS_CREDS_SGID</b>,
       <b>SD_BUS_CREDS_FSGID</b>, <b>SD_BUS_CREDS_SUPPLEMENTARY_GIDS</b>,
       <b>SD_BUS_CREDS_COMM</b>, <b>SD_BUS_CREDS_TID_COMM</b>, <b>SD_BUS_CREDS_EXE</b>,
       <b>SD_BUS_CREDS_CMDLINE</b>, <b>SD_BUS_CREDS_CGROUP</b>, <b>SD_BUS_CREDS_UNIT</b>,
       <b>SD_BUS_CREDS_SLICE</b>, <b>SD_BUS_CREDS_USER_UNIT</b>, <b>SD_BUS_CREDS_USER_SLICE</b>,
       <b>SD_BUS_CREDS_SESSION</b>, <b>SD_BUS_CREDS_OWNER_UID</b>,
       <b>SD_BUS_CREDS_EFFECTIVE_CAPS</b>, <b>SD_BUS_CREDS_PERMITTED_CAPS</b>,
       <b>SD_BUS_CREDS_INHERITABLE_CAPS</b>, <b>SD_BUS_CREDS_BOUNDING_CAPS</b>,
       <b>SD_BUS_CREDS_SELINUX_CONTEXT</b>, <b>SD_BUS_CREDS_AUDIT_SESSION_ID</b>,
       <b>SD_BUS_CREDS_AUDIT_LOGIN_UID</b>, <b>SD_BUS_CREDS_TTY</b>,
       <b>SD_BUS_CREDS_UNIQUE_NAME</b>, <b>SD_BUS_CREDS_WELL_KNOWN_NAMES</b>, and
       <b>SD_BUS_CREDS_DESCRIPTION</b>. Use the special value <b>_SD_BUS_CREDS_ALL </b>to
       request all supported fields. The <b>SD_BUS_CREDS_AUGMENT </b>constant may
       not be ORed into the mask for invocations of
       <b>sd_bus_creds_new_from_pid()</b>.

       Fields can be retrieved from the credentials object using
       <a href="sd_bus_creds_get_pid.3.html">sd_bus_creds_get_pid(3)</a> and other functions which correspond directly
       to the constants listed above.

       A mask of fields which were actually successfully retrieved can be
       retrieved with <b>sd_bus_creds_get_mask()</b>. If the credentials object was
       created with <b>sd_bus_creds_new_from_pid()</b>, this will be a subset of
       fields requested in <i>creds_mask</i>.

       Similar to <b>sd_bus_creds_get_mask()</b>, the function
       <b>sd_bus_creds_get_augmented_mask() </b>returns a bitmask of field
       constants. The mask indicates which credential fields have been
       retrieved in a non-atomic fashion. For credential objects created via
       <b>sd_bus_creds_new_from_pid()</b>, this mask will be identical to the mask
       returned by <b>sd_bus_creds_get_mask()</b>. However, for credential objects
       retrieved via <b>sd_bus_get_name_creds()</b>, this mask will be set for the
       credential fields that could not be determined atomically at peer
       connection time, and which were later added by reading augmenting
       credential data from /proc. Similarly, for credential objects
       retrieved via <b>sd_bus_get_owner_creds()</b>, the mask is set for the
       fields that could not be determined atomically at bus creation time,
       but have been augmented. Similarly, for credential objects retrieved
       via <b>sd_bus_message_get_creds()</b>, the mask is set for the fields that
       could not be determined atomically at message sending time, but have
       been augmented. The mask returned by
       <b>sd_bus_creds_get_augmented_mask() </b>is always a subset of (or identical
       to) the mask returned by <b>sd_bus_creds_get_mask() </b>for the same object.
       The latter call hence returns all credential fields available in the
       credential object, the former then marks the subset of those that
       have been augmented. Note that augmented fields are unsuitable for
       authorization decisions, as they may be retrieved at different times,
       thus being subject to races. Hence, augmented fields should be used
       exclusively for informational purposes.

       <b>sd_bus_creds_ref() </b>creates a new reference to the credentials object
       <i>c</i>. This object will not be destroyed until <b>sd_bus_creds_unref() </b>has
       been called as many times plus once more. Once the reference count
       has dropped to zero, <i>c</i> cannot be used anymore, so further calls to
       <b>sd_bus_creds_ref(c) </b>or <b>sd_bus_creds_unref(c) </b>are illegal.

       <b>sd_bus_creds_unref() </b>destroys a reference to <i>c</i>.

       <b>sd_bus_creds_unrefp() </b>is similar to <b>sd_bus_creds_unref() </b>but takes a
       pointer to a pointer to an <b>sd_bus_creds </b>object. This call is useful
       in conjunction with GCC's and LLVM's <b>Clean-up Variable Attribute</b><b></b>[1].
       Note that this function is defined as inline function.

       <b>sd_bus_creds_ref()</b>, <b>sd_bus_creds_unref() </b>and <b>sd_bus_creds_unrefp()</b>
       execute no operation if the passed in bus credentials object is <b>NULL</b>.
</pre>
<h2><a id="RETURN_VALUE" href="#RETURN_VALUE"></a>RETURN VALUE  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       On success, <b>sd_bus_creds_new_from_pid() </b>returns 0 or a positive
       integer. On failure, it returns a negative errno-style error code.

       <b>sd_bus_creds_get_mask() </b>returns the mask of successfully acquired
       fields.

       <b>sd_bus_creds_get_augmented_mask() </b>returns the mask of fields that
       have been augmented from data in /proc, and are thus not suitable for
       authorization decisions.

       <b>sd_bus_creds_ref() </b>always returns the argument.

       <b>sd_bus_creds_unref() </b>always returns <b>NULL</b>.
</pre>
<h2><a id="REFERENCE_OWNERSHIP" href="#REFERENCE_OWNERSHIP"></a>REFERENCE OWNERSHIP  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       Function <b>sd_bus_creds_new_from_pid() </b>creates a new object and the
       caller owns the sole reference. When not needed anymore, this
       reference should be destroyed with <a href="sd_bus_creds_unref.3.html">sd_bus_creds_unref(3)</a>.
</pre>
<h2><a id="ERRORS" href="#ERRORS"></a>ERRORS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       Returned errors may indicate the following problems:

       <b>-ESRCH</b>
           Specified <i>pid</i> could not be found.

       <b>-EINVAL</b>
           Specified parameter is invalid (<b>NULL </b>in case of output
           parameters).

       <b>-ENOMEM</b>
           Memory allocation failed.

       <b>-EOPNOTSUPP</b>
           One of the requested fields is unknown to the local system.
</pre>
<h2><a id="NOTES" href="#NOTES"></a>NOTES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>sd_bus_creds_new_from_pid() </b>and the other calls described here are
       available as a shared library, which can be compiled and linked to
       with the <b>libsystemd pkg-config</b>(1) file.
</pre>
<h2><a id="SEE_ALSO" href="#SEE_ALSO"></a>SEE ALSO  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <a href="../man1/systemd.1.html">systemd(1)</a>, <a href="sd-bus.3.html">sd-bus(3)</a>, <a href="sd_bus_creds_get_pid.3.html">sd_bus_creds_get_pid(3)</a>,
       <b>sd_bus_get_name_creds</b>(3), <b>sd_bus_get_owner_creds</b>(3),
       <b>sd_bus_message_get_creds</b>(3)
</pre>
<h2><a id="NOTES" href="#NOTES"></a>NOTES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
        1. Clean-up Variable Attribute
           <a href="https://gcc.gnu.org/onlinedocs/gcc/Common-Variable-Attributes.html">https://gcc.gnu.org/onlinedocs/gcc/Common-Variable-Attributes.html</a>
</pre>
<h2><a id="COLOPHON" href="#COLOPHON"></a>COLOPHON  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This page is part of the <i>systemd</i> (systemd system and service manager)
       project.  Information about the project can be found at 
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd">http://www.freedesktop.org/wiki/Software/systemd</a>⟩.  If you have a bug
       report for this manual page, see 
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd/#bugreports">http://www.freedesktop.org/wiki/Software/systemd/#bugreports</a>⟩.  This
       page was obtained from the project's upstream Git repository 
       ⟨<a href="https://github.com/systemd/systemd.git">https://github.com/systemd/systemd.git</a>⟩ on 2017-07-05.  If you dis‐
       cover any rendering problems in this HTML version of the page, or you
       believe there is a better or more up-to-date source for the page, or
       you have corrections or improvements to the information in this
       COLOPHON (which is <i>not</i> part of the original manual page), send a mail
       to man-pages@man7.org

<span class="footline">systemd 234                                     SD_BUS_CREDS_NEW_FROM_PID(3)</span>
</pre>

<hr class="end-man-text" />
<p>Pages that refer to this page: 
    <a href="sd-bus.3.html">sd-bus(3)</a>,&nbsp; 
    <a href="sd_bus_creds_get_pid.3.html">sd_bus_creds_get_pid(3)</a>,&nbsp; 
    <a href="sd_bus_creds_new_from_pid.3.html">sd_bus_creds_new_from_pid(3)</a>,&nbsp; 
    <a href="../man7/systemd.directives.7.html">systemd.directives(7)</a>,&nbsp; 
    <a href="../man7/systemd.index.7.html">systemd.index(7)</a>
</p>
<hr/>

 
<hr class="start-footer" />

<div class="footer"> 

<table class="colophon-table">
    <tr>
    <td class="pub-info">
        <p>
            HTML rendering created 2017-07-13
            by <a href="http://man7.org/mtk/index.html">Michael Kerrisk</a>, 
            author of 
            <a href="http://man7.org/tlpi/"><em>The Linux Programming Interface</em></a>, 
            maintainer of the 
            <a href="https://www.kernel.org/doc/man-pages/">Linux <em>man-pages</em> project</a>.
        </p>
        <p>
            For details of in-depth
            <strong>Linux/UNIX system programming training courses</strong>
            that I teach, look <a href="http://man7.org/training/">here</a>.
        </p>
        <p>
            Hosting by <a href="http://www.jambit.com/index_en.html">jambit GmbH</a>.
        </p>
        <p>
            <a href="http://validator.w3.org/check?uri=referer">
            <img src="http://www.w3.org/Icons/valid-xhtml11"
                alt="Valid XHTML 1.1" height="31" width="88" />
            </a>
        </p>
    </td>
    <td class="colophon-divider">
    </td>
    <td class="tlpi-cover">
        <a href="http://man7.org/tlpi/"><img src="../../../tlpi/cover/TLPI-front-cover-vsmall.png" alt="Cover of TLPI" /></a>
    </td>
    </tr>
</table>

</div>

<hr class="end-footer" />



<!--BEGIN-SITETRACKING-->
<!-- SITETRACKING.man7.org_linux_man-pages -->

<!-- Start of StatCounter Code (xhtml) -->

<script type="text/javascript">
//<![CDATA[
var sc_project=7422636; 
var sc_invisible=1; 
var sc_security="9b6714ff"; 
//]]>
</script>
<script type="text/javascript"
src="../../../../www.statcounter.com/counter/counter_xhtml.js"></script>
<noscript><div class="statcounter"><a title="website
statistics" href="http://statcounter.com/"
class="statcounter"><img class="statcounter"
src="http://c.statcounter.com/7422636/0/9b6714ff/1/"
alt="website statistics" /></a></div></noscript>

<!-- End of StatCounter Code -->


<!-- Start of Google Analytics Code -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9830363-8']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- End of Google Analytics Code -->

<!--END-SITETRACKING-->

</body>
</html>
