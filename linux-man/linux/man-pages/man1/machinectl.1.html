
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <link rel="stylesheet" type="text/css" href="../../../style.css" title="style" />
    <link rel="stylesheet" type="text/css" href="../style.css" title="style" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <title>machinectl(1) - Linux manual page</title>
</head>

<body>

<div class="page-top"><a id="top_of_page"></a></div>
<!--%%%TOP_BAR%%%-->
    <div class="nav-bar">
        <table class="nav-table">
            <tr>
                <td class="nav-cell">
                    <p class="nav-text">
                        <a href="http://man7.org/index.html">man7.org</a> &gt; Linux &gt; <a href="../index.html">man-pages</a>
                    </p>
                </td>
                <td class="training-cell">
                    <p class="training-text"><a class="training-link" href="http://man7.org/training/">Linux/UNIX system programming training</a></p>
                </td>
            </tr>
        </table>
    </div>

<hr class="nav-end" />

<!--%%%PAGE_START%%%-->


<table class="sec-table">
<tr>
    <td>
        <p class="section-dir">
<a href="#NAME">NAME</a> | <a href="#SYNOPSIS">SYNOPSIS</a> | <a href="#DESCRIPTION">DESCRIPTION</a> | <a href="#OPTIONS">OPTIONS</a> | <a href="#COMMANDS">COMMANDS</a> | <a href="#MACHINE_AND_IMAGE_NAMES">MACHINE&nbsp;AND&nbsp;IMAGE&nbsp;NAMES</a> | <a href="#FILES_AND_DIRECTORIES">FILES&nbsp;AND&nbsp;DIRECTORIES</a> | <a href="#EXAMPLES">EXAMPLES</a> | <a href="#EXIT_STATUS">EXIT&nbsp;STATUS</a> | <a href="#ENVIRONMENT">ENVIRONMENT</a> | <a href="#SEE_ALSO">SEE&nbsp;ALSO</a> | <a href="#COLOPHON">COLOPHON</a>
        </p>
    </td>
    <td class="search-box">
        <div class="man-search-box">

            <form method="get" action="http://www.google.com/search">
                <fieldset class="man-search">
                    <input type="text" name="q" size="10" maxlength="255" value="" />
                    <input type="hidden" name="sitesearch" value="man7.org/linux/man-pages" />
                    <input type="submit" name="sa" value="Search online pages" />
                </fieldset>
            </form>

        </div>
    </td>
    <td> </td>
</tr>
</table>

<pre>
<span class="headline">MACHINECTL(1)                    machinectl                    MACHINECTL(1)</span>
</pre>
<h2><a id="NAME" href="#NAME"></a>NAME  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       machinectl - Control the systemd machine manager
</pre>
<h2><a id="SYNOPSIS" href="#SYNOPSIS"></a>SYNOPSIS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>machinectl </b>[OPTIONS...] {COMMAND} [NAME...]
</pre>
<h2><a id="DESCRIPTION" href="#DESCRIPTION"></a>DESCRIPTION  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>machinectl </b>may be used to introspect and control the state of the
       <a href="systemd.1.html">systemd(1)</a> virtual machine and container registration manager
       <a href="../man8/systemd-machined.service.8.html">systemd-machined.service(8)</a>.

       <b>machinectl </b>may be used to execute operations on machines and images.
       Machines in this sense are considered running instances of:

       ·   Virtual Machines (VMs) that virtualize hardware to run full
           operating system (OS) instances (including their kernels) in a
           virtualized environment on top of the host OS.

       ·   Containers that share the hardware and OS kernel with the host
           OS, in order to run OS userspace instances on top the host OS.

       ·   The host system itself

       Machines are identified by names that follow the same rules as UNIX
       and DNS host names, for details, see below. Machines are instantiated
       from disk or file system images that frequently — but not
       necessarily — carry the same name as machines running from them.
       Images in this sense are considered:

       ·   Directory trees containing an OS, including its top-level
           directories /usr, /etc, and so on.

       ·   btrfs subvolumes containing OS trees, similar to normal directory
           trees.

       ·   Binary "raw" disk images containing MBR or GPT partition tables
           and Linux file system partitions.

       ·   The file system tree of the host OS itself.
</pre>
<h2><a id="OPTIONS" href="#OPTIONS"></a>OPTIONS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The following options are understood:

       <b>-p</b>, <b>--property=</b>
           When showing machine or image properties, limit the output to
           certain properties as specified by the argument. If not
           specified, all set properties are shown. The argument should be a
           property name, such as "Name". If specified more than once, all
           properties with the specified names are shown.

       <b>-a</b>, <b>--all</b>
           When showing machine or image properties, show all properties
           regardless of whether they are set or not.

           When listing VM or container images, do not suppress images
           beginning in a dot character (".").

           When cleaning VM or container images, remove all images, not just
           hidden ones.

       <b>--value</b>
           When printing properties with <b>show</b>, only print the value, and
           skip the property name and "=".

       <b>-l</b>, <b>--full</b>
           Do not ellipsize process tree entries.

       <b>--no-ask-password</b>
           Do not query the user for authentication for privileged
           operations.

       <b>--kill-who=</b>
           When used with <b>kill</b>, choose which processes to kill. Must be one
           of <b>leader</b>, or <b>all </b>to select whether to kill only the leader
           process of the machine or all processes of the machine. If
           omitted, defaults to <b>all</b>.

       <b>-s</b>, <b>--signal=</b>
           When used with <b>kill</b>, choose which signal to send to selected
           processes. Must be one of the well-known signal specifiers, such
           as <b>SIGTERM</b>, <b>SIGINT </b>or <b>SIGSTOP</b>. If omitted, defaults to <b>SIGTERM</b>.

       <b>--uid=</b>
           When used with the <b>shell </b>command, chooses the user ID to open the
           interactive shell session as. If the argument to the <b>shell</b>
           command also specifies a user name, this option is ignored. If
           the name is not specified in either way, "root" will be used by
           default. Note that this switch is not supported for the <b>login</b>
           command (see below).

       <b>-E </b><i>NAME</i><b>=</b><i>VALUE</i>, <b>--setenv=</b><i>NAME</i><b>=</b><i>VALUE</i>
           When used with the <b>shell </b>command, sets an environment variable to
           pass to the executed shell. Takes an environment variable name
           and value, separated by "=". This switch may be used multiple
           times to set multiple environment variables. Note that this
           switch is not supported for the <b>login </b>command (see below).

       <b>--mkdir</b>
           When used with <b>bind</b>, creates the destination directory before
           applying the bind mount.

       <b>--read-only</b>
           When used with <b>bind</b>, applies a read-only bind mount.

           When used with <b>clone</b>, <b>import-raw </b>or <b>import-tar </b>a read-only
           container or VM image is created.

       <b>-n</b>, <b>--lines=</b>
           When used with <b>status</b>, controls the number of journal lines to
           show, counting from the most recent ones. Takes a positive
           integer argument. Defaults to 10.

       <b>-o</b>, <b>--output=</b>
           When used with <b>status</b>, controls the formatting of the journal
           entries that are shown. For the available choices, see
           <a href="journalctl.1.html">journalctl(1)</a>. Defaults to "short".

       <b>--verify=</b>
           When downloading a container or VM image, specify whether the
           image shall be verified before it is made available. Takes one of
           "no", "checksum" and "signature". If "no", no verification is
           done. If "checksum" is specified, the download is checked for
           integrity after the transfer is complete, but no signatures are
           verified. If "signature" is specified, the checksum is verified
           and the image's signature is checked against a local keyring of
           trustable vendors. It is strongly recommended to set this option
           to "signature" if the server and protocol support this. Defaults
           to "signature".

       <b>--force</b>
           When downloading a container or VM image, and a local copy by the
           specified local machine name already exists, delete it first and
           replace it by the newly downloaded image.

       <b>--format=</b>
           When used with the <b>export-tar </b>or <b>export-raw </b>commands, specifies
           the compression format to use for the resulting file. Takes one
           of "uncompressed", "xz", "gzip", "bzip2". By default, the format
           is determined automatically from the image file name passed.

       <b>--max-addresses=</b>
           When used with the <b>list-machines </b>command, limits the number of ip
           addresses output for every machine. Defaults to 1. All addresses
           can be requested with "all" as argument to <b>--max-addresses </b>. If
           the argument to <b>--max-addresses </b>is less than the actual number of
           addresses, "..."follows the last address. If multiple addresses
           are to be written for a given machine, every address except the
           first one is on a new line and is followed by "," if another
           address will be output afterwards.

       <b>-H</b>, <b>--host=</b>
           Execute the operation remotely. Specify a hostname, or a username
           and hostname separated by "@", to connect to. The hostname may
           optionally be suffixed by a container name, separated by ":",
           which connects directly to a specific container on the specified
           host. This will use SSH to talk to the remote machine manager
           instance. Container names may be enumerated with <b>machinectl -H</b>
           <i>HOST</i>.

       <b>-M</b>, <b>--machine=</b>
           Execute operation on a local container. Specify a container name
           to connect to.

       <b>--no-pager</b>
           Do not pipe output into a pager.

       <b>--no-legend</b>
           Do not print the legend, i.e. column headers and the footer with
           hints.

       <b>-h</b>, <b>--help</b>
           Print a short help text and exit.

       <b>--version</b>
           Print a short version string and exit.
</pre>
<h2><a id="COMMANDS" href="#COMMANDS"></a>COMMANDS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The following commands are understood:

   <b>Machine Commands</b>
       <b>list</b>
           List currently running (online) virtual machines and containers.
           To enumerate machine images that can be started, use <b>list-images</b>
           (see below). Note that this command hides the special ".host"
           machine by default. Use the <b>--all </b>switch to show it.

       <b>status </b><i>NAME</i>...
           Show runtime status information about one or more virtual
           machines and containers, followed by the most recent log data
           from the journal. This function is intended to generate
           human-readable output. If you are looking for computer-parsable
           output, use <b>show </b>instead. Note that the log data shown is
           reported by the virtual machine or container manager, and
           frequently contains console output of the machine, but not
           necessarily journal contents of the machine itself.

       <b>show </b>[<i>NAME</i>...]
           Show properties of one or more registered virtual machines or
           containers or the manager itself. If no argument is specified,
           properties of the manager will be shown. If a NAME is specified,
           properties of this virtual machine or container are shown. By
           default, empty properties are suppressed. Use <b>--all </b>to show those
           too. To select specific properties to show, use <b>--property=</b>. This
           command is intended to be used whenever computer-parsable output
           is required, and does not print the control group tree or journal
           entries. Use <b>status </b>if you are looking for formatted
           human-readable output.

       <b>start </b><i>NAME</i>...
           Start a container as a system service, using <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a>.
           This starts systemd-nspawn@.service, instantiated for the
           specified machine name, similar to the effect of <b>systemctl start</b>
           on the service name.  <b>systemd-nspawn </b>looks for a container image
           by the specified name in /var/lib/machines/ (and other search
           paths, see below) and runs it. Use <b>list-images </b>(see below) for
           listing available container images to start.

           Note that <a href="../man8/systemd-machined.service.8.html">systemd-machined.service(8)</a> also interfaces with a
           variety of other container and VM managers, <b>systemd-nspawn </b>is
           just one implementation of it. Most of the commands available in
           <b>machinectl </b>may be used on containers or VMs controlled by other
           managers, not just <b>systemd-nspawn</b>. Starting VMs and container
           images on those managers requires manager-specific tools.

           To interactively start a container on the command line with full
           access to the container's console, please invoke <b>systemd-nspawn</b>
           directly. To stop a running container use <b>machinectl poweroff</b>.

       <b>login </b>[<i>NAME</i>]
           Open an interactive terminal login session in a container or on
           the local host. If an argument is supplied, it refers to the
           container machine to connect to. If none is specified, or the
           container name is specified as the empty string, or the special
           machine name ".host" (see below) is specified, the connection is
           made to the local host instead. This will create a TTY connection
           to a specific container or the local host and asks for the
           execution of a getty on it. Note that this is only supported for
           containers running <a href="systemd.1.html">systemd(1)</a> as init system.

           This command will open a full login prompt on the container or
           the local host, which then asks for username and password. Use
           <b>shell </b>(see below) or <a href="systemd-run.1.html">systemd-run(1)</a> with the <b>--machine= </b>switch to
           directly invoke a single command, either interactively or in the
           background.

       <b>shell </b>[[<i>NAME</i>@]<i>NAME</i> [<i>PATH</i> [<i>ARGUMENTS</i>...]]]
           Open an interactive shell session in a container or on the local
           host. The first argument refers to the container machine to
           connect to. If none is specified, or the machine name is
           specified as the empty string, or the special machine name
           ".host" (see below) is specified, the connection is made to the
           local host instead. This works similar to <b>login </b>but immediately
           invokes a user process. This command runs the specified
           executable with the specified arguments, or /bin/sh if none is
           specified. By default, opens a "root" shell, but by using <b>--uid=</b>,
           or by prefixing the machine name with a username and an "@"
           character, a different user may be selected. Use <b>--setenv= </b>to set
           environment variables for the executed process.

           Note that <b>machinectl shell </b>does not propagate the exit
           code/status of the invoked shell process. Use <b>systemd-run </b>instead
           if that information is required (see below).

           When using the <b>shell </b>command without arguments, (thus invoking
           the executed shell or command on the local host), it is in many
           ways similar to a <a href="su.1.html">su(1)</a> session, but, unlike <b>su</b>, completely
           isolates the new session from the originating session, so that it
           shares no process or session properties, and is in a clean and
           well-defined state. It will be tracked in a new utmp, login,
           audit, security and keyring session, and will not inherit any
           environment variables or resource limits, among other properties.

           Note that <a href="systemd-run.1.html">systemd-run(1)</a> with its <b>--machine= </b>switch may be used
           in place of the <b>machinectl shell </b>command, and allows
           non-interactive operation, more detailed and low-level
           configuration of the invoked unit, as well as access to runtime
           and exit code/status information of the invoked shell process. In
           particular, use <b>systemd-run</b>'s <b>--wait </b>switch to propagate exit
           status information of the invoked process. Use <b>systemd-run</b>'s
           <b>--pty </b>switch for acquiring an interactive shell, similar to
           <b>machinectl shell</b>. In general, <b>systemd-run </b>is preferable for
           scripting purposes. However, note that <b>systemd-run </b>might require
           higher privileges than <b>machinectl shell</b>.

       <b>enable </b><i>NAME</i>..., <b>disable </b><i>NAME</i>...
           Enable or disable a container as a system service to start at
           system boot, using <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a>. This enables or disables
           systemd-nspawn@.service, instantiated for the specified machine
           name, similar to the effect of <b>systemctl enable </b>or <b>systemctl</b>
           <b>disable </b>on the service name.

       <b>poweroff </b><i>NAME</i>...
           Power off one or more containers. This will trigger a reboot by
           sending SIGRTMIN+4 to the container's init process, which causes
           systemd-compatible init systems to shut down cleanly. Use <b>stop </b>as
           alias for <b>poweroff</b>. This operation does not work on containers
           that do not run a <a href="systemd.1.html">systemd(1)</a>-compatible init system, such as
           sysvinit. Use <b>terminate </b>(see below) to immediately terminate a
           container or VM, without cleanly shutting it down.

       <b>reboot </b><i>NAME</i>...
           Reboot one or more containers. This will trigger a reboot by
           sending SIGINT to the container's init process, which is roughly
           equivalent to pressing Ctrl+Alt+Del on a non-containerized
           system, and is compatible with containers running any system
           manager.

       <b>terminate </b><i>NAME</i>...
           Immediately terminates a virtual machine or container, without
           cleanly shutting it down. This kills all processes of the virtual
           machine or container and deallocates all resources attached to
           that instance. Use <b>poweroff </b>to issue a clean shutdown request.

       <b>kill </b><i>NAME</i>...
           Send a signal to one or more processes of the virtual machine or
           container. This means processes as seen by the host, not the
           processes inside the virtual machine or container. Use
           <b>--kill-who= </b>to select which process to kill. Use <b>--signal= </b>to
           select the signal to send.

       <b>bind </b><i>NAME PATH</i> [<i>PATH</i>]
           Bind mounts a directory from the host into the specified
           container. The first directory argument is the source directory
           on the host, the second directory argument is the destination
           directory in the container. When the latter is omitted, the
           destination path in the container is the same as the source path
           on the host. When combined with the <b>--read-only </b>switch, a
           ready-only bind mount is created. When combined with the <b>--mkdir</b>
           switch, the destination path is first created before the mount is
           applied. Note that this option is currently only supported for
           <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a> containers, and only if user namespacing
           (<b>--private-users</b>) is not used.

       <b>copy-to </b><i>NAME PATH</i> [<i>PATH</i>]
           Copies files or directories from the host system into a running
           container. Takes a container name, followed by the source path on
           the host and the destination path in the container. If the
           destination path is omitted, the same as the source path is used.

           If host and container share the same user and group namespace,
           file ownership by numeric user ID and group ID is preserved for
           the copy, otherwise all files and directories in the copy will be
           owned by the root user and group (UID/GID 0).

       <b>copy-from </b><i>NAME PATH</i> [<i>PATH</i>]
           Copies files or directories from a container into the host
           system. Takes a container name, followed by the source path in
           the container the destination path on the host. If the
           destination path is omitted, the same as the source path is used.

           If host and container share the same user and group namespace,
           file ownership by numeric user ID and group ID is preserved for
           the copy, otherwise all files and directories in the copy will be
           owned by the root user and group (UID/GID 0).

   <b>Image Commands</b>
       <b>list-images</b>
           Show a list of locally installed container and VM images. This
           enumerates all raw disk images and container directories and
           subvolumes in /var/lib/machines/ (and other search paths, see
           below). Use <b>start </b>(see above) to run a container off one of the
           listed images. Note that, by default, containers whose name
           begins with a dot (".") are not shown. To show these too, specify
           <b>--all</b>. Note that a special image ".host" always implicitly exists
           and refers to the image the host itself is booted from.

       <b>image-status </b>[<i>NAME</i>...]
           Show terse status information about one or more container or VM
           images. This function is intended to generate human-readable
           output. Use <b>show-image </b>(see below) to generate computer-parsable
           output instead.

       <b>show-image </b>[<i>NAME</i>...]
           Show properties of one or more registered virtual machine or
           container images, or the manager itself. If no argument is
           specified, properties of the manager will be shown. If a NAME is
           specified, properties of this virtual machine or container image
           are shown. By default, empty properties are suppressed. Use <b>--all</b>
           to show those too. To select specific properties to show, use
           <b>--property=</b>. This command is intended to be used whenever
           computer-parsable output is required. Use <b>image-status </b>if you are
           looking for formatted human-readable output.

       <b>clone </b><i>NAME NAME</i>
           Clones a container or VM image. The arguments specify the name of
           the image to clone and the name of the newly cloned image. Note
           that plain directory container images are cloned into btrfs
           subvolume images with this command, if the underlying file system
           supports this. Note that cloning a container or VM image is
           optimized for file systems that support copy-on-write, and might
           not be efficient on others, due to file system limitations.

           Note that this command leaves host name, machine ID and all other
           settings that could identify the instance unmodified. The
           original image and the cloned copy will hence share these
           credentials, and it might be necessary to manually change them in
           the copy.

           If combined with the <b>--read-only </b>switch a read-only cloned image
           is created.

       <b>rename </b><i>NAME NAME</i>
           Renames a container or VM image. The arguments specify the name
           of the image to rename and the new name of the image.

       <b>read-only </b><i>NAME</i> [<i>BOOL</i>]
           Marks or (unmarks) a container or VM image read-only. Takes a VM
           or container image name, followed by a boolean as arguments. If
           the boolean is omitted, positive is implied, i.e. the image is
           marked read-only.

       <b>remove </b><i>NAME</i>...
           Removes one or more container or VM images. The special image
           ".host", which refers to the host's own directory tree, may not
           be removed.

       <b>set-limit </b>[<i>NAME</i>] <i>BYTES</i>
           Sets the maximum size in bytes that a specific container or VM
           image, or all images, may grow up to on disk (disk quota). Takes
           either one or two parameters. The first, optional parameter
           refers to a container or VM image name. If specified, the size
           limit of the specified image is changed. If omitted, the overall
           size limit of the sum of all images stored locally is changed.
           The final argument specifies the size limit in bytes, possibly
           suffixed by the usual K, M, G, T units. If the size limit shall
           be disabled, specify "-" as size.

           Note that per-container size limits are only supported on btrfs
           file systems. Also note that, if <b>set-limit </b>is invoked without an
           image parameter, and /var/lib/machines is empty, and the
           directory is not located on btrfs, a btrfs loopback file is
           implicitly created as /var/lib/machines.raw with the given size,
           and mounted to /var/lib/machines. The size of the loopback may
           later be readjusted with <b>set-limit</b>, as well. If such a
           loopback-mounted /var/lib/machines directory is used, <b>set-limit</b>
           without an image name alters both the quota setting within the
           file system as well as the loopback file and file system size
           itself.

       <b>clean</b>
           Remove hidden VM or container images (or all). This command
           removes all hidden machine images from /var/lib/machines, i.e.
           those whose name begins with a dot. Use <b>machinectl list-images</b>
           <b>--all </b>to see a list of all machine images, including the hidden
           ones.

           When combined with the <b>--all </b>switch removes all images, not just
           hidden ones. This command effectively empties /var/lib/machines.

           Note that commands such as <b>machinectl pull-tar </b>or <b>machinectl</b>
           <b>pull-raw </b>usually create hidden, read-only, unmodified machine
           images from the downloaded image first, before cloning a writable
           working copy of it, in order to avoid duplicate downloads in case
           of images that are reused multiple times. Use <b>machinectl clean </b>to
           remove old, hidden images created this way.

   <b>Image Transfer Commands</b>
       <b>pull-tar </b><i>URL</i> [<i>NAME</i>]
           Downloads a .tar container image from the specified URL, and
           makes it available under the specified local machine name. The
           URL must be of type "http://" or "https://", and must refer to a
           .tar, .tar.gz, .tar.xz or .tar.bz2 archive file. If the local
           machine name is omitted, it is automatically derived from the
           last component of the URL, with its suffix removed.

           The image is verified before it is made available, unless
           <b>--verify=no </b>is specified. Verification is done either via an
           inline signed file with the name of the image and the suffix
           .sha256 or via separate SHA256SUMS and SHA256SUMS.gpg files. The
           signature files need to be made available on the same web server,
           under the same URL as the .tar file. With <b>--verify=checksum</b>, only
           the SHA256 checksum for the file is verified, based on the
           .sha256 suffixed file or theSHA256SUMS file. With
           <b>--verify=signature</b>, the sha checksum file is first verified with
           the inline signature in the .sha256 file or the detached GPG
           signature file SHA256SUMS.gpg. The public key for this
           verification step needs to be available in
           /usr/lib/systemd/import-pubring.gpg or
           /etc/systemd/import-pubring.gpg.

           The container image will be downloaded and stored in a read-only
           subvolume in /var/lib/machines/ that is named after the specified
           URL and its HTTP etag. A writable snapshot is then taken from
           this subvolume, and named after the specified local name. This
           behavior ensures that creating multiple container instances of
           the same URL is efficient, as multiple downloads are not
           necessary. In order to create only the read-only image, and avoid
           creating its writable snapshot, specify "-" as local machine
           name.

           Note that the read-only subvolume is prefixed with .tar-, and is
           thus not shown by <b>list-images</b>, unless <b>--all </b>is passed.

           Note that pressing C-c during execution of this command will not
           abort the download. Use <b>cancel-transfer</b>, described below.

       <b>pull-raw </b><i>URL</i> [<i>NAME</i>]
           Downloads a .raw container or VM disk image from the specified
           URL, and makes it available under the specified local machine
           name. The URL must be of type "http://" or "https://". The
           container image must either be a .qcow2 or raw disk image,
           optionally compressed as .gz, .xz, or .bz2. If the local machine
           name is omitted, it is automatically derived from the last
           component of the URL, with its suffix removed.

           Image verification is identical for raw and tar images (see
           above).

           If the downloaded image is in .qcow2 format it is converted into
           a raw image file before it is made available.

           Downloaded images of this type will be placed as read-only .raw
           file in /var/lib/machines/. A local, writable (reflinked) copy is
           then made under the specified local machine name. To omit
           creation of the local, writable copy pass "-" as local machine
           name.

           Similar to the behavior of <b>pull-tar</b>, the read-only image is
           prefixed with .raw-, and thus not shown by <b>list-images</b>, unless
           <b>--all </b>is passed.

           Note that pressing C-c during execution of this command will not
           abort the download. Use <b>cancel-transfer</b>, described below.

       <b>import-tar </b><i>FILE</i> [<i>NAME</i>], <b>import-raw </b><i>FILE</i> [<i>NAME</i>]
           Imports a TAR or RAW container or VM image, and places it under
           the specified name in /var/lib/machines/. When <b>import-tar </b>is
           used, the file specified as the first argument should be a tar
           archive, possibly compressed with xz, gzip or bzip2. It will then
           be unpacked into its own subvolume in /var/lib/machines. When
           <b>import-raw </b>is used, the file should be a qcow2 or raw disk image,
           possibly compressed with xz, gzip or bzip2. If the second
           argument (the resulting image name) is not specified, it is
           automatically derived from the file name. If the file name is
           passed as "-", the image is read from standard input, in which
           case the second argument is mandatory.

           Both <b>pull-tar </b>and <b>pull-raw </b>will resize /var/lib/machines.raw and
           the filesystem therein as necessary. Optionally, the <b>--read-only</b>
           switch may be used to create a read-only container or VM image.
           No cryptographic validation is done when importing the images.

           Much like image downloads, ongoing imports may be listed with
           <b>list-transfers </b>and aborted with <b>cancel-transfer</b>.

       <b>export-tar </b><i>NAME</i> [<i>FILE</i>], <b>export-raw </b><i>NAME</i> [<i>FILE</i>]
           Exports a TAR or RAW container or VM image and stores it in the
           specified file. The first parameter should be a VM or container
           image name. The second parameter should be a file path the TAR or
           RAW image is written to. If the path ends in ".gz", the file is
           compressed with gzip, if it ends in ".xz", with xz, and if it
           ends in ".bz2", with bzip2. If the path ends in neither, the file
           is left uncompressed. If the second argument is missing, the
           image is written to standard output. The compression may also be
           explicitly selected with the <b>--format= </b>switch. This is in
           particular useful if the second parameter is left unspecified.

           Much like image downloads and imports, ongoing exports may be
           listed with <b>list-transfers </b>and aborted with <b>cancel-transfer</b>.

           Note that, currently, only directory and subvolume images may be
           exported as TAR images, and only raw disk images as RAW images.

       <b>list-transfers</b>
           Shows a list of container or VM image downloads, imports and
           exports that are currently in progress.

       <b>cancel-transfers </b><i>ID</i>...
           Aborts a download, import or export of the container or VM image
           with the specified ID. To list ongoing transfers and their IDs,
           use <b>list-transfers</b>.
</pre>
<h2><a id="MACHINE_AND_IMAGE_NAMES" href="#MACHINE_AND_IMAGE_NAMES"></a>MACHINE AND IMAGE NAMES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The <b>machinectl </b>tool operates on machines and images whose names must
       be chosen following strict rules. Machine names must be suitable for
       use as host names following a conservative subset of DNS and
       UNIX/Linux semantics. Specifically, they must consist of one or more
       non-empty label strings, separated by dots. No leading or trailing
       dots are allowed. No sequences of multiple dots are allowed. The
       label strings may only consist of alphanumeric characters as well as
       the dash and underscore. The maximum length of a machine name is 64
       characters.

       A special machine with the name ".host" refers to the running host
       system itself. This is useful for execution operations or inspecting
       the host system as well. Note that <b>machinectl list </b>will not show this
       special machine unless the <b>--all </b>switch is specified.

       Requirements on image names are less strict, however, they must be
       valid UTF-8, must be suitable as file names (hence not be the single
       or double dot, and not include a slash), and may not contain control
       characters. Since many operations search for an image by the name of
       a requested machine, it is recommended to name images in the same
       strict fashion as machines.

       A special image with the name ".host" refers to the image of the
       running host system. It hence conceptually maps to the special
       ".host" machine name described above. Note that <b>machinectl</b>
       <b>list-images </b>will not show this special image either, unless <b>--all </b>is
       specified.
</pre>
<h2><a id="FILES_AND_DIRECTORIES" href="#FILES_AND_DIRECTORIES"></a>FILES AND DIRECTORIES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       Machine images are preferably stored in /var/lib/machines/, but are
       also searched for in /usr/local/lib/machines/ and /usr/lib/machines/.
       For compatibility reasons, the directory /var/lib/container/ is
       searched, too. Note that images stored below /usr are always
       considered read-only. It is possible to symlink machines images from
       other directories into /var/lib/machines/ to make them available for
       control with <b>machinectl</b>.

       Note that some image operations are only supported, efficient or
       atomic on btrfs file systems. Due to this, if the <b>pull-tar</b>, <b>pull-raw</b>,
       <b>import-tar</b>, <b>import-raw </b>and <b>set-limit </b>commands notice that
       /var/lib/machines is empty and not located on btrfs, they will
       implicitly set up a loopback file /var/lib/machines.raw containing a
       btrfs file system that is mounted to /var/lib/machines. The size of
       this loopback file may be controlled dynamically with <b>set-limit</b>.

       Disk images are understood by <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a> and <b>machinectl </b>in
       three formats:

       ·   A simple directory tree, containing the files and directories of
           the container to boot.

       ·   Subvolumes (on btrfs file systems), which are similar to the
           simple directories, described above. However, they have
           additional benefits, such as efficient cloning and quota
           reporting.

       ·   "Raw" disk images, i.e. binary images of disks with a GPT or MBR
           partition table. Images of this type are regular files with the
           suffix ".raw".

       See <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a> for more information on image formats, in
       particular its <b>--directory= </b>and <b>--image= </b>options.
</pre>
<h2><a id="EXAMPLES" href="#EXAMPLES"></a>EXAMPLES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>Example 1. Download an Ubuntu image and open a shell in it</b>

           # machinectl pull-tar <a href="../../../../cloud-images.ubuntu.com/trusty/current/trusty-server-cloudimg-amd64-root.tar.gz">https://cloud-images.ubuntu.com/trusty/current/trusty-server-cloudimg-amd64-root.tar.gz</a>
           # systemd-nspawn -M trusty-server-cloudimg-amd64-root

       This downloads and verifies the specified .tar image, and then uses
       <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a> to open a shell in it.

       <b>Example 2. Download a Fedora image, set a root password in it, start</b>
       <b>it as service</b>

           # machinectl pull-raw --verify=no <a href="https://dl.fedoraproject.org/pub/fedora/linux/releases/23/Cloud/x86_64/Images/Fedora-Cloud-Base-23-20151030.x86_64.raw.xz">https://dl.fedoraproject.org/pub/fedora/linux/releases/23/Cloud/x86_64/Images/Fedora-Cloud-Base-23-20151030.x86_64.raw.xz</a>
           # systemd-nspawn -M Fedora-Cloud-Base-23-20151030
           # passwd
           # exit
           # machinectl start Fedora-Cloud-Base-23-20151030
           # machinectl login Fedora-Cloud-Base-23-20151030

       This downloads the specified .raw image with verification disabled.
       Then, a shell is opened in it and a root password is set. Afterwards
       the shell is left, and the machine started as system service. With
       the last command a login prompt into the container is requested.

       <b>Example 3. Exports a container image as tar file</b>

           # machinectl export-tar fedora myfedora.tar.xz

       Exports the container "fedora" as an xz-compressed tar file
       myfedora.tar.xz into the current directory.

       <b>Example 4. Create a new shell session</b>

           # machinectl shell --uid=lennart

       This creates a new shell session on the local host for the user ID
       "lennart", in a <a href="su.1.html">su(1)</a>-like fashion.
</pre>
<h2><a id="EXIT_STATUS" href="#EXIT_STATUS"></a>EXIT STATUS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       On success, 0 is returned, a non-zero failure code otherwise.
</pre>
<h2><a id="ENVIRONMENT" href="#ENVIRONMENT"></a>ENVIRONMENT  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <i>$SYSTEMD_PAGER</i>
           Pager to use when <b>--no-pager </b>is not given; overrides <i>$PAGER</i>. If
           neither <i>$SYSTEMD_PAGER</i> nor <i>$PAGER</i> are set, a set of well-known
           pager implementations are tried in turn, including <a href="less.1.html">less(1)</a> and
           <a href="more.1.html">more(1)</a>, until one is found. If no pager implementation is
           discovered no pager is invoked. Setting this environment variable
           to an empty string or the value "cat" is equivalent to passing
           <b>--no-pager</b>.

       <i>$SYSTEMD_LESS</i>
           Override the options passed to <b>less </b>(by default "FRSXMK").

       <i>$SYSTEMD_LESSCHARSET</i>
           Override the charset passed to <b>less </b>(by default "utf-8", if the
           invoking terminal is determined to be UTF-8 compatible).
</pre>
<h2><a id="SEE_ALSO" href="#SEE_ALSO"></a>SEE ALSO  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <a href="../man8/systemd-machined.service.8.html">systemd-machined.service(8)</a>, <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a>, <a href="../man7/systemd.special.7.html">systemd.special(7)</a>,
       <a href="tar.1.html">tar(1)</a>, <b>xz</b>(1), <b>gzip</b>(1), <b>bzip2</b>(1)
</pre>
<h2><a id="COLOPHON" href="#COLOPHON"></a>COLOPHON  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This page is part of the <i>systemd</i> (systemd system and service manager)
       project.  Information about the project can be found at 
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd">http://www.freedesktop.org/wiki/Software/systemd</a>⟩.  If you have a bug
       report for this manual page, see 
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd/#bugreports">http://www.freedesktop.org/wiki/Software/systemd/#bugreports</a>⟩.  This
       page was obtained from the project's upstream Git repository 
       ⟨<a href="https://github.com/systemd/systemd.git">https://github.com/systemd/systemd.git</a>⟩ on 2017-07-05.  If you dis‐
       cover any rendering problems in this HTML version of the page, or you
       believe there is a better or more up-to-date source for the page, or
       you have corrections or improvements to the information in this
       COLOPHON (which is <i>not</i> part of the original manual page), send a mail
       to man-pages@man7.org

<span class="footline">systemd 234                                                    MACHINECTL(1)</span>
</pre>

<hr class="end-man-text" />
<p>Pages that refer to this page: 
    <a href="busctl.1.html">busctl(1)</a>,&nbsp; 
    <a href="systemctl.1.html">systemctl(1)</a>,&nbsp; 
    <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a>,&nbsp; 
    <a href="systemd-run.1.html">systemd-run(1)</a>,&nbsp; 
    <a href="../man3/sd_bus_default.3.html">sd_bus_default(3)</a>,&nbsp; 
    <a href="../man7/systemd.directives.7.html">systemd.directives(7)</a>,&nbsp; 
    <a href="../man7/systemd.index.7.html">systemd.index(7)</a>,&nbsp; 
    <a href="../man8/systemd-importd.service.8.html">systemd-importd.service(8)</a>,&nbsp; 
    <a href="../man8/systemd-machined.service.8.html">systemd-machined.service(8)</a>
</p>
<hr/>

 
<hr class="start-footer" />

<div class="footer"> 

<table class="colophon-table">
    <tr>
    <td class="pub-info">
        <p>
            HTML rendering created 2017-07-13
            by <a href="http://man7.org/mtk/index.html">Michael Kerrisk</a>, 
            author of 
            <a href="http://man7.org/tlpi/"><em>The Linux Programming Interface</em></a>, 
            maintainer of the 
            <a href="https://www.kernel.org/doc/man-pages/">Linux <em>man-pages</em> project</a>.
        </p>
        <p>
            For details of in-depth
            <strong>Linux/UNIX system programming training courses</strong>
            that I teach, look <a href="http://man7.org/training/">here</a>.
        </p>
        <p>
            Hosting by <a href="http://www.jambit.com/index_en.html">jambit GmbH</a>.
        </p>
        <p>
            <a href="http://validator.w3.org/check?uri=referer">
            <img src="http://www.w3.org/Icons/valid-xhtml11"
                alt="Valid XHTML 1.1" height="31" width="88" />
            </a>
        </p>
    </td>
    <td class="colophon-divider">
    </td>
    <td class="tlpi-cover">
        <a href="http://man7.org/tlpi/"><img src="../../../tlpi/cover/TLPI-front-cover-vsmall.png" alt="Cover of TLPI" /></a>
    </td>
    </tr>
</table>

</div>

<hr class="end-footer" />



<!--BEGIN-SITETRACKING-->
<!-- SITETRACKING.man7.org_linux_man-pages -->

<!-- Start of StatCounter Code (xhtml) -->

<script type="text/javascript">
//<![CDATA[
var sc_project=7422636; 
var sc_invisible=1; 
var sc_security="9b6714ff"; 
//]]>
</script>
<script type="text/javascript"
src="../../../../www.statcounter.com/counter/counter_xhtml.js"></script>
<noscript><div class="statcounter"><a title="website
statistics" href="http://statcounter.com/"
class="statcounter"><img class="statcounter"
src="http://c.statcounter.com/7422636/0/9b6714ff/1/"
alt="website statistics" /></a></div></noscript>

<!-- End of StatCounter Code -->


<!-- Start of Google Analytics Code -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9830363-8']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- End of Google Analytics Code -->

<!--END-SITETRACKING-->

</body>
</html>
