
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <link rel="stylesheet" type="text/css" href="../../../style.css" title="style" />
    <link rel="stylesheet" type="text/css" href="../style.css" title="style" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <title>ed.1p - Linux manual page</title>
</head>

<body>

<div class="page-top"><a id="top_of_page"></a></div>
<!--%%%TOP_BAR%%%-->
    <div class="nav-bar">
        <table class="nav-table">
            <tr>
                <td class="nav-cell">
                    <p class="nav-text">
                        <a href="http://man7.org/index.html">man7.org</a> &gt; Linux &gt; <a href="../index.html">man-pages</a>
                    </p>
                </td>
                <td class="training-cell">
                    <p class="training-text"><a class="training-link" href="http://man7.org/training/">Linux/UNIX system programming training</a></p>
                </td>
            </tr>
        </table>
    </div>

<hr class="nav-end" />

<!--%%%PAGE_START%%%-->


<table class="sec-table">
<tr>
    <td>
        <p class="section-dir">
<a href="#PROLOG">PROLOG</a> | <a href="#NAME">NAME</a> | <a href="#SYNOPSIS">SYNOPSIS</a> | <a href="#DESCRIPTION">DESCRIPTION</a> | <a href="#OPTIONS">OPTIONS</a> | <a href="#OPERANDS">OPERANDS</a> | <a href="#STDIN">STDIN</a> | <a href="#INPUT_FILES">INPUT&nbsp;FILES</a> | <a href="#ENVIRONMENT_VARIABLES">ENVIRONMENT&nbsp;VARIABLES</a> | <a href="#ASYNCHRONOUS_EVENTS">ASYNCHRONOUS&nbsp;EVENTS</a> | <a href="#STDOUT">STDOUT</a> | <a href="#STDERR">STDERR</a> | <a href="#OUTPUT_FILES">OUTPUT&nbsp;FILES</a> | <a href="#EXTENDED_DESCRIPTION">EXTENDED&nbsp;DESCRIPTION</a> | <a href="#EXIT_STATUS">EXIT&nbsp;STATUS</a> | <a href="#CONSEQUENCES_OF_ERRORS">CONSEQUENCES&nbsp;OF&nbsp;ERRORS</a> | <a href="#APPLICATION_USAGE">APPLICATION&nbsp;USAGE</a> | <a href="#EXAMPLES">EXAMPLES</a> | <a href="#RATIONALE">RATIONALE</a> | <a href="#FUTURE_DIRECTIONS">FUTURE&nbsp;DIRECTIONS</a> | <a href="#SEE_ALSO">SEE&nbsp;ALSO</a> | <a href="#COPYRIGHT">COPYRIGHT</a>
        </p>
    </td>
    <td class="search-box">
        <div class="man-search-box">

            <form method="get" action="http://www.google.com/search">
                <fieldset class="man-search">
                    <input type="text" name="q" size="10" maxlength="255" value="" />
                    <input type="hidden" name="sitesearch" value="man7.org/linux/man-pages" />
                    <input type="submit" name="sa" value="Search online pages" />
                </fieldset>
            </form>

        </div>
    </td>
    <td> </td>
</tr>
</table>

<pre>
<span class="headline">ED(1P)                    POSIX Programmer's Manual                   ED(1P)</span>
</pre>
<h2><a id="PROLOG" href="#PROLOG"></a>PROLOG  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This manual page is part of the POSIX Programmer's Manual.  The Linux
       implementation of this interface may differ (consult the
       corresponding Linux manual page for details of Linux behavior), or
       the interface may not be implemented on Linux.
</pre>
<h2><a id="NAME" href="#NAME"></a>NAME  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       ed — edit text
</pre>
<h2><a id="SYNOPSIS" href="#SYNOPSIS"></a>SYNOPSIS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       ed <b>[</b>−p <i>string</i><b>] [</b>−s<b>] [</b><i>file</i><b>]</b>
</pre>
<h2><a id="DESCRIPTION" href="#DESCRIPTION"></a>DESCRIPTION  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The <i>ed</i> utility is a line-oriented text editor that uses two modes:
       <i>command mode</i> and <i>input mode</i>.  In command mode the input characters
       shall be interpreted as commands, and in input mode they shall be
       interpreted as text. See the EXTENDED DESCRIPTION section.

       If an operand is <b>'−'</b>, the results are unspecified.
</pre>
<h2><a id="OPTIONS" href="#OPTIONS"></a>OPTIONS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The <i>ed</i> utility shall conform to the Base Definitions volume of
       POSIX.1‐2008, <i>Section 12.2</i>, <i>Utility Syntax Guidelines</i>, except for the
       unspecified usage of <b>'−'</b>.

       The following options shall be supported:

       <b>−p </b><i>string</i> Use <i>string</i> as the prompt string when in command mode. By
                 default, there shall be no prompt string.

       <b>−s        </b>Suppress the writing of byte counts by <b>e</b>, <b>E</b>, <b>r</b>, and <b>w</b>
                 commands and of the <b>'!'  </b>prompt after a !<i>command</i>.
</pre>
<h2><a id="OPERANDS" href="#OPERANDS"></a>OPERANDS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The following operand shall be supported:

       <i>file</i>      If the <i>file</i> argument is given, <i>ed</i> shall simulate an <b>e</b>
                 command on the file named by the pathname, <i>file</i>, before
                 accepting commands from the standard input.
</pre>
<h2><a id="STDIN" href="#STDIN"></a>STDIN  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The standard input shall be a text file consisting of commands, as
       described in the EXTENDED DESCRIPTION section.
</pre>
<h2><a id="INPUT_FILES" href="#INPUT_FILES"></a>INPUT FILES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The input files shall be text files.
</pre>
<h2><a id="ENVIRONMENT_VARIABLES" href="#ENVIRONMENT_VARIABLES"></a>ENVIRONMENT VARIABLES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The following environment variables shall affect the execution of <i>ed</i>:

       <i>HOME</i>      Determine the pathname of the user's home directory.

       <i>LANG</i>      Provide a default value for the internationalization
                 variables that are unset or null. (See the Base Definitions
                 volume of POSIX.1‐2008, <i>Section 8.2</i>, <i>Internationalization</i>
                 <i>Variables</i> for the precedence of internationalization
                 variables used to determine the values of locale
                 categories.)

       <i>LC_ALL</i>    If set to a non-empty string value, override the values of
                 all the other internationalization variables.

       <i>LC_COLLATE</i>
                 Determine the locale for the behavior of ranges,
                 equivalence classes, and multi-character collating elements
                 within regular expressions.

       <i>LC_CTYPE</i>  Determine the locale for the interpretation of sequences of
                 bytes of text data as characters (for example, single-byte
                 as opposed to multi-byte characters in arguments and input
                 files) and the behavior of character classes within regular
                 expressions.

       <i>LC_MESSAGES</i>
                 Determine the locale that should be used to affect the
                 format and contents of diagnostic messages written to
                 standard error and informative messages written to standard
                 output.

       <i>NLSPATH</i>   Determine the location of message catalogs for the
                 processing of <i>LC_MESSAGES</i>.
</pre>
<h2><a id="ASYNCHRONOUS_EVENTS" href="#ASYNCHRONOUS_EVENTS"></a>ASYNCHRONOUS EVENTS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The <i>ed</i> utility shall take the standard action for all signals (see
       the ASYNCHRONOUS EVENTS section in <i>Section 1.4</i>, <i>Utility Description</i>
       <i>Defaults</i>) with the following exceptions:

       SIGINT    The <i>ed</i> utility shall interrupt its current activity, write
                 the string <b>"?\n" </b>to standard output, and return to command
                 mode (see the EXTENDED DESCRIPTION section).

       SIGHUP    If the buffer is not empty and has changed since the last
                 write, the <i>ed</i> utility shall attempt to write a copy of the
                 buffer in a file. First, the file named <b>ed.hup </b>in the
                 current directory shall be used; if that fails, the file
                 named <b>ed.hup </b>in the directory named by the <i>HOME</i> environment
                 variable shall be used. In any case, the <i>ed</i> utility shall
                 exit without writing the file to the currently remembered
                 pathname and without returning to command mode.

       SIGQUIT   The <i>ed</i> utility shall ignore this event.
</pre>
<h2><a id="STDOUT" href="#STDOUT"></a>STDOUT  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       Various editing commands and the prompting feature (see <b>−p</b>) write to
       standard output, as described in the EXTENDED DESCRIPTION section.
</pre>
<h2><a id="STDERR" href="#STDERR"></a>STDERR  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The standard error shall be used only for diagnostic messages.
</pre>
<h2><a id="OUTPUT_FILES" href="#OUTPUT_FILES"></a>OUTPUT FILES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The output files shall be text files whose formats are dependent on
       the editing commands given.
</pre>
<h2><a id="EXTENDED_DESCRIPTION" href="#EXTENDED_DESCRIPTION"></a>EXTENDED DESCRIPTION  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The <i>ed</i> utility shall operate on a copy of the file it is editing;
       changes made to the copy shall have no effect on the file until a <b>w</b>
       (write) command is given. The copy of the text is called the <i>buffer</i>.

       Commands to <i>ed</i> have a simple and regular structure: zero, one, or two
       <i>addresses</i> followed by a single-character <i>command</i>, possibly followed
       by parameters to that command. These addresses specify one or more
       lines in the buffer. Every command that requires addresses has
       default addresses, so that the addresses very often can be omitted.
       If the <b>−p </b>option is specified, the prompt string shall be written to
       standard output before each command is read.

       In general, only one command can appear on a line. Certain commands
       allow text to be input. This text is placed in the appropriate place
       in the buffer. While <i>ed</i> is accepting text, it is said to be in <i>input</i>
       <i>mode</i>. In this mode, no commands shall be recognized; all input is
       merely collected. Input mode is terminated by entering a line
       consisting of two characters: a &lt;period&gt; (<b>'.'</b>)  followed by a
       &lt;newline&gt;.  This line is not considered part of the input text.

   <b>Regular Expressions in ed</b>
       The <i>ed</i> utility shall support basic regular expressions, as described
       in the Base Definitions volume of POSIX.1‐2008, <i>Section 9.3</i>, <i>Basic</i>
       <i>Regular Expressions</i>.  Since regular expressions in <i>ed</i> are always
       matched against single lines (excluding the terminating &lt;newline&gt;
       characters), never against any larger section of text, there is no
       way for a regular expression to match a &lt;newline&gt;.

       A null RE shall be equivalent to the last RE encountered.

       Regular expressions are used in addresses to specify lines, and in
       some commands (for example, the <b>s </b>substitute command) to specify
       portions of a line to be substituted.

   <b>Addresses in ed</b>
       Addressing in <i>ed</i> relates to the current line. Generally, the current
       line is the last line affected by a command. The current line number
       is the address of the current line. If the edit buffer is not empty,
       the initial value for the current line shall be the last line in the
       edit buffer; otherwise, zero.

       Addresses shall be constructed as follows:

        1. The &lt;period&gt; character (<b>'.'</b>)  shall address the current line.

        2. The &lt;dollar-sign&gt; character (<b>'$'</b>) shall address the last line of
           the edit buffer.

        3. The positive decimal number <i>n</i> shall address the <i>n</i>th line of the
           edit buffer.

        4. The &lt;apostrophe&gt;-x character pair (<b>"'x"</b>) shall address the line
           marked with the mark name character <i>x</i>, which shall be a lowercase
           letter from the portable character set. It shall be an error if
           the character has not been set to mark a line or if the line that
           was marked is not currently present in the edit buffer.

        5. A BRE enclosed by &lt;slash&gt; characters (<b>'/'</b>) shall address the
           first line found by searching forwards from the line following
           the current line toward the end of the edit buffer and stopping
           at the first line for which the line excluding the terminating
           &lt;newline&gt; matches the BRE. The BRE consisting of a null BRE
           delimited by a pair of &lt;slash&gt; characters shall address the next
           line for which the line excluding the terminating &lt;newline&gt;
           matches the last BRE encountered. In addition, the second &lt;slash&gt;
           can be omitted at the end of a command line. Within the BRE, a
           &lt;backslash&gt;-&lt;slash&gt; pair (<b>"\/"</b>) shall represent a literal &lt;slash&gt;
           instead of the BRE delimiter. If necessary, the search shall wrap
           around to the beginning of the buffer and continue up to and
           including the current line, so that the entire buffer is
           searched.

        6. A BRE enclosed by &lt;question-mark&gt; characters (<b>'?'</b>)  shall address
           the first line found by searching backwards from the line
           preceding the current line toward the beginning of the edit
           buffer and stopping at the first line for which the line
           excluding the terminating &lt;newline&gt; matches the BRE. The BRE
           consisting of a null BRE delimited by a pair of &lt;question-mark&gt;
           characters (<b>"??"</b>) shall address the previous line for which the
           line excluding the terminating &lt;newline&gt; matches the last BRE
           encountered. In addition, the second &lt;question-mark&gt; can be
           omitted at the end of a command line. Within the BRE, a
           &lt;backslash&gt;-&lt;question-mark&gt; pair (<b>"\?"</b>) shall represent a literal
           &lt;question-mark&gt; instead of the BRE delimiter. If necessary, the
           search shall wrap around to the end of the buffer and continue up
           to and including the current line, so that the entire buffer is
           searched.

        7. A &lt;plus-sign&gt; (<b>'+'</b>) or &lt;hyphen&gt; character (<b>'−'</b>) followed by a
           decimal number shall address the current line plus or minus the
           number. A &lt;plus-sign&gt; or &lt;hyphen&gt; character not followed by a
           decimal number shall address the current line plus or minus 1.

       Addresses can be followed by zero or more address offsets, optionally
       &lt;blank&gt;-separated.  Address offsets are constructed as follows:

        *  A &lt;plus-sign&gt; or &lt;hyphen&gt; character followed by a decimal number
           shall add or subtract, respectively, the indicated number of
           lines to or from the address. A &lt;plus-sign&gt; or &lt;hyphen&gt; character
           not followed by a decimal number shall add or subtract 1 to or
           from the address.

        *  A decimal number shall add the indicated number of lines to the
           address.

       It shall not be an error for an intermediate address value to be less
       than zero or greater than the last line in the edit buffer. It shall
       be an error for the final address value to be less than zero or
       greater than the last line in the edit buffer. It shall be an error
       if a search for a BRE fails to find a matching line.

       Commands accept zero, one, or two addresses. If more than the
       required number of addresses are provided to a command that requires
       zero addresses, it shall be an error. Otherwise, if more than the
       required number of addresses are provided to a command, the addresses
       specified first shall be evaluated and then discarded until the
       maximum number of valid addresses remain, for the specified command.

       Addresses shall be separated from each other by a &lt;comma&gt; (<b>','</b>) or
       &lt;semicolon&gt; character (<b>';'</b>).  In the case of a &lt;semicolon&gt; separator,
       the current line (<b>'.'</b>)  shall be set to the first address, and only
       then will the second address be calculated. This feature can be used
       to determine the starting line for forwards and backwards searches;
       see rules 5. and 6.

       Addresses can be omitted on either side of the &lt;comma&gt; or &lt;semicolon&gt;
       separator, in which case the resulting address pairs shall be as
       follows:

                             ┌──────────┬─────────────┐
                             │<b>Specified </b>│  <b>Resulting  </b>│
                             ├──────────┼─────────────┤
                             │,         │ 1 , $       │
                             │, addr    │ 1 , addr    │
                             │addr ,    │ addr , addr │
                             │;         │ . ; $       │
                             │; addr    │ . ; addr    │
                             │addr ;    │ addr ; addr │
                             └──────────┴─────────────┘
       Any &lt;blank&gt; characters included between addresses, address
       separators, or address offsets shall be ignored.

   <b>Commands in ed</b>
       In the following list of <i>ed</i> commands, the default addresses are shown
       in parentheses. The number of addresses shown in the default shall be
       the number expected by the command. The parentheses are not part of
       the address; they show that the given addresses are the default.

       It is generally invalid for more than one command to appear on a
       line.  However, any command (except <b>e</b>, <b>E</b>, <b>f</b>, <b>q</b>, <b>Q</b>, <b>r</b>, <b>w</b>, and <b>!</b>)  can
       be suffixed by the letter <b>l</b>, <b>n</b>, or <b>p</b>; in which case, except for the
       <b>l</b>, <b>n</b>, and <b>p </b>commands, the command shall be executed and then the new
       current line shall be written as described below under the <b>l</b>, <b>n</b>, and
       <b>p </b>commands. When an <b>l</b>, <b>n</b>, or <b>p </b>suffix is used with an <b>l</b>, <b>n</b>, or <b>p</b>
       command, the command shall write to standard output as described
       below, but it is unspecified whether the suffix writes the current
       line again in the requested format or whether the suffix has no
       effect. For example, the <b>pl </b>command (base <b>p </b>command with an <b>l </b>suffix)
       shall either write just the current line or write it twice—once as
       specified for <b>p </b>and once as specified for <b>l</b>.  Also, the <b>g</b>, <b>G</b>, <b>v</b>, and
       <b>V </b>commands shall take a command as a parameter.

       Each address component can be preceded by zero or more &lt;blank&gt;
       characters. The command letter can be preceded by zero or more
       &lt;blank&gt; characters. If a suffix letter (<b>l</b>, <b>n</b>, or <b>p</b>) is given, the
       application shall ensure that it immediately follows the command.

       The <b>e</b>, <b>E</b>, <b>f</b>, <b>r</b>, and <b>w </b>commands shall take an optional <i>file</i> parameter,
       separated from the command letter by one or more &lt;blank&gt; characters.

       If changes have been made in the buffer since the last <b>w </b>command that
       wrote the entire buffer, <i>ed</i> shall warn the user if an attempt is made
       to destroy the editor buffer via the <b>e </b>or <b>q </b>commands. The <i>ed</i> utility
       shall write the string:

           <b>"?\n"</b>

       (followed by an explanatory message if <i>help mode</i> has been enabled via
       the <b>H </b>command) to standard output and shall continue in command mode
       with the current line number unchanged. If the <b>e </b>or <b>q </b>command is
       repeated with no intervening command, it shall take effect.

       If a terminal disconnect (see the Base Definitions volume of
       POSIX.1‐2008, <i>Chapter 11</i>, <i>General Terminal Interface</i>, Modem
       Disconnect and Closing a Device Terminal), is detected:

        *  If accompanied by a SIGHUP signal, the <i>ed</i> utility shall operate
           as described in the ASYNCHRONOUS EVENTS section for a SIGHUP
           signal.

        *  If not accompanied by a SIGHUP signal, the <i>ed</i> utility shall act
           as if an end-of-file had been detected on standard input.

       If an end-of-file is detected on standard input:

        *  If the <i>ed</i> utility is in input mode, <i>ed</i> shall terminate input mode
           and return to command mode. It is unspecified if any partially
           entered lines (that is, input text without a terminating
           &lt;newline&gt;) are discarded from the input text.

        *  If the <i>ed</i> utility is in command mode, it shall act as if a <b>q</b>
           command had been entered.

       If the closing delimiter of an RE or of a replacement string (for
       example, <b>'/'</b>) in a <b>g</b>, <b>G</b>, <b>s</b>, <b>v</b>, or <b>V </b>command would be the last
       character before a &lt;newline&gt;, that delimiter can be omitted, in which
       case the addressed line shall be written. For example, the following
       pairs of commands are equivalent:

           <b>s/s1/s2   s/s1/s2/p</b>
           <b>g/s1      g/s1/p</b>
           <b>?s1       ?s1?</b>

       If an invalid command is entered, <i>ed</i> shall write the string:

           <b>"?\n"</b>

       (followed by an explanatory message if <i>help mode</i> has been enabled via
       the <b>H </b>command) to standard output and shall continue in command mode
       with the current line number unchanged.

   <b>Append Command</b>
       <i>Synopsis</i>:
                     <b>(.)a</b>
                     <b>&lt;</b><i>text</i>&gt;
                     .

       The <b>a </b>command shall read the given text and append it after the
       addressed line; the current line number shall become the address of
       the last inserted line or, if there were none, the addressed line.
       Address 0 shall be valid for this command; it shall cause the
       appended text to be placed at the beginning of the buffer.

   <b>Change Command</b>
       <i>Synopsis</i>:
                     <b>(.,.)c</b>
                     <b>&lt;</b><i>text</i>&gt;
                     .

       The <b>c </b>command shall delete the addressed lines, then accept input
       text that replaces these lines; the current line shall be set to the
       address of the last line input; or, if there were none, at the line
       after the last line deleted; if the lines deleted were originally at
       the end of the buffer, the current line number shall be set to the
       address of the new last line; if no lines remain in the buffer, the
       current line number shall be set to zero. Address 0 shall be valid
       for this command; it shall be interpreted as if address 1 were
       specified.

   <b>Delete Command</b>
       <i>Synopsis</i>:
                     <b>(.,.)d</b>

       The <b>d </b>command shall delete the addressed lines from the buffer. The
       address of the line after the last line deleted shall become the
       current line number; if the lines deleted were originally at the end
       of the buffer, the current line number shall be set to the address of
       the new last line; if no lines remain in the buffer, the current line
       number shall be set to zero.

   <b>Edit Command</b>
       <i>Synopsis</i>:
                     <b>e [</b><i>file</i><b>]</b>

       The <b>e </b>command shall delete the entire contents of the buffer and then
       read in the file named by the pathname <i>file</i>.  The current line number
       shall be set to the address of the last line of the buffer. If no
       pathname is given, the currently remembered pathname, if any, shall
       be used (see the <b>f </b>command). The number of bytes read shall be
       written to standard output, unless the <b>−s </b>option was specified, in
       the following format:

           <b>"%d\n", &lt;</b><i>number of bytes read</i>&gt;

       The name <i>file</i> shall be remembered for possible use as a default
       pathname in subsequent <b>e</b>, <b>E</b>, <b>r</b>, and <b>w </b>commands. If <i>file</i> is replaced
       by <b>'!'</b>, the rest of the line shall be taken to be a shell command
       line whose output is to be read. Such a shell command line shall not
       be remembered as the current <i>file</i>.  All marks shall be discarded upon
       the completion of a successful <b>e </b>command. If the buffer has changed
       since the last time the entire buffer was written, the user shall be
       warned, as described previously.

   <b>Edit Without Checking Command</b>
       <i>Synopsis</i>:
                     <b>E [</b><i>file</i><b>]</b>

       The <b>E </b>command shall possess all properties and restrictions of the <b>e</b>
       command except that the editor shall not check to see whether any
       changes have been made to the buffer since the last <b>w </b>command.

   <b>Filename Command</b>
       <i>Synopsis</i>:
                     <b>f [</b><i>file</i><b>]</b>

       If <i>file</i> is given, the <b>f </b>command shall change the currently remembered
       pathname to <i>file</i>; whether the name is changed or not, it shall then
       write the (possibly new) currently remembered pathname to the
       standard output in the following format:

           <b>"%s\n", &lt;</b><i>pathname</i>&gt;

       The current line number shall be unchanged.

   <b>Global Command</b>
       <i>Synopsis</i>:
                     <b>(1,$)g/</b><i>RE</i>/<i>command list</i>

       In the <b>g </b>command, the first step shall be to mark every line for
       which the line excluding the terminating &lt;newline&gt; matches the given
       RE. Then, going sequentially from the beginning of the file to the
       end of the file, the given <i>command list</i> shall be executed for each
       marked line, with the current line number set to the address of that
       line. Any line modified by the <i>command list</i> shall be unmarked. When
       the <b>g </b>command completes, the current line number shall have the value
       assigned by the last command in the <i>command list</i>.  If there were no
       matching lines, the current line number shall not be changed. A
       single command or the first of a list of commands shall appear on the
       same line as the global command. All lines of a multi-line list
       except the last line shall be ended with a &lt;backslash&gt; preceding the
       terminating &lt;newline&gt;; the <b>a</b>, <b>i</b>, and <b>c </b>commands and associated input
       are permitted. The <b>'.'  </b>terminating input mode can be omitted if it
       would be the last line of the <i>command list</i>. An empty <i>command list</i>
       shall be equivalent to the <b>p </b>command. The use of the <b>g</b>, <b>G</b>, <b>v</b>, <b>V</b>, and
       <b>!  </b>commands in the <i>command list</i> produces undefined results. Any
       character other than &lt;space&gt; or &lt;newline&gt; can be used instead of a
       &lt;slash&gt; to delimit the RE. Within the RE, the RE delimiter itself can
       be used as a literal character if it is preceded by a &lt;backslash&gt;.

   <b>Interactive Global Command</b>
       <i>Synopsis</i>:
                     <b>(1,$)G/</b><i>RE</i>/

       In the <b>G </b>command, the first step shall be to mark every line for
       which the line excluding the terminating &lt;newline&gt; matches the given
       RE. Then, for every such line, that line shall be written, the
       current line number shall be set to the address of that line, and any
       one command (other than one of the <b>a</b>, <b>c</b>, <b>i</b>, <b>g</b>, <b>G</b>, <b>v</b>, and <b>V </b>commands)
       shall be read and executed. A &lt;newline&gt; shall act as a null command
       (causing no action to be taken on the current line); an <b>'&amp;' </b>shall
       cause the re-execution of the most recent non-null command executed
       within the current invocation of <b>G</b>.  Note that the commands input as
       part of the execution of the <b>G </b>command can address and affect any
       lines in the buffer. Any line modified by the command shall be
       unmarked. The final value of the current line number shall be the
       value set by the last command successfully executed. (Note that the
       last command successfully executed shall be the <b>G </b>command itself if a
       command fails or the null command is specified.) If there were no
       matching lines, the current line number shall not be changed. The <b>G</b>
       command can be terminated by a SIGINT signal. Any character other
       than &lt;space&gt; or &lt;newline&gt; can be used instead of a &lt;slash&gt; to delimit
       the RE and the replacement. Within the RE, the RE delimiter itself
       can be used as a literal character if it is preceded by a
       &lt;backslash&gt;.

   <b>Help Command</b>
       <i>Synopsis</i>:
                     <b>h</b>

       The <b>h </b>command shall write a short message to standard output that
       explains the reason for the most recent <b>'?'  </b>notification. The
       current line number shall be unchanged.

   <b>Help-Mode Command</b>
       <i>Synopsis</i>:
                     <b>H</b>

       The <b>H </b>command shall cause <i>ed</i> to enter a mode in which help messages
       (see the <b>h </b>command) shall be written to standard output for all
       subsequent <b>'?'  </b>notifications. The <b>H </b>command alternately shall turn
       this mode on and off; it is initially off. If the help-mode is being
       turned on, the <b>H </b>command also explains the previous <b>'?'</b>
       notification, if there was one. The current line number shall be
       unchanged.

   <b>Insert Command</b>
       <i>Synopsis</i>:
                     <b>(.)i</b>
                     <b>&lt;</b><i>text</i>&gt;
                     .

       The <b>i </b>command shall insert the given text before the addressed line;
       the current line is set to the last inserted line or, if there was
       none, to the addressed line. This command differs from the <b>a </b>command
       only in the placement of the input text. Address 0 shall be valid for
       this command; it shall be interpreted as if address 1 were specified.

   <b>Join Command</b>
       <i>Synopsis</i>:
                     <b>(.,.+1)j</b>

       The <b>j </b>command shall join contiguous lines by removing the appropriate
       &lt;newline&gt; characters. If exactly one address is given, this command
       shall do nothing. If lines are joined, the current line number shall
       be set to the address of the joined line; otherwise, the current line
       number shall be unchanged.

   <b>Mark Command</b>
       <i>Synopsis</i>:
                     <b>(.)k</b><i>x</i>

       The <b>k </b>command shall mark the addressed line with name <i>x</i>, which the
       application shall ensure is a lowercase letter from the portable
       character set. The address <b>"'x" </b>shall then refer to this line; the
       current line number shall be unchanged.

   <b>List Command</b>
       <i>Synopsis</i>:
                     <b>(.,.)l</b>

       The <b>l </b>command shall write to standard output the addressed lines in a
       visually unambiguous form. The characters listed in the Base
       Definitions volume of POSIX.1‐2008, <i>Table 5-1</i>, <i>Escape Sequences and</i>
       <i>Associated Actions</i> (<b>'\\'</b>, <b>'\a'</b>, <b>'\b'</b>, <b>'\f'</b>, <b>'\r'</b>, <b>'\t'</b>, <b>'\v'</b>) shall
       be written as the corresponding escape sequence; the <b>'\n' </b>in that
       table is not applicable. Non-printable characters not in the table
       shall be written as one three-digit octal number (with a preceding
       &lt;backslash&gt; character) for each byte in the character (most
       significant byte first).

       Long lines shall be folded, with the point of folding indicated by
       &lt;newline&gt; preceded by a &lt;backslash&gt;; the length at which folding
       occurs is unspecified, but should be appropriate for the output
       device. The end of each line shall be marked with a <b>'$'</b>, and <b>'$'</b>
       characters within the text shall be written with a preceding
       &lt;backslash&gt;.  An <b>l </b>command can be appended to any other command other
       than <b>e</b>, <b>E</b>, <b>f</b>, <b>q</b>, <b>Q</b>, <b>r</b>, <b>w</b>, or <b>!</b>.  The current line number shall be set
       to the address of the last line written.

   <b>Move Command</b>
       <i>Synopsis</i>:
                     <b>(.,.)m</b><i>address</i>

       The <b>m </b>command shall reposition the addressed lines after the line
       addressed by <i>address</i>.  Address 0 shall be valid for <i>address</i> and cause
       the addressed lines to be moved to the beginning of the buffer. It
       shall be an error if address <i>address</i> falls within the range of moved
       lines. The current line number shall be set to the address of the
       last line moved.

   <b>Number Command</b>
       <i>Synopsis</i>:
                     <b>(.,.)n</b>

       The <b>n </b>command shall write to standard output the addressed lines,
       preceding each line by its line number and a &lt;tab&gt;; the current line
       number shall be set to the address of the last line written. The <b>n</b>
       command can be appended to any command other than <b>e</b>, <b>E</b>, <b>f</b>, <b>q</b>, <b>Q</b>, <b>r</b>,
       <b>w</b>, or <b>!</b>.

   <b>Print Command</b>
       <i>Synopsis</i>:
                     <b>(.,.)p</b>

       The <b>p </b>command shall write to standard output the addressed lines; the
       current line number shall be set to the address of the last line
       written. The <b>p </b>command can be appended to any command other than <b>e</b>,
       <b>E</b>, <b>f</b>, <b>q</b>, <b>Q</b>, <b>r</b>, <b>w</b>, or <b>!</b>.

   <b>Prompt Command</b>
       <i>Synopsis</i>:
                     <b>P</b>

       The <b>P </b>command shall cause <i>ed</i> to prompt with an &lt;asterisk&gt; (<b>'*'</b>) (or
       <i>string</i>, if <b>−p </b>is specified) for all subsequent commands. The <b>P</b>
       command alternatively shall turn this mode on and off; it shall be
       initially on if the <b>−p </b>option is specified; otherwise, off. The
       current line number shall be unchanged.

   <b>Quit Command</b>
       <i>Synopsis</i>:
                     <b>q</b>

       The <b>q </b>command shall cause <i>ed</i> to exit. If the buffer has changed since
       the last time the entire buffer was written, the user shall be
       warned, as described previously.

   <b>Quit Without Checking Command</b>
       <i>Synopsis</i>:
                     <b>Q</b>

       The <b>Q </b>command shall cause <i>ed</i> to exit without checking whether changes
       have been made in the buffer since the last <b>w </b>command.

   <b>Read Command</b>
       <i>Synopsis</i>:
                     <b>($)r [</b><i>file</i><b>]</b>

       The <b>r </b>command shall read in the file named by the pathname <i>file</i> and
       append it after the addressed line. If no <i>file</i> argument is given, the
       currently remembered pathname, if any, shall be used (see the <b>e </b>and <b>f</b>
       commands). The currently remembered pathname shall not be changed
       unless there is no remembered pathname. Address 0 shall be valid for
       <b>r </b>and shall cause the file to be read at the beginning of the buffer.
       If the read is successful, and <b>−s </b>was not specified, the number of
       bytes read shall be written to standard output in the following
       format:

           <b>"%d\n", &lt;</b><i>number of bytes read</i>&gt;

       The current line number shall be set to the address of the last line
       read in. If <i>file</i> is replaced by <b>'!'</b>, the rest of the line shall be
       taken to be a shell command line whose output is to be read. Such a
       shell command line shall not be remembered as the current pathname.

   <b>Substitute Command</b>
       <i>Synopsis</i>:
                     <b>(.,.)s/</b><i>RE</i>/<i>replacement</i>/<i>flags</i>

       The <b>s </b>command shall search each addressed line for an occurrence of
       the specified RE and replace either the first or all (non-overlapped)
       matched strings with the <i>replacement</i>; see the following description
       of the <b>g </b>suffix. It is an error if the substitution fails on every
       addressed line. Any character other than &lt;space&gt; or &lt;newline&gt; can be
       used instead of a &lt;slash&gt; to delimit the RE and the replacement.
       Within the RE, the RE delimiter itself can be used as a literal
       character if it is preceded by a &lt;backslash&gt;.  The current line shall
       be set to the address of the last line on which a substitution
       occurred.

       An &lt;ampersand&gt; (<b>'&amp;'</b>) appearing in the <i>replacement</i> shall be replaced
       by the string matching the RE on the current line.  The special
       meaning of <b>'&amp;' </b>in this context can be suppressed by preceding it by
       &lt;backslash&gt;.  As a more general feature, the characters <b>'\n'</b>, where <i>n</i>
       is a digit, shall be replaced by the text matched by the
       corresponding back-reference expression. If the corresponding back-
       reference expression does not match, then the characters <b>'\n' </b>shall
       be replaced by the empty string. When the character <b>'%' </b>is the only
       character in the <i>replacement</i>, the <i>replacement</i> used in the most recent
       substitute command shall be used as the <i>replacement</i> in the current
       substitute command; if there was no previous substitute command, the
       use of <b>'%' </b>in this manner shall be an error. The <b>'%' </b>shall lose its
       special meaning when it is in a replacement string of more than one
       character or is preceded by a &lt;backslash&gt;.  For each &lt;backslash&gt;
       encountered in scanning <i>replacement</i> from beginning to end, the
       following character shall lose its special meaning (if any). It is
       unspecified what special meaning is given to any character other than
       &lt;backslash&gt;, <b>'&amp;'</b>, <b>'%'</b>, or digits.

       A line can be split by substituting a &lt;newline&gt; into it. The
       application shall ensure it escapes the &lt;newline&gt; in the <i>replacement</i>
       by preceding it by &lt;backslash&gt;.  Such substitution cannot be done as
       part of a <b>g </b>or <b>v </b><i>command list</i>.  The current line number shall be set
       to the address of the last line on which a substitution is performed.
       If no substitution is performed, the current line number shall be
       unchanged. If a line is split, a substitution shall be considered to
       have been performed on each of the new lines for the purpose of
       determining the new current line number. A substitution shall be
       considered to have been performed even if the replacement string is
       identical to the string that it replaces.

       The application shall ensure that the value of <i>flags</i> is zero or more
       of:

       <i>count</i>   Substitute for the <i>count</i>th occurrence only of the RE found on
               each addressed line.

       <b>g       </b>Globally substitute for all non-overlapping instances of the
               RE rather than just the first one. If both <b>g </b>and <i>count</i> are
               specified, the results are unspecified.

       <b>l       </b>Write to standard output the final line in which a
               substitution was made. The line shall be written in the
               format specified for the <b>l </b>command.

       <b>n       </b>Write to standard output the final line in which a
               substitution was made. The line shall be written in the
               format specified for the <b>n </b>command.

       <b>p       </b>Write to standard output the final line in which a
               substitution was made. The line shall be written in the
               format specified for the <b>p </b>command.

   <b>Copy Command</b>
       <i>Synopsis</i>:
                     <b>(.,.)t</b><i>address</i>

       The <b>t </b>command shall be equivalent to the <b>m </b>command, except that a
       copy of the addressed lines shall be placed after address <i>address</i>
       (which can be 0); the current line number shall be set to the address
       of the last line added.

   <b>Undo Command</b>
       <i>Synopsis</i>:
                     <b>u</b>

       The <b>u </b>command shall nullify the effect of the most recent command
       that modified anything in the buffer, namely the most recent <b>a</b>, <b>c</b>, <b>d</b>,
       <b>g</b>, <b>i</b>, <b>j</b>, <b>m</b>, <b>r</b>, <b>s</b>, <b>t</b>, <b>u</b>, <b>v</b>, <b>G</b>, or <b>V </b>command. All changes made to the
       buffer by a <b>g</b>, <b>G</b>, <b>v</b>, or <b>V </b>global command shall be undone as a single
       change; if no changes were made by the global command (such as with
       <b>g</b>/RE/<b>p</b>), the <b>u </b>command shall have no effect. The current line number
       shall be set to the value it had immediately before the command being
       undone started.

   <b>Global Non-Matched Command</b>
       <i>Synopsis</i>:
                     <b>(1,$)v</b>/<i>RE</i>/<i>command list</i>

       This command shall be equivalent to the global command <b>g </b>except that
       the lines that are marked during the first step shall be those for
       which the line excluding the terminating &lt;newline&gt; does not match the
       RE.

   <b>Interactive Global Not-Matched Command</b>
       <i>Synopsis</i>:
                     <b>(1,$)V</b>/<i>RE</i>/

       This command shall be equivalent to the interactive global command <b>G</b>
       except that the lines that are marked during the first step shall be
       those for which the line excluding the terminating &lt;newline&gt; does not
       match the RE.

   <b>Write Command</b>
       <i>Synopsis</i>:
                     <b>(1,$)w [</b><i>file</i><b>]</b>

       The <b>w </b>command shall write the addressed lines into the file named by
       the pathname <i>file</i>.  The command shall create the file, if it does not
       exist, or shall replace the contents of the existing file. The
       currently remembered pathname shall not be changed unless there is no
       remembered pathname.  If no pathname is given, the currently
       remembered pathname, if any, shall be used (see the <b>e </b>and <b>f</b>
       commands); the current line number shall be unchanged. If the command
       is successful, the number of bytes written shall be written to
       standard output, unless the <b>−s </b>option was specified, in the following
       format:

           <b>"%d\n", &lt;</b><i>number of bytes written</i>&gt;

       If <i>file</i> begins with <b>'!'</b>, the rest of the line shall be taken to be a
       shell command line whose standard input shall be the addressed lines.
       Such a shell command line shall not be remembered as the current
       pathname. This usage of the write command with <b>'!'  </b>shall not be
       considered as a ``last <b>w </b>command that wrote the entire buffer'', as
       described previously; thus, this alone shall not prevent the warning
       to the user if an attempt is made to destroy the editor buffer via
       the <b>e </b>or <b>q </b>commands.

   <b>Line Number Command</b>
       <i>Synopsis</i>:
                     <b>($)=</b>

       The line number of the addressed line shall be written to standard
       output in the following format:

           <b>"%d\n", &lt;</b><i>line number</i>&gt;

       The current line number shall be unchanged by this command.

   <b>Shell Escape Command</b>
       <i>Synopsis</i>:
                     <b>!</b><i>command</i>

       The remainder of the line after the <b>'!'  </b>shall be sent to the command
       interpreter to be interpreted as a shell command line. Within the
       text of that shell command line, the unescaped character <b>'%' </b>shall be
       replaced with the remembered pathname; if a <b>'!'  </b>appears as the first
       character of the command, it shall be replaced with the text of the
       previous shell command executed via <b>'!'</b>.  Thus, <b>"!!" </b>shall repeat the
       previous !<i>command</i>. If any replacements of <b>'%' </b>or <b>'!'  </b>are performed,
       the modified line shall be written to the standard output before
       <i>command</i> is executed. The <b>!  </b>command shall write:

           <b>"!\n"</b>

       to standard output upon completion, unless the <b>−s </b>option is
       specified. The current line number shall be unchanged.

   <b>Null Command</b>
       <i>Synopsis</i>:
                     <b>(.+1)</b>

       An address alone on a line shall cause the addressed line to be
       written. A &lt;newline&gt; alone shall be equivalent to <b>"+1p"</b>.  The current
       line number shall be set to the address of the written line.
</pre>
<h2><a id="EXIT_STATUS" href="#EXIT_STATUS"></a>EXIT STATUS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The following exit values shall be returned:

        0    Successful completion without any file or command errors.

       &gt;0    An error occurred.
</pre>
<h2><a id="CONSEQUENCES_OF_ERRORS" href="#CONSEQUENCES_OF_ERRORS"></a>CONSEQUENCES OF ERRORS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       When an error in the input script is encountered, or when an error is
       detected that is a consequence of the data (not) present in the file
       or due to an external condition such as a read or write error:

        *  If the standard input is a terminal device file, all input shall
           be flushed, and a new command read.

        *  If the standard input is a regular file, <i>ed</i> shall terminate with
           a non-zero exit status.

       <i>The following sections are informative.</i>
</pre>
<h2><a id="APPLICATION_USAGE" href="#APPLICATION_USAGE"></a>APPLICATION USAGE  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       Because of the extremely terse nature of the default error messages,
       the prudent script writer begins the <i>ed</i> input commands with an <b>H</b>
       command, so that if any errors do occur at least some clue as to the
       cause is made available.

       In earlier versions of this standard, an obsolescent <b>− </b>option was
       described. This is no longer specified. Applications should use the
       <b>−s </b>option. Using <b>− </b>as a <i>file</i> operand now produces unspecified
       results. This allows implementations to continue to support the
       former required behavior.
</pre>
<h2><a id="EXAMPLES" href="#EXAMPLES"></a>EXAMPLES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       None.
</pre>
<h2><a id="RATIONALE" href="#RATIONALE"></a>RATIONALE  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The initial description of this utility was adapted from the SVID. It
       contains some features not found in Version 7 or BSD-derived systems.
       Some of the differences between the POSIX and BSD <i>ed</i> utilities
       include, but need not be limited to:

        *  The BSD <b>− </b>option does not suppress the <b>'!'  </b>prompt after a <b>!</b>
           command.

        *  BSD does not support the special meanings of the <b>'%' </b>and <b>'!'</b>
           characters within a <b>!  </b>command.

        *  BSD does not support the <i>addresses</i> <b>';' </b>and <b>','</b>.

        *  BSD allows the command/suffix pairs <b>pp</b>, <b>ll</b>, and so on, which are
           unspecified in this volume of POSIX.1‐2008.

        *  BSD does not support the <b>'!'  </b>character part of the <b>e</b>, <b>r</b>, or <b>w</b>
           commands.

        *  A failed <b>g </b>command in BSD sets the line number to the last line
           searched if there are no matches.

        *  BSD does not default the <i>command list</i> to the <b>p </b>command.

        *  BSD does not support the <b>G</b>, <b>h</b>, <b>H</b>, <b>n</b>, or <b>V </b>commands.

        *  On BSD, if there is no inserted text, the insert command changes
           the current line to the referenced line −1; that is, the line
           before the specified line.

        *  On BSD, the <i>join</i> command with only a single address changes the
           current line to that address.

        *  BSD does not support the <b>P </b>command; moreover, in BSD it is
           synonymous with the <b>p </b>command.

        *  BSD does not support the <i>undo</i> of the commands <b>j</b>, <b>m</b>, <b>r</b>, <b>s</b>, or <b>t</b>.

        *  The Version 7 <i>ed</i> command <b>W</b>, and the BSD <i>ed</i> commands <b>W</b>, <b>wq</b>, and <b>z</b>
           are not present in this volume of POSIX.1‐2008.

       The <b>−s </b>option was added to allow the functionality of the removed <b>−</b>
       option in a manner compatible with the Utility Syntax Guidelines.

       In early proposals there was a limit, {ED_FILE_MAX}, that described
       the historical limitations of some <i>ed</i> utilities in their handling of
       large files; some of these have had problems with files larger than
       100000 bytes. It was this limitation that prompted much of the desire
       to include a <i>split</i> command in this volume of POSIX.1‐2008. Since this
       limit was removed, this volume of POSIX.1‐2008 requires that
       implementations document the file size limits imposed by <i>ed</i> in the
       conformance document. The limit {ED_LINE_MAX} was also removed;
       therefore, the global limit {LINE_MAX} is used for input and output
       lines.

       The manner in which the <b>l </b>command writes non-printable characters was
       changed to avoid the historical backspace-overstrike method. On video
       display terminals, the overstrike is ambiguous because most terminals
       simply replace overstruck characters, making the <b>l </b>format not useful
       for its intended purpose of unambiguously understanding the content
       of the line. The historical &lt;backslash&gt;-escapes were also ambiguous.
       (The string <b>"a\0011" </b>could represent a line containing those six
       characters or a line containing the three characters <b>'a'</b>, a byte with
       a binary value of 1, and a 1.) In the format required here, a
       &lt;backslash&gt; appearing in the line is written as <b>"\\" </b>so that the
       output is truly unambiguous. The method of marking the ends of lines
       was adopted from the <i>ex</i> editor and is required for any line ending in
       &lt;space&gt; characters; the <b>'$' </b>is placed on all lines so that a real <b>'$'</b>
       at the end of a line cannot be misinterpreted.

       Earlier versions of this standard allowed for implementations with
       bytes other than eight bits, but this has been modified in this
       version.

       The description of how a NUL is written was removed. The NUL
       character cannot be in text files, and this volume of POSIX.1‐2008
       should not dictate behavior in the case of undefined, erroneous
       input.

       Unlike some of the other editing utilities, the filenames accepted by
       the <b>E</b>, <b>e</b>, <b>R</b>, and <b>r </b>commands are not patterns.

       Early proposals stated that the <b>−p </b>option worked only when standard
       input was associated with a terminal device. This has been changed to
       conform to historical implementations, thereby allowing applications
       to interpose themselves between a user and the <i>ed</i> utility.

       The form of the substitute command that uses the <b>n </b>suffix was limited
       in some historical documentation (where this was described
       incorrectly as ``backreferencing''). This limit has been omitted
       because there is no reason why an editor processing lines of
       {LINE_MAX} length should have this restriction. The command
       <b>s/x/X/2047 </b>should be able to substitute the 2047th occurrence of <b>'x'</b>
       on a line.

       The use of printing commands with printing suffixes (such as <b>pn</b>, <b>lp</b>,
       and so on) was made unspecified because BSD-based systems allow this,
       whereas System V does not.

       Some BSD-based systems exit immediately upon receipt of end-of-file
       if all of the lines in the file have been deleted. Since this volume
       of POSIX.1‐2008 refers to the <b>q </b>command in this instance, such
       behavior is not allowed.

       Some historical implementations returned exit status zero even if
       command errors had occurred; this is not allowed by this volume of
       POSIX.1‐2008.

       Some historical implementations contained a bug that allowed a single
       &lt;period&gt; to be entered in input mode as &lt;backslash&gt; &lt;period&gt;
       &lt;newline&gt;.  This is not allowed by <i>ed</i> because there is no description
       of escaping any of the characters in input mode; &lt;backslash&gt;
       characters are entered into the buffer exactly as typed. The typical
       method of entering a single &lt;period&gt; has been to precede it with
       another character and then use the substitute command to delete that
       character.

       It is difficult under some modes of some versions of historical
       operating system terminal drivers to distinguish between an end-of-
       file condition and terminal disconnect. POSIX.1‐2008 does not require
       implementations to distinguish between the two situations, which
       permits historical implementations of the <i>ed</i> utility on historical
       platforms to conform. Implementations are encouraged to distinguish
       between the two, if possible, and take appropriate action on terminal
       disconnect.

       Historically, <i>ed</i> accepted a zero address for the <b>a </b>and <b>r </b>commands in
       order to insert text at the start of the edit buffer. When the buffer
       was empty the command <b>.= </b>returned zero. POSIX.1‐2008 requires
       conformance to historical practice.

       For consistency with the <b>a </b>and <b>r </b>commands and better user
       functionality, the <b>i </b>and <b>c </b>commands must also accept an address of 0,
       in which case 0<i>i</i> is treated as 1<i>i</i> and likewise for the <b>c </b>command.

       All of the following are valid addresses:

       +++         Three lines after the current line.

       /<i>pattern</i>/−  One line before the next occurrence of pattern.

       −2          Two lines before the current line.

       3 −−−− 2    Line one (note the intermediate negative address).

       1 2 3       Line six.

       Any number of addresses can be provided to commands taking addresses;
       for example, <b>"1,2,3,4,5p" </b>prints lines 4 and 5, because two is the
       greatest valid number of addresses accepted by the <b>print </b>command.
       This, in combination with the &lt;semicolon&gt; delimiter, permits users to
       create commands based on ordered patterns in the file. For example,
       the command <b>"3;/foo/;+2p" </b>will display the first line after line 3
       that contains the pattern <i>foo</i>, plus the next two lines. Note that the
       address <b>"3;" </b>must still be evaluated before being discarded, because
       the search origin for the <b>"/foo/" </b>command depends on this.

       Historically, <i>ed</i> disallowed address chains, as discussed above,
       consisting solely of &lt;comma&gt; or &lt;semicolon&gt; separators; for example,
       <b>",,," </b>or <b>";;;" </b>were considered an error. For consistency of address
       specification, this restriction is removed. The following table lists
       some of the address forms now possible:

          ┌────────┬───────┬───────┬────────────┬───────────────────────┐
          │<b>Address </b>│ <b>Addr1 </b>│ <b>Addr2 </b>│   <b>Status   </b>│        <b>Comment        </b>│
          ├────────┼───────┼───────┼────────────┼───────────────────────┤
          │7,      │   7   │   7   │ Historical │                       │
          │7,5,    │   5   │   5   │ Historical │                       │
          │7,5,9   │   5   │   9   │ Historical │                       │
          │7,9     │   7   │   9   │ Historical │                       │
          │7,+     │   7   │   8   │ Historical │                       │
          │,       │   1   │   $   │ Historical │                       │
          │,7      │   1   │   7   │ Extension  │                       │
          │,,      │   $   │   $   │ Extension  │                       │
          │,;      │   $   │   $   │ Extension  │                       │
          │7;      │   7   │   7   │ Historical │                       │
          │7;5;    │   5   │   5   │ Historical │                       │
          │7;5;9   │   5   │   9   │ Historical │                       │
          │7;5,9   │   5   │   9   │ Historical │                       │
          │7;$;4   │   $   │   4   │ Historical │ Valid, but erroneous. │
          │7;9     │   7   │   9   │ Historical │                       │
          │7;+     │   7   │   8   │ Historical │                       │
          │;       │   .   │   $   │ Historical │                       │
          │;7      │   .   │   7   │ Extension  │                       │
          │;;      │   $   │   $   │ Extension  │                       │
          │;,      │   $   │   $   │ Extension  │                       │
          └────────┴───────┴───────┴────────────┴───────────────────────┘
       Historically, <i>ed</i> accepted the <b>'^' </b>character as an address, in which
       case it was identical to the &lt;hyphen&gt; character. POSIX.1‐2008 does
       not require or prohibit this behavior.
</pre>
<h2><a id="FUTURE_DIRECTIONS" href="#FUTURE_DIRECTIONS"></a>FUTURE DIRECTIONS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       None.
</pre>
<h2><a id="SEE_ALSO" href="#SEE_ALSO"></a>SEE ALSO  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <i>Section 1.4</i>, <i>Utility Description Defaults</i>, <a href="ex.1p.html">ex(1p)</a>, <a href="sed.1p.html">sed(1p)</a>, <a href="sh.1p.html">sh(1p)</a>,
       <a href="vi.1p.html">vi(1p)</a>

       The Base Definitions volume of POSIX.1‐2008, <i>Table 5-1</i>, <i>Escape</i>
       <i>Sequences and Associated Actions</i>, <i>Chapter 8</i>, <i>Environment Variables</i>,
       <i>Section 9.3</i>, <i>Basic Regular Expressions</i>, <i>Chapter 11</i>, <i>General Terminal</i>
       <i>Interface</i>, <i>Section 12.2</i>, <i>Utility Syntax Guidelines</i>
</pre>
<h2><a id="COPYRIGHT" href="#COPYRIGHT"></a>COPYRIGHT  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       Portions of this text are reprinted and reproduced in electronic form
       from IEEE Std 1003.1, 2013 Edition, Standard for Information
       Technology -- Portable Operating System Interface (POSIX), The Open
       Group Base Specifications Issue 7, Copyright (C) 2013 by the
       Institute of Electrical and Electronics Engineers, Inc and The Open
       Group.  (This is POSIX.1-2008 with the 2013 Technical Corrigendum 1
       applied.) In the event of any discrepancy between this version and
       the original IEEE and The Open Group Standard, the original IEEE and
       The Open Group Standard is the referee document. The original
       Standard can be obtained online at <a href="http://www.unix.org/online.html">http://www.unix.org/online.html</a> .

       Any typographical or formatting errors that appear in this page are
       most likely to have been introduced during the conversion of the
       source files to man page format. To report such errors, see
       <a href="https://www.kernel.org/doc/man-pages/reporting_bugs.html">https://www.kernel.org/doc/man-pages/reporting_bugs.html</a> .

<span class="footline">IEEE/The Open Group                 2013                              ED(1P)</span>
</pre>

<hr class="end-man-text" />
<p>Pages that refer to this page: 
    <a href="diff.1p.html">diff(1p)</a>,&nbsp; 
    <a href="ex.1p.html">ex(1p)</a>,&nbsp; 
    <a href="lex.1p.html">lex(1p)</a>,&nbsp; 
    <a href="mailx.1p.html">mailx(1p)</a>,&nbsp; 
    <a href="more.1p.html">more(1p)</a>,&nbsp; 
    <a href="patch.1p.html">patch(1p)</a>,&nbsp; 
    <a href="pax.1p.html">pax(1p)</a>,&nbsp; 
    <a href="sed.1p.html">sed(1p)</a>,&nbsp; 
    <a href="vi.1p.html">vi(1p)</a>
</p>
<hr/>

 
<hr class="start-footer" />

<div class="footer"> 

<table class="colophon-table">
    <tr>
    <td class="pub-info">
        <p>
            HTML rendering created 2017-07-13
            by <a href="http://man7.org/mtk/index.html">Michael Kerrisk</a>, 
            author of 
            <a href="http://man7.org/tlpi/"><em>The Linux Programming Interface</em></a>, 
            maintainer of the 
            <a href="https://www.kernel.org/doc/man-pages/">Linux <em>man-pages</em> project</a>.
        </p>
        <p>
            For details of in-depth
            <strong>Linux/UNIX system programming training courses</strong>
            that I teach, look <a href="http://man7.org/training/">here</a>.
        </p>
        <p>
            Hosting by <a href="http://www.jambit.com/index_en.html">jambit GmbH</a>.
        </p>
        <p>
            <a href="http://validator.w3.org/check?uri=referer">
            <img src="http://www.w3.org/Icons/valid-xhtml11"
                alt="Valid XHTML 1.1" height="31" width="88" />
            </a>
        </p>
    </td>
    <td class="colophon-divider">
    </td>
    <td class="tlpi-cover">
        <a href="http://man7.org/tlpi/"><img src="../../../tlpi/cover/TLPI-front-cover-vsmall.png" alt="Cover of TLPI" /></a>
    </td>
    </tr>
</table>

</div>

<hr class="end-footer" />



<!--BEGIN-SITETRACKING-->
<!-- SITETRACKING.man7.org_linux_man-pages -->

<!-- Start of StatCounter Code (xhtml) -->

<script type="text/javascript">
//<![CDATA[
var sc_project=7422636; 
var sc_invisible=1; 
var sc_security="9b6714ff"; 
//]]>
</script>
<script type="text/javascript"
src="../../../../www.statcounter.com/counter/counter_xhtml.js"></script>
<noscript><div class="statcounter"><a title="website
statistics" href="http://statcounter.com/"
class="statcounter"><img class="statcounter"
src="http://c.statcounter.com/7422636/0/9b6714ff/1/"
alt="website statistics" /></a></div></noscript>

<!-- End of StatCounter Code -->


<!-- Start of Google Analytics Code -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9830363-8']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- End of Google Analytics Code -->

<!--END-SITETRACKING-->

</body>
</html>
