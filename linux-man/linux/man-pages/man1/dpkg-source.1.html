
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <link rel="stylesheet" type="text/css" href="../../../style.css" title="style" />
    <link rel="stylesheet" type="text/css" href="../style.css" title="style" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <title>dpkg-source(1) - Linux manual page</title>
</head>

<body>

<div class="page-top"><a id="top_of_page"></a></div>
<!--%%%TOP_BAR%%%-->
    <div class="nav-bar">
        <table class="nav-table">
            <tr>
                <td class="nav-cell">
                    <p class="nav-text">
                        <a href="http://man7.org/index.html">man7.org</a> &gt; Linux &gt; <a href="../index.html">man-pages</a>
                    </p>
                </td>
                <td class="training-cell">
                    <p class="training-text"><a class="training-link" href="http://man7.org/training/">Linux/UNIX system programming training</a></p>
                </td>
            </tr>
        </table>
    </div>

<hr class="nav-end" />

<!--%%%PAGE_START%%%-->


<table class="sec-table">
<tr>
    <td>
        <p class="section-dir">
<a href="#NAME">NAME</a> | <a href="#SYNOPSIS">SYNOPSIS</a> | <a href="#DESCRIPTION">DESCRIPTION</a> | <a href="#COMMANDS">COMMANDS</a> | <a href="#OPTIONS">OPTIONS</a> | <a href="#SOURCE_PACKAGE_FORMATS">SOURCE&nbsp;PACKAGE&nbsp;FORMATS</a> | <a href="#DIAGNOSTICS">DIAGNOSTICS</a> | <a href="#ENVIRONMENT">ENVIRONMENT</a> | <a href="#FILES">FILES</a> | <a href="#BUGS">BUGS</a> | <a href="#SEE_ALSO">SEE&nbsp;ALSO</a> | <a href="#COLOPHON">COLOPHON</a>
        </p>
    </td>
    <td class="search-box">
        <div class="man-search-box">

            <form method="get" action="http://www.google.com/search">
                <fieldset class="man-search">
                    <input type="text" name="q" size="10" maxlength="255" value="" />
                    <input type="hidden" name="sitesearch" value="man7.org/linux/man-pages" />
                    <input type="submit" name="sa" value="Search online pages" />
                </fieldset>
            </form>

        </div>
    </td>
    <td> </td>
</tr>
</table>

<pre>
<span class="headline">dpkg-source(1)                   dpkg suite                   dpkg-source(1)</span>
</pre>
<h2><a id="NAME" href="#NAME"></a>NAME  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       dpkg-source - Debian source package (.dsc) manipulation tool
</pre>
<h2><a id="SYNOPSIS" href="#SYNOPSIS"></a>SYNOPSIS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>dpkg-source </b>[<i>option</i>...] <i>command</i>
</pre>
<h2><a id="DESCRIPTION" href="#DESCRIPTION"></a>DESCRIPTION  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>dpkg-source </b>packs and unpacks Debian source archives.

       None of these commands allow multiple options to be combined into
       one, and they do not allow the value for an option to be specified in
       a separate argument.
</pre>
<h2><a id="COMMANDS" href="#COMMANDS"></a>COMMANDS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>-x</b>, <b>--extract </b><i>filename</i>.dsc [<i>output-directory</i>]
              Extract a source package (<b>--extract </b>since dpkg 1.17.14).  One
              non-option argument must be supplied, the name of the Debian
              source control file (<b>.dsc</b>).  An optional second non-option
              argument may be supplied to specify the directory to extract
              the source package to, this must not exist. If no output
              directory is specified, the source package is extracted into a
              directory named <i>source</i>-<i>version</i> under the current working
              directory.

              <b>dpkg-source </b>will read the names of the other file(s) making up
              the source package from the control file; they are assumed to
              be in the same directory as the <b>.dsc</b>.

              The files in the extracted package will have their permissions
              and ownerships set to those which would have been expected if
              the files and directories had simply been created -
              directories and executable files will be 0777 and plain files
              will be 0666, both modified by the extractors' umask; if the
              parent directory is setgid then the extracted directories will
              be too, and all the files and directories will inherit its
              group ownership.

              If the source package uses a non-standard format (currently
              this means all formats except “1.0”), its name will be stored
              in <b>debian/source/format </b>so that the following builds of the
              source package use the same format by default.

       <b>-b</b>, <b>--build </b><i>directory</i> [<i>format-specific-parameters</i>]
              Build a source package (<b>--build </b>since dpkg 1.17.14).  The
              first non-option argument is taken as the name of the
              directory containing the debianized source tree (i.e. with a
              debian sub-directory and maybe changes to the original files).
              Depending on the source package format used to build the
              package, additional parameters might be accepted.

              <b>dpkg-source </b>will build the source package with the first
              format found in this ordered list: the format indicated with
              the <i>--format</i> command line option, the format indicated in
              <b>debian/source/format</b>, “1.0”.  The fallback to “1.0” is
              deprecated and will be removed at some point in the future,
              you should always document the desired source format in
              <b>debian/source/format</b>. See section <b>SOURCE PACKAGE FORMATS </b>for
              an extensive description of the various source package
              formats.

       <b>--print-format </b><i>directory</i>
              Print the source format that would be used to build the source
              package if <b>dpkg-source --build </b><i>directory</i> was called (in the
              same conditions and with the same parameters; since dpkg
              1.15.5).

       <b>--before-build </b><i>directory</i>
              Run the corresponding hook of the source package format (since
              dpkg 1.15.8).  This hook is called before any build of the
              package (<b>dpkg-buildpackage </b>calls it very early even before
              <b>debian/rules clean</b>). This command is idempotent and can be
              called multiple times. Not all source formats implement
              something in this hook, and those that do usually prepare the
              source tree for the build for example by ensuring that the
              Debian patches are applied.

       <b>--after-build </b><i>directory</i>
              Run the corresponding hook of the source package format (since
              dpkg 1.15.8).  This hook is called after any build of the
              package (<b>dpkg-buildpackage </b>calls it last). This command is
              idempotent and can be called multiple times. Not all source
              formats implement something in this hook, and those that do
              usually use it to undo what <b>--before-build </b>has done.

       <b>--commit </b>[<i>directory</i>] ...
              Record changes in the source tree unpacked in <i>directory</i> (since
              dpkg 1.16.1).  This command can take supplementary parameters
              depending on the source format.  It will error out for formats
              where this operation doesn't mean anything.

       <b>-?</b>, <b>--help</b>
              Show the usage message and exit.  The format specific build
              and extract options can be shown by using the <b>--format </b>option.

       <b>--version</b>
              Show the version and exit.
</pre>
<h2><a id="OPTIONS" href="#OPTIONS"></a>OPTIONS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
   <b>Generic build options</b>
       <b>-c</b><i>control-file</i>
              Specifies the main source control file to read information
              from. The default is <b>debian/control</b>.  If given with relative
              pathname this is interpreted starting at the source tree's top
              level directory.

       <b>-l</b><i>changelog-file</i>
              Specifies the changelog file to read information from. The
              default is <b>debian/changelog</b>.  If given with relative pathname
              this is interpreted starting at the source tree's top level
              directory.

       <b>-F</b><i>changelog-format</i>
              Specifies the format of the changelog. See
              <a href="dpkg-parsechangelog.1.html">dpkg-parsechangelog(1)</a> for information about alternative
              formats.

       <b>--format=</b><i>value</i>
              Use the given format for building the source package (since
              dpkg 1.14.17).  It does override any format given in
              <b>debian/source/format</b>.

       <b>-V</b><i>name</i><b>=</b><i>value</i>
              Set an output substitution variable.  See <a href="../man5/deb-substvars.5.html">deb-substvars(5)</a> for
              a discussion of output substitution.

       <b>-T</b><i>substvars-file</i>
              Read substitution variables in <i>substvars-file</i>; the default is
              to not read any file. This option can be used multiple times
              to read substitution variables from multiple files (since dpkg
              1.15.6).

       <b>-D</b><i>field</i><b>=</b><i>value</i>
              Override or add an output control file field.

       <b>-U</b><i>field</i>
              Remove an output control file field.

       <b>-Z</b><i>compression</i>, <b>--compression</b>=<i>compression</i>
              Specify the compression to use for created tarballs and diff
              files (<b>--compression </b>since dpkg 1.15.5).  Note that this
              option will not cause existing tarballs to be recompressed, it
              only affects new files. Supported values are: <i>gzip</i>, <i>bzip2</i>,
              <i>lzma</i> and <i>xz</i>.  The default is <i>xz</i> for formats 2.0 and newer, and
              <i>gzip</i> for format 1.0. <i>xz</i> is only supported since dpkg 1.15.5.

       <b>-z</b><i>level</i>, <b>--compression-level</b>=<i>level</i>
              Compression level to use (<b>--compression-level </b>since dpkg
              1.15.5).  As with <b>-Z </b>it only affects newly created files.
              Supported values are: <i>1</i> to <i>9</i>, <i>best</i>, and <i>fast</i>.  The default is
              <i>9</i> for gzip and bzip2, <i>6</i> for xz and lzma.

       <b>-i</b>[<i>regex</i>], <b>--diff-ignore</b>[=<i>regex</i>]
              You may specify a perl regular expression to match files you
              want filtered out of the list of files for the diff
              (<b>--diff-ignore </b>since dpkg 1.15.6).  (This list is generated by
              a find command.) (If the source package is being built as a
              version 3 source package using a VCS, this can be used to
              ignore uncommitted changes on specific files. Using -i.* will
              ignore all of them.)

              The <b>-i </b>option by itself enables this setting with a default
              regex (preserving any modification to the default regex done
              by a previous use of <b>--extend-diff-ignore</b>) that will filter
              out control files and directories of the most common revision
              control systems, backup and swap files and Libtool build
              output directories. There can only be one active regex, of
              multiple <b>-i </b>options only the last one will take effect.

              This is very helpful in cutting out extraneous files that get
              included in the diff, e.g. if you maintain your source in a
              revision control system and want to use a checkout to build a
              source package without including the additional files and
              directories that it will usually contain (e.g. CVS/,
              .cvsignore, .svn/). The default regex is already very
              exhaustive, but if you need to replace it, please note that by
              default it can match any part of a path, so if you want to
              match the begin of a filename or only full filenames, you will
              need to provide the necessary anchors (e.g. ‘(^|/)’, ‘($|/)’)
              yourself.

       <b>--extend-diff-ignore</b>=<i>regex</i>
              The perl regular expression specified will extend the default
              value used by <b>--diff-ignore </b>and its current value, if set
              (since dpkg 1.15.6).  It does this by concatenating “<b>|</b><i>regex</i>”
              to the existing value.  This option is convenient to use in
              <b>debian/source/options </b>to exclude some auto-generated files
              from the automatic patch generation.

       <b>-I</b>[<i>file-pattern</i>], <b>--tar-ignore</b>[=<i>file-pattern</i>]
              If this option is specified, the pattern will be passed to
              <a href="tar.1.html">tar(1)</a>'s <b>--exclude </b>option when it is called to generate a
              .orig.tar or .tar file (<b>--tar-ignore </b>since dpkg 1.15.6).  For
              example, <b>-I</b>CVS will make tar skip over CVS directories when
              generating a .tar.gz file. The option may be repeated multiple
              times to list multiple patterns to exclude.

              <b>-I </b>by itself adds default <b>--exclude </b>options that will filter
              out control files and directories of the most common revision
              control systems, backup and swap files and Libtool build
              output directories.

       <b>Note: </b>While they have similar purposes, <b>-i </b>and <b>-I </b>have very different
       syntax and semantics. <b>-i </b>can only be specified once and takes a perl
       compatible regular expression which is matched against the full
       relative path of each file. <b>-I </b>can specified multiple times and takes
       a filename pattern with shell wildcards.  The pattern is applied to
       the full relative path but also to each part of the path
       individually. The exact semantic of tar's <b>--exclude </b>option is
       somewhat complicated, see
       <a href="https://www.gnu.org/software/tar/manual/tar.html#wildcards">https://www.gnu.org/software/tar/manual/tar.html#wildcards</a> for a full
       documentation.

       The default regex and patterns for both options can be seen in the
       output of the <b>--help </b>command.

   <b>Generic extract options</b>
       <b>--no-copy</b>
              Do not copy original tarballs near the extracted source
              package (since dpkg 1.14.17).

       <b>--no-check</b>
              Do not check signatures and checksums before unpacking (since
              dpkg 1.14.17).

       <b>--no-overwrite-dir</b>
              Do not overwrite the extraction directory if it already exists
              (since dpkg 1.18.8).

       <b>--require-valid-signature</b>
              Refuse to unpack the source package if it doesn't contain an
              OpenPGP signature that can be verified (since dpkg 1.15.0)
              either with the user's <i>trustedkeys.gpg</i> keyring, one of the
              vendor-specific keyrings, or one of the official Debian
              keyrings (<i>/usr/share/keyrings/debian-keyring.gpg</i> and
              <i>/usr/share/keyrings/debian-maintainers.gpg</i>).

       <b>--require-strong-checksums</b>
              Refuse to unpack the source package if it does not contain any
              strong checksums (since dpkg 1.18.7).  Currently the only
              known checksum considered strong is <b>SHA-256</b>.

       <b>--ignore-bad-version</b>
              Turns the bad source package version check into a non-fatal
              warning (since dpkg 1.17.7).  This option should only be
              necessary when extracting ancient source packages with broken
              versions, just for backwards compatibility.
</pre>
<h2><a id="SOURCE_PACKAGE_FORMATS" href="#SOURCE_PACKAGE_FORMATS"></a>SOURCE PACKAGE FORMATS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       If you don't know what source format to use, you should probably pick
       either “3.0 (quilt)” or “3.0 (native)”.  See
       <a href="https://wiki.debian.org/Projects/DebSrc3.0">https://wiki.debian.org/Projects/DebSrc3.0</a> for information on the
       deployment of those formats within Debian.

   <b>Format: 1.0</b>
       A source package in this format consists either of a <b>.orig.tar.gz</b>
       associated to a <b>.diff.gz </b>or a single <b>.tar.gz </b>(in that case the
       package is said to be <i>native</i>).  Optionally the original tarball might
       be accompanied by a detached upstream signature <b>.orig.tar.gz.asc</b>,
       extraction supported since dpkg 1.18.5.

       <b>Extracting</b>

       Extracting a native package is a simple extraction of the single
       tarball in the target directory. Extracting a non-native package is
       done by first unpacking the <b>.orig.tar.gz </b>and then applying the patch
       contained in the <b>.diff.gz </b>file. The timestamp of all patched files is
       reset to the extraction time of the source package (this avoids
       timestamp skews leading to problems when autogenerated files are
       patched). The diff can create new files (the whole debian directory
       is created that way) but can't remove files (empty files will be left
       over).

       <b>Building</b>

       Building a native package is just creating a single tarball with the
       source directory. Building a non-native package involves extracting
       the original tarball in a separate “.orig” directory and regenerating
       the <b>.diff.gz </b>by comparing the source package <i>directory</i> with the .orig
       directory.

       <b>Build options (with --build):</b>

       If a second non-option argument is supplied it should be the name of
       the original source directory or tarfile or the empty string if the
       package is a Debian-specific one and so has no Debianisation diffs.
       If no second argument is supplied then <b>dpkg-source </b>will look for the
       original source tarfile <i>package</i><b>_</b><i>upstream-version</i><b>.orig.tar.gz </b>or the
       original source directory <i>directory</i><b>.orig </b>depending on the <b>-sX</b>
       arguments.

       <b>-sa</b>, <b>-sp</b>, <b>-sk</b>, <b>-su </b>and <b>-sr </b>will not overwrite existing tarfiles or
       directories. If this is desired then <b>-sA</b>, <b>-sP</b>, <b>-sK</b>, <b>-sU </b>and <b>-sR</b>
       should be used instead.

       <b>-sk    </b>Specifies to expect the original source as a tarfile, by
              default <i>package</i><b>_</b><i>upstream-version</i><b>.orig.tar.</b><i>extension</i>.  It will
              leave this original source in place as a tarfile, or copy it
              to the current directory if it isn't already there. The
              tarball will be unpacked into <i>directory</i><b>.orig </b>for the
              generation of the diff.

       <b>-sp    </b>Like <b>-sk </b>but will remove the directory again afterwards.

       <b>-su    </b>Specifies that the original source is expected as a directory,
              by default <i>package</i><b>-</b><i>upstream-version</i><b>.orig </b>and <b>dpkg-source </b>will
              create a new original source archive from it.

       <b>-sr    </b>Like <b>-su </b>but will remove that directory after it has been
              used.

       <b>-ss    </b>Specifies that the original source is available both as a
              directory and as a tarfile. <b>dpkg-source </b>will use the directory
              to create the diff, but the tarfile to create the <b>.dsc</b>.  This
              option must be used with care - if the directory and tarfile
              do not match a bad source archive will be generated.

       <b>-sn    </b>Specifies to not look for any original source, and to not
              generate a diff.  The second argument, if supplied, must be
              the empty string. This is used for Debian-specific packages
              which do not have a separate upstream source and therefore
              have no debianisation diffs.

       <b>-sa </b>or <b>-sA</b>
              Specifies to look for the original source archive as a tarfile
              or as a directory - the second argument, if any, may be
              either, or the empty string (this is equivalent to using <b>-sn</b>).
              If a tarfile is found it will unpack it to create the diff and
              remove it afterwards (this is equivalent to <b>-sp</b>); if a
              directory is found it will pack it to create the original
              source and remove it afterwards (this is equivalent to <b>-sr</b>);
              if neither is found it will assume that the package has no
              debianisation diffs, only a straightforward source archive
              (this is equivalent to <b>-sn</b>).  If both are found then
              <b>dpkg-source </b>will ignore the directory, overwriting it, if <b>-sA</b>
              was specified (this is equivalent to <b>-sP</b>) or raise an error if
              <b>-sa </b>was specified.  <b>-sA </b>is the default.

       <b>--abort-on-upstream-changes</b>
              The process fails if the generated diff contains changes to
              files outside of the debian sub-directory (since dpkg 1.15.8).
              This option is not allowed in <b>debian/source/options </b>but can be
              used in <b>debian/source/local-options</b>.

       <b>Extract options (with --extract):</b>

       In all cases any existing original source tree will be removed.

       <b>-sp    </b>Used when extracting then the original source (if any) will be
              left as a tarfile. If it is not already located in the current
              directory or if an existing but different file is there it
              will be copied there.  (<b>This is the default</b>).

       <b>-su    </b>Unpacks the original source tree.

       <b>-sn    </b>Ensures that the original source is neither copied to the
              current directory nor unpacked. Any original source tree that
              was in the current directory is still removed.

       All the <b>-s</b><i>X</i> options are mutually exclusive. If you specify more than
       one only the last one will be used.

       <b>--skip-debianization</b>
              Skips application of the debian diff on top of the upstream
              sources (since dpkg 1.15.1).

   <b>Format: 2.0</b>
       Extraction supported since dpkg 1.13.9, building supported since dpkg
       1.14.8.  Also known as wig&amp;pen. This format is not recommended for
       wide-spread usage, the format “3.0 (quilt)” replaces it.  Wig&amp;pen was
       the first specification of a new-generation source package format.

       The behaviour of this format is the same as the “3.0 (quilt)” format
       except that it doesn't use an explicit list of patches. All files in
       <b>debian/patches/ </b>matching the perl regular expression <b>[\w-]+ </b>must be
       valid patches: they are applied at extraction time.

       When building a new source package, any change to the upstream source
       is stored in a patch named <b>zz_debian-diff-auto</b>.

   <b>Format: 3.0 (native)</b>
       Supported since dpkg 1.14.17.  This format is an extension of the
       native package format as defined in the 1.0 format. It supports all
       compression methods and will ignore by default any VCS specific files
       and directories as well as many temporary files (see default value
       associated to <b>-I </b>option in the <b>--help </b>output).

   <b>Format: 3.0 (quilt)</b>
       Supported since dpkg 1.14.17.  A source package in this format
       contains at least an original tarball (<b>.orig.tar.</b><i>ext</i> where <i>ext</i> can be
       <b>gz</b>, <b>bz2</b>, <b>lzma </b>and <b>xz</b>) and a debian tarball (<b>.debian.tar.</b><i>ext</i>). It can
       also contain additional original tarballs (<b>.orig-</b><i>component</i><b>.tar.</b><i>ext</i>).
       <i>component</i> can only contain alphanumeric characters and hyphens (‘-’).
       Optionally each original tarball can be accompanied by a detached
       upstream signature (<b>.orig.tar.</b><i>ext</i><b>.asc </b>and
       <b>.orig-</b><i>component</i><b>.tar.</b><i>ext</i><b>.asc</b>), extraction supported since dpkg
       1.17.20, building supported since dpkg 1.18.5.

       <b>Extracting</b>

       The main original tarball is extracted first, then all additional
       original tarballs are extracted in subdirectories named after the
       <i>component</i> part of their filename (any pre-existing directory is
       replaced). The debian tarball is extracted on top of the source
       directory after prior removal of any pre-existing <b>debian </b>directory.
       Note that the debian tarball must contain a <b>debian </b>sub-directory but
       it can also contain binary files outside of that directory (see
       <b>--include-binaries </b>option).

       All patches listed in <b>debian/patches/debian.series </b>or
       <b>debian/patches/series </b>are then applied.  If the former file is used
       and the latter one doesn't exist (or is a symlink), then the latter
       is replaced with a symlink to the former. This is meant to simplify
       usage of <b>quilt </b>to manage the set of patches. Note however that while
       <b>dpkg-source </b>parses correctly series files with explicit options used
       for patch application (stored on each line after the patch filename
       and one or more spaces), it does ignore those options and always
       expect patches that can be applied with the <b>-p1 </b>option of <b>patch</b>. It
       will thus emit a warning when it encounters such options, and the
       build is likely to fail.

       The timestamp of all patched files is reset to the extraction time of
       the source package (this avoids timestamp skews leading to problems
       when autogenerated files are patched).

       Contrary to <b>quilt</b>'s default behaviour, patches are expected to apply
       without any fuzz. When that is not the case, you should refresh such
       patches with <b>quilt</b>, or <b>dpkg-source </b>will error out while trying to
       apply them.

       Similarly to <b>quilt</b>'s default behaviour, the patches can remove files
       too.

       The file <b>.pc/applied-patches </b>is created if some patches have been
       applied during the extraction.

       <b>Building</b>

       All original tarballs found in the current directory are extracted in
       a temporary directory by following the same logic as for the unpack,
       the debian directory is copied over in the temporary directory, and
       all patches except the automatic patch (<b>debian-changes-</b><i>version</i> or
       <b>debian-changes</b>, depending on <b>--single-debian-patch</b>) are applied. The
       temporary directory is compared to the source package directory. When
       the diff is non-empty, the build fails unless <b>--single-debian-patch</b>
       or <b>--auto-commit </b>has been used, in which case the diff is stored in
       the automatic patch.  If the automatic patch is created/deleted, it's
       added/removed from the series file and from the <b>quilt </b>metadata.

       Any change on a binary file is not representable in a diff and will
       thus lead to a failure unless the maintainer deliberately decided to
       include that modified binary file in the debian tarball (by listing
       it in <b>debian/source/include-binaries</b>). The build will also fail if it
       finds binary files in the debian sub-directory unless they have been
       whitelisted through <b>debian/source/include-binaries</b>.

       The updated debian directory and the list of modified binaries is
       then used to generate the debian tarball.

       The automatically generated diff doesn't include changes on VCS
       specific files as well as many temporary files (see default value
       associated to <b>-i </b>option in the <b>--help </b>output). In particular, the <b>.pc</b>
       directory used by <b>quilt </b>is ignored during generation of the automatic
       patch.

       Note: <b>dpkg-source --before-build </b>(and <b>--build</b>) will ensure that all
       patches listed in the series file are applied so that a package build
       always has all patches applied. It does this by finding unapplied
       patches (they are listed in the <b>series </b>file but not in
       <b>.pc/applied-patches</b>), and if the first patch in that set can be
       applied without errors, it will apply them all. The option
       <b>--no-preparation </b>can be used to disable this behavior.

       <b>Recording changes</b>

       <b>--commit </b>[<i>directory</i>] [<i>patch-name</i>] [<i>patch-file</i>]
              Generates a patch corresponding to the local changes that are
              not managed by the <b>quilt </b>patch system and integrates it in the
              patch system under the name <i>patch-name</i>. If the name is
              missing, it will be asked interactively. If <i>patch-file</i> is
              given, it is used as the patch corresponding to the local
              changes to integrate. Once integrated, an editor is launched
              so that you can edit the meta-information in the patch header.

              Passing <i>patch-file</i> is mainly useful after a build failure that
              pre-generated this file, and on this ground the given file is
              removed after integration. Note also that the changes
              contained in the patch file must already be applied on the
              tree and that the files modified by the patch must not have
              supplementary unrecorded changes.

              If the patch generation detects modified binary files, they
              will be automatically added to <b>debian/source/include-binaries</b>
              so that they end up in the debian tarball (exactly like <b>dpkg-</b>
              <b>source --include-binaries --build </b>would do).

       <b>Build options</b>

       <b>--allow-version-of-quilt-db=</b><i>version</i>
              Allow <b>dpkg-source </b>to build the source package if the version
              of the <b>quilt </b>metadata is the one specified, even if
              <b>dpkg-source </b>doesn't know about it (since dpkg 1.15.5.4).
              Effectively this says that the given version of the <b>quilt</b>
              metadata is compatible with the version 2 that <b>dpkg-source</b>
              currently supports. The version of the <b>quilt </b>metadata is
              stored in <b>.pc/.version</b>.

       <b>--include-removal</b>
              Do not ignore removed files and include them in the
              automatically generated patch.

       <b>--include-timestamp</b>
              Include timestamp in the automatically generated patch.

       <b>--include-binaries</b>
              Add all modified binaries in the debian tarball. Also add them
              to <b>debian/source/include-binaries</b>: they will be added by
              default in subsequent builds and this option is thus no more
              needed.

       <b>--no-preparation</b>
              Do not try to prepare the build tree by applying patches which
              are apparently unapplied (since dpkg 1.14.18).

       <b>--single-debian-patch</b>
              Use <b>debian/patches/debian-changes </b>instead of
              <b>debian/patches/debian-changes-</b><i>version</i> for the name of the
              automatic patch generated during build (since dpkg 1.15.5.4).
              This option is particularly useful when the package is
              maintained in a VCS and a patch set can't reliably be
              generated. Instead the current diff with upstream should be
              stored in a single patch. The option would be put in
              <b>debian/source/local-options </b>and would be accompanied by a
              <b>debian/source/local-patch-header </b>file explaining how the
              Debian changes can be best reviewed, for example in the VCS
              that is used.

       <b>--create-empty-orig</b>
              Automatically create the main original tarball as empty if
              it's missing and if there are supplementary original tarballs
              (since dpkg 1.15.6).  This option is meant to be used when the
              source package is just a bundle of multiple upstream software
              and where there's no “main” software.

       <b>--no-unapply-patches, --unapply-patches</b>
              By default, <b>dpkg-source </b>will automatically unapply the patches
              in the <b>--after-build </b>hook if it did apply them during
              <b>--before-build </b>(<b>--unapply-patches </b>since dpkg 1.15.8,
              <b>--no-unapply-patches </b>since dpkg 1.16.5).  Those options allow
              you to forcefully disable or enable the patch unapplication
              process. Those options are only allowed in
              <b>debian/source/local-options </b>so that all generated source
              packages have the same behavior by default.

       <b>--abort-on-upstream-changes</b>
              The process fails if an automatic patch has been generated
              (since dpkg 1.15.8).  This option can be used to ensure that
              all changes were properly recorded in separate <b>quilt </b>patches
              prior to the source package build. This option is not allowed
              in <b>debian/source/options </b>but can be used in
              <b>debian/source/local-options</b>.

       <b>--auto-commit</b>
              The process doesn't fail if an automatic patch has been
              generated, instead it's immediately recorded in the <b>quilt</b>
              series.

       <b>Extract options</b>

       <b>--skip-debianization</b>
              Skips extraction of the debian tarball on top of the upstream
              sources (since dpkg 1.15.1).

       <b>--skip-patches</b>
              Do not apply patches at the end of the extraction (since dpkg
              1.14.18).

   <b>Format: 3.0 (custom)</b>
       Supported since dpkg 1.14.17.  This format is special.  It doesn't
       represent a real source package format but can be used to create
       source packages with arbitrary files.

       <b>Build options</b>

       All non-option arguments are taken as files to integrate in the
       generated source package. They must exist and are preferably in the
       current directory. At least one file must be given.

       <b>--target-format=</b><i>value</i>
              <b>Required</b>. Defines the real format of the generated source
              package.  The generated .dsc file will contain this value in
              its <b>Format </b>field and not “3.0 (custom)”.

   <b>Format: 3.0 (git)</b>
       Supported since dpkg 1.14.17.  This format is experimental.

       A source package in this format consists of a single bundle of a git
       repository <b>.git </b>to hold the source of a package.  There may also be a
       <b>.gitshallow </b>file listing revisions for a shallow git clone.

       <b>Extracting</b>

       The bundle is cloned as a git repository to the target directory.  If
       there is a gitshallow file, it is installed as <i>.git/shallow</i> inside
       the cloned git repository.

       Note that by default the new repository will have the same branch
       checked out that was checked out in the original source.  (Typically
       “master”, but it could be anything.)  Any other branches will be
       available under <i>remotes/origin/</i>.

       <b>Building</b>

       Before going any further, some checks are done to ensure that we
       don't have any non-ignored uncommitted changes.

       <a href="git-bundle.1.html">git-bundle(1)</a> is used to generate a bundle of the git repository.  By
       default, all branches and tags in the repository are included in the
       bundle.

       <b>Build options</b>

       <b>--git-ref=</b><i>ref</i>
              Allows specifying a git ref to include in the git bundle. Use
              disables the default behavior of including all branches and
              tags. May be specified multiple times. The <i>ref</i> can be the name
              of a branch or tag to include. It may also be any parameter
              that can be passed to <a href="git-rev-list.1.html">git-rev-list(1)</a>. For example, to include
              only the master branch, use <b>--git-ref=</b>master. To include all
              tags and branches, except for the private branch, use
              <b>--git-ref=</b>--all <b>--git-ref=</b>^private

       <b>--git-depth=</b><i>number</i>
              Creates a shallow clone with a history truncated to the
              specified number of revisions.

   <b>Format: 3.0 (bzr)</b>
       Supported since dpkg 1.14.17.  This format is experimental.  It
       generates a single tarball containing the bzr repository.

       <b>Extracting</b>

       The tarball is unpacked and then bzr is used to checkout the current
       branch.

       <b>Building</b>

       Before going any further, some checks are done to ensure that we
       don't have any non-ignored uncommitted changes.

       Then the VCS specific part of the source directory is copied over to
       a temporary directory. Before this temporary directory is packed in a
       tarball, various cleanup are done to save space.
</pre>
<h2><a id="DIAGNOSTICS" href="#DIAGNOSTICS"></a>DIAGNOSTICS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
   <b>no source format specified in debian/source/format</b>
       The file <b>debian/source/format </b>should always exist and indicate the
       desired source format. For backwards compatibility, format “1.0” is
       assumed when the file doesn't exist but you should not rely on this:
       at some point in the future <b>dpkg-source </b>will be modified to fail when
       that file doesn't exist.

       The rationale is that format “1.0” is no longer the recommended
       format, you should usually pick one of the newer formats (“3.0
       (quilt)”, “3.0 (native)”) but <b>dpkg-source </b>will not do this
       automatically for you.  If you want to continue using the old format,
       you should be explicit about it and put “1.0” in
       <b>debian/source/format</b>.

   <b>the diff modifies the following upstream files</b>
       When using source format “1.0” it is usually a bad idea to modify
       upstream files directly as the changes end up hidden and mostly
       undocumented in the .diff.gz file. Instead you should store your
       changes as patches in the debian directory and apply them at build-
       time. To avoid this complexity you can also use the format “3.0
       (quilt)” that offers this natively.

   <b>cannot represent change to </b><i>file</i>
       Changes to upstream sources are usually stored with patch files, but
       not all changes can be represented with patches: they can only alter
       the content of plain text files. If you try replacing a file with
       something of a different type (for example replacing a plain file
       with a symlink or a directory), you will get this error message.

   <b>newly created empty file </b><i>file</i> <b>will not be represented in diff</b>
       Empty files can't be created with patch files. Thus this change is
       not recorded in the source package and you are warned about it.

   <b>executable mode </b><i>perms</i> <b>of </b><i>file</i> <b>will not be represented in diff</b>
       Patch files do not record permissions of files and thus executable
       permissions are not stored in the source package. This warning
       reminds you of that fact.

   <b>special mode </b><i>perms</i> <b>of </b><i>file</i> <b>will not be represented in diff</b>
       Patch files do not record permissions of files and thus modified
       permissions are not stored in the source package. This warning
       reminds you of that fact.
</pre>
<h2><a id="ENVIRONMENT" href="#ENVIRONMENT"></a>ENVIRONMENT  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>SOURCE_DATE_EPOCH</b>
              If set, it will be used as the timestamp (as seconds since the
              epoch) to clamp the mtime in the <b>tar</b>(5) file entries.

       <b>VISUAL</b>
       <b>EDITOR </b>Used by the “2.0” and “3.0 (quilt)” source format modules.

       <b>GIT_DIR</b>
       <b>GIT_INDEX_FILE</b>
       <b>GIT_OBJECT_DIRECTORY</b>
       <b>GIT_ALTERNATE_OBJECT_DIRECTORIES</b>
       <b>GIT_WORK_TREE</b>
              Used by the “3.0 (git)” source format modules.
</pre>
<h2><a id="FILES" href="#FILES"></a>FILES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
   <b>debian/source/format</b>
       This file contains on a single line the format that should be used to
       build the source package (possible formats are described above). No
       leading or trailing spaces are allowed.

   <b>debian/source/include-binaries</b>
       This file contains a list of binary files (one per line) that should
       be included in the debian tarball. Leading and trailing spaces are
       stripped.  Lines starting with ‘<b>#</b>’ are comments and are skipped.
       Empty lines are ignored.

   <b>debian/source/options</b>
       This file contains a list of long options that should be
       automatically prepended to the set of command line options of a
       <b>dpkg-source --build </b>or <b>dpkg-source --print-format </b>call. Options like
       <b>--compression </b>and <b>--compression-level </b>are well suited for this file.

       Each option should be put on a separate line. Empty lines and lines
       starting with ‘<b>#</b>’ are ignored.  The leading ‘<b>--</b>’ should be stripped
       and short options are not allowed.  Optional spaces are allowed
       around the ‘<b>=</b>’ symbol and optional quotes are allowed around the
       value.  Here's an example of such a file:

         # let dpkg-source create a debian.tar.bz2 with maximal compression
         compression = "bzip2"
         compression-level = 9
         # use debian/patches/debian-changes as automatic patch
         single-debian-patch
         # ignore changes on config.{sub,guess}
         extend-diff-ignore = "(^|/)(config.sub|config.guess)$"

       Note: <b>format </b>options are not accepted in this file, you should use
       <b>debian/source/format </b>instead.

   <b>debian/source/local-options</b>
       Exactly like <b>debian/source/options </b>except that the file is not
       included in the generated source package. It can be useful to store a
       preference tied to the maintainer or to the VCS repository where the
       source package is maintained.

   <b>debian/source/local-patch-header </b>and <b>debian/source/patch-header</b>
       Free form text that is put on top of the automatic patch generated in
       formats “2.0” or “3.0 (quilt)”. <b>local-patch-header </b>is not included in
       the generated source package while <b>patch-header </b>is.

   <b>debian/patches/series</b>
       This file lists all patches that have to be applied (in the given
       order) on top of the upstream source package. Leading and trailing
       spaces are stripped.  Lines starting with ‘<b>#</b>’ are comments and are
       skipped.  Empty lines are ignored.  Remaining lines start with a
       patch filename (relative to the <b>debian/patches/ </b>directory) up to the
       first space character or the end of line. Optional <b>quilt </b>options can
       follow up to the end of line or the first ‘<b>#</b>’ preceded by one or more
       spaces (which marks the start of a comment up to the end of line).
</pre>
<h2><a id="BUGS" href="#BUGS"></a>BUGS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The point at which field overriding occurs compared to certain
       standard output field settings is rather confused.
</pre>
<h2><a id="SEE_ALSO" href="#SEE_ALSO"></a>SEE ALSO  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <a href="../man5/deb-src-control.5.html">deb-src-control(5)</a>, <a href="../man5/deb-changelog.5.html">deb-changelog(5)</a>, <a href="../man5/dsc.5.html">dsc(5)</a>.
</pre>
<h2><a id="COLOPHON" href="#COLOPHON"></a>COLOPHON  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This page is part of the <i>dpkg</i> (Debian Package Manager) project.
       Information about the project can be found at 
       ⟨<a href="https://wiki.debian.org/Teams/Dpkg/">https://wiki.debian.org/Teams/Dpkg/</a>⟩.  If you have a bug report for
       this manual page, see 
       ⟨<a href="http://bugs.debian.org/cgi-bin/pkgreport.cgi?src=dpkg">http://bugs.debian.org/cgi-bin/pkgreport.cgi?src=dpkg</a>⟩.  This page
       was obtained from the project's upstream Git repository 
       ⟨git://git.debian.org/git/dpkg/dpkg.git⟩ on 2017-07-05.  If you dis‐
       cover any rendering problems in this HTML version of the page, or you
       believe there is a better or more up-to-date source for the page, or
       you have corrections or improvements to the information in this
       COLOPHON (which is <i>not</i> part of the original manual page), send a mail
       to man-pages@man7.org

<span class="footline">1.18.15-3-ga2ef                  1970-01-01                   dpkg-source(1)</span>
</pre>

<hr class="end-man-text" />
<p>Pages that refer to this page: 
    <a href="dpkg-buildpackage.1.html">dpkg-buildpackage(1)</a>,&nbsp; 
    <a href="../man5/deb-src-control.5.html">deb-src-control(5)</a>,&nbsp; 
    <a href="../man5/deb-substvars.5.html">deb-substvars(5)</a>,&nbsp; 
    <a href="../man5/dsc.5.html">dsc(5)</a>
</p>
<hr/>

 
<hr class="start-footer" />

<div class="footer"> 

<table class="colophon-table">
    <tr>
    <td class="pub-info">
        <p>
            HTML rendering created 2017-07-13
            by <a href="http://man7.org/mtk/index.html">Michael Kerrisk</a>, 
            author of 
            <a href="http://man7.org/tlpi/"><em>The Linux Programming Interface</em></a>, 
            maintainer of the 
            <a href="https://www.kernel.org/doc/man-pages/">Linux <em>man-pages</em> project</a>.
        </p>
        <p>
            For details of in-depth
            <strong>Linux/UNIX system programming training courses</strong>
            that I teach, look <a href="http://man7.org/training/">here</a>.
        </p>
        <p>
            Hosting by <a href="http://www.jambit.com/index_en.html">jambit GmbH</a>.
        </p>
        <p>
            <a href="http://validator.w3.org/check?uri=referer">
            <img src="http://www.w3.org/Icons/valid-xhtml11"
                alt="Valid XHTML 1.1" height="31" width="88" />
            </a>
        </p>
    </td>
    <td class="colophon-divider">
    </td>
    <td class="tlpi-cover">
        <a href="http://man7.org/tlpi/"><img src="../../../tlpi/cover/TLPI-front-cover-vsmall.png" alt="Cover of TLPI" /></a>
    </td>
    </tr>
</table>

</div>

<hr class="end-footer" />



<!--BEGIN-SITETRACKING-->
<!-- SITETRACKING.man7.org_linux_man-pages -->

<!-- Start of StatCounter Code (xhtml) -->

<script type="text/javascript">
//<![CDATA[
var sc_project=7422636; 
var sc_invisible=1; 
var sc_security="9b6714ff"; 
//]]>
</script>
<script type="text/javascript"
src="../../../../www.statcounter.com/counter/counter_xhtml.js"></script>
<noscript><div class="statcounter"><a title="website
statistics" href="http://statcounter.com/"
class="statcounter"><img class="statcounter"
src="http://c.statcounter.com/7422636/0/9b6714ff/1/"
alt="website statistics" /></a></div></noscript>

<!-- End of StatCounter Code -->


<!-- Start of Google Analytics Code -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9830363-8']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- End of Google Analytics Code -->

<!--END-SITETRACKING-->

</body>
</html>
