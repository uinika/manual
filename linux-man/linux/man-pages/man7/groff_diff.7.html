
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <link rel="stylesheet" type="text/css" href="../../../style.css" title="style" />
    <link rel="stylesheet" type="text/css" href="../style.css" title="style" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <title>groff_diff(7) - Linux manual page</title>
</head>

<body>

<div class="page-top"><a id="top_of_page"></a></div>
<!--%%%TOP_BAR%%%-->
    <div class="nav-bar">
        <table class="nav-table">
            <tr>
                <td class="nav-cell">
                    <p class="nav-text">
                        <a href="http://man7.org/index.html">man7.org</a> &gt; Linux &gt; <a href="../index.html">man-pages</a>
                    </p>
                </td>
                <td class="training-cell">
                    <p class="training-text"><a class="training-link" href="http://man7.org/training/">Linux/UNIX system programming training</a></p>
                </td>
            </tr>
        </table>
    </div>

<hr class="nav-end" />

<!--%%%PAGE_START%%%-->


<table class="sec-table">
<tr>
    <td>
        <p class="section-dir">
<a href="#NAME">NAME</a> | <a href="#DESCRIPTION">DESCRIPTION</a> | <a href="#GROFF_LANGUAGE">GROFF&nbsp;LANGUAGE</a> | <a href="#INTERMEDIATE_OUTPUT_FORMAT">INTERMEDIATE&nbsp;OUTPUT&nbsp;FORMAT</a> | <a href="#INCOMPATIBILITIES">INCOMPATIBILITIES</a> | <a href="#SEE_ALSO">SEE&nbsp;ALSO</a> | <a href="#COPYING">COPYING</a> | <a href="#AUTHORS">AUTHORS</a> | <a href="#COLOPHON">COLOPHON</a>
        </p>
    </td>
    <td class="search-box">
        <div class="man-search-box">

            <form method="get" action="http://www.google.com/search">
                <fieldset class="man-search">
                    <input type="text" name="q" size="10" maxlength="255" value="" />
                    <input type="hidden" name="sitesearch" value="man7.org/linux/man-pages" />
                    <input type="submit" name="sa" value="Search online pages" />
                </fieldset>
            </form>

        </div>
    </td>
    <td> </td>
</tr>
</table>

<pre>
<span class="headline">GROFF_DIFF(7)         Miscellaneous Information Manual         GROFF_DIFF(7)</span>
</pre>
<h2><a id="NAME" href="#NAME"></a>NAME  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       groff_diff - differences between GNU troff and classical troff
</pre>
<h2><a id="DESCRIPTION" href="#DESCRIPTION"></a>DESCRIPTION  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This manual page describes the language differences between <i>groff</i>,
       the GNU <i>roff</i> text processing system, and the classical <i>roff</i> formatter
       of the freely available Unix 7 of the 1970s, documented in the <i>Troff</i>
       <i>User's Manual</i> by <i>Ossanna</i> and <i>Kernighan</i>.  This includes the roff
       language as well as the intermediate output format (troff output).

       The section <i>SEE ALSO</i> gives pointers to both the classical <i>roff</i> and
       the modern <i>groff</i> documentation.
</pre>
<h2><a id="GROFF_LANGUAGE" href="#GROFF_LANGUAGE"></a>GROFF LANGUAGE  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       In this section, all additional features of <i>groff</i> compared to the
       classical Unix 7 <i>troff</i> are described in detail.

   <b>Long names</b>
       The names of number registers, fonts, strings/macros/diversions,
       special characters (glyphs), and colors can be of any length.  In
       escape sequences, additionally to the classical ‘<b>(</b><i>xx</i>’ construction
       for a two-character glyph name, you can use ‘<b>[</b><i>xxx</i><b>]</b>’ for a name of
       arbitrary length.

       <b>\[</b><i>xxx</i><b>] </b>Print the special character (glyph) called <i>xxx</i>.

       <b>\[</b><i>comp1 comp2 ...</i><b>]</b>
              Print composite glyph consisting of multiple components.
              Example: ‘\[A ho]’ is capital letter A with ogonek which
              finally maps to glyph name ‘u0041_0328’.  See the <i>groff info</i>
              <i>file</i> for details how a glyph name for a composite glyph is
              constructed, and <a href="groff_char.7.html">groff_char(7)</a> for a list of glyph name
              components used in composite glyph names.

       <b>\f[</b><i>xxx</i><b>]</b>
              Set font <i>xxx</i>.  Additionally, <b>\f[] </b>is a new syntax form equal
              to <b>\fP</b>, i.e., to return to the previous font.

       <b>\*[</b><i>xxx arg1 arg2 ...</i><b>]</b>
              Interpolate string <i>xxx</i>, taking <i>arg1</i>, <i>arg2</i>, <i>...</i>, as arguments.

       <b>\n[</b><i>xxx</i><b>]</b>
              Interpolate number register <i>xxx</i>.

   <b>Fractional point sizes</b>
       A <i>scaled point</i> is equal to <b>1/sizescale </b>points, where <b>sizescale </b>is
       specified in the <b>DESC </b>file (1 by default).  There is a new scale
       indicator <b>z </b>that has the effect of multiplying by sizescale.
       Requests and escape sequences in troff interpret arguments that
       represent a point size as being in units of scaled points, but they
       evaluate each such argument using a default scale indicator of <b>z</b>.
       Arguments treated in this way are the argument to the <b>ps </b>request, the
       third argument to the <b>cs </b>request, the second and fourth arguments to
       the <b>tkf </b>request, the argument to the <b>\H </b>escape sequence, and those
       variants of the <b>\s </b>escape sequence that take a numeric expression as
       their argument.

       For example, suppose sizescale is 1000; then a scaled point is
       equivalent to a millipoint; the call <b>.ps 10.25 </b>is equivalent to
       <b>.ps 10.25z </b>and so sets the point size to 10250 scaled points, which
       is equal to 10.25 points.

       The number register <b>\n[.s] </b>returns the point size in points as
       decimal fraction.  There is also a new number register <b>\n[.ps] </b>that
       returns the point size in scaled points.

       It would make no sense to use the <b>z </b>scale indicator in a numeric
       expression whose default scale indicator was neither <b>u </b>nor <b>z</b>, and so
       <b>troff </b>disallows this.  Similarly it would make no sense to use a
       scaling indicator other than <b>z </b>or <b>u </b>in a numeric expression whose
       default scale indicator was <b>z</b>, and so <b>troff </b>disallows this as well.

       There is also new scale indicator <b>s </b>which multiplies by the number of
       units in a scaled point.  So, for example, <b>\n[.ps]s </b>is equal to <b>1m</b>.
       Be sure not to confuse the <b>s </b>and <b>z </b>scale indicators.

   <b>Numeric expressions</b>
       Spaces are permitted in a number expression within parentheses.

       <b>M </b>indicates a scale of 100ths of an em.  <b>f </b>indicates a scale of 65536
       units, providing fractions for color definitions with the <b>defcolor</b>
       request.  For example, 0.5f = 32768u.

       <i>e1</i><b>&gt;?</b><i>e2</i> The maximum of <i>e1</i> and <i>e2</i>.

       <i>e1</i><b>&lt;?</b><i>e2</i> The minimum of <i>e1</i> and <i>e2</i>.

       <b>(</b><i>c</i><b>;</b><i>e</i><b>)  </b>Evaluate <i>e</i> using <i>c</i> as the default scaling indicator.  If <i>c</i> is
              missing, ignore scaling indicators in the evaluation of <i>e</i>.

   <b>New escape sequences</b>
       <b>\A'</b><i>anything</i><b>'</b>
              This expands to <b>1 </b>or <b>0</b>, depending on whether <i>anything</i> is or is
              not acceptable as the name of a string, macro, diversion,
              number register, environment, font, or color.  It returns <b>0 </b>if
              <i>anything</i> is empty.  This is useful if you want to look up user
              input in some sort of associative table.

       <b>\B'</b><i>anything</i><b>'</b>
              This expands to <b>1 </b>or <b>0</b>, depending on whether <i>anything</i> is or is
              not a valid numeric expression.  It returns <b>0 </b>if <i>anything</i> is
              empty.

       <b>\C'</b><i>xxx</i><b>'</b>
              Typeset glyph named <i>xxx</i>.  Normally it is more convenient to
              use <b>\[</b><i>xxx</i><b>]</b>.  But <b>\C </b>has the advantage that it is compatible
              with recent versions of UNIX and is available in compatibility
              mode.

       <b>\E     </b>This is equivalent to an escape character, but it is not
              interpreted in copy mode.  For example, strings to start and
              end superscripting could be defined like this

                     .ds { \v'-.3m'\s'\En[.s]*6u/10u'
                     .ds } \s0\v'.3m'

              The use of <b>\E </b>ensures that these definitions work even if <b>\*{</b>
              gets interpreted in copy mode (for example, by being used in a
              macro argument).

       <b>\F</b><i>f</i>
       <b>\F(</b><i>fm</i>
       <b>\F[</b><i>fam</i><b>]</b>
              Change font family.  This is the same as the <b>fam </b>request.
              <b>\F[] </b>switches back to the previous font family (note that <b>\FP</b>
              won't work; it selects font family ‘P’ instead).

       <b>\m</b><i>x</i>
       <b>\m(</b><i>xx</i>
       <b>\m[</b><i>xxx</i><b>]</b>
              Set drawing color.  <b>\m[] </b>switches back to the previous color.

       <b>\M</b><i>x</i>
       <b>\M(</b><i>xx</i>
       <b>\M[</b><i>xxx</i><b>]</b>
              Set background color for filled objects drawn with the <b>\D'</b><i>...</i><b>'</b>
              commands.  <b>\M[] </b>switches back to the previous color.

       <b>\N'</b><i>n</i><b>'  </b>Typeset the glyph with index <i>n</i> in the current font.  <i>n</i> can be
              any integer.  Most devices only have glyphs with indices
              between 0 and 255.  If the current font does not contain a
              glyph with that code, special fonts are <i>not</i> searched.  The <b>\N</b>
              escape sequence can be conveniently used in conjunction with
              the <b>char </b>request, for example

                     .char \[phone] \f(ZD\N'37'

              The index of each glyph is given in the fourth column in the
              font description file after the <b>charset </b>command.  It is possi‐
              ble to include unnamed glyphs in the font description file by
              using a name of <b>---</b>; the <b>\N </b>escape sequence is the only way to
              use these.

       <b>\O</b><i>n</i>
       <b>\O[</b><i>n</i><b>]  </b>Suppress troff output.  The escapes <b>\O2</b>, <b>\O3</b>, <b>\O4</b>, and <b>\O5 </b>are
              intended for internal use by <b>grohtml</b>.

              <b>\O0    </b>Disable any ditroff glyphs from being emitted to the
                     device driver, provided that the escape occurs at the
                     outer level (see <b>\O3 </b>and <b>\O4</b>).

              <b>\O1    </b>Enable output of glyphs, provided that the escape
                     occurs at the outer level.

                     <b>\O0 </b>and <b>\O1 </b>also reset the registers <b>\n[opminx]</b>,
                     <b>\n[opminy]</b>, <b>\n[opmaxx]</b>, and <b>\n[opmaxy] </b>to -1.  These
                     four registers mark the top left and bottom right hand
                     corners of a box which encompasses all written glyphs.

              <b>\O2    </b>Provided that the escape occurs at the outer level,
                     enable output of glyphs and also write out to stderr
                     the page number and four registers encompassing the
                     glyphs previously written since the last call to <b>\O</b>.

              <b>\O3    </b>Begin a nesting level.  At start-up, <b>troff </b>is at outer
                     level.  This is really an internal mechanism for
                     <b>grohtml </b>while producing images.  They are generated by
                     running the troff source through <b>troff </b>to the post‐
                     script device and <b>ghostscript </b>to produce images in PNG
                     format.  The <b>\O3 </b>escape starts a new page if the device
                     is not html (to reduce the possibility of images cross‐
                     ing a page boundary).

              <b>\O4    </b>End a nesting level.

              <b>\O5[</b><i>Pfilename</i><b>]</b>
                     This escape is <b>grohtml </b>specific.  Provided that this
                     escape occurs at the outer nesting level, write <i>file‐</i>
                     <i>name</i> to stderr.  The position of the image, <i>P</i>, must be
                     specified and must be one of <b>l</b>, <b>r</b>, <b>c</b>, or <b>i </b>(left,
                     right, centered, inline).  <i>filename</i> is associated with
                     the production of the next inline image.

       <b>\R'</b><i>name ±n</i><b>'</b>
              This has the same effect as

                     <b>.nr </b><i>name ±n</i>

       <b>\s(</b><i>nn</i>
       <b>\s±(</b><i>nn</i> Set the point size to <i>nn</i> points; <i>nn</i> must be exactly two dig‐
              its.

       <b>\s[±</b><i>n</i><b>]</b>
       <b>\s±[</b><i>n</i><b>]</b>
       <b>\s'±</b><i>n</i><b>'</b>
       <b>\s±'</b><i>n</i><b>' </b>Set the point size to <i>n</i> scaled points; <i>n</i> is a numeric expres‐
              sion with a default scale indicator of <b>z</b>.

       <b>\V</b><i>x</i>
       <b>\V(</b><i>xx</i>
       <b>\V[</b><i>xxx</i><b>]</b>
              Interpolate the contents of the environment variable <i>xxx</i>, as
              returned by <a href="../man3/getenv.3.html">getenv(3)</a>.  <b>\V </b>is interpreted in copy mode.

       <b>\Y</b><i>x</i>
       <b>\Y(</b><i>xx</i>
       <b>\Y[</b><i>xxx</i><b>]</b>
              This is approximately equivalent to <b>\X'\*[</b><i>xxx</i><b>]'</b>.  However the
              contents of the string or macro <i>xxx</i> are not interpreted; also
              it is permitted for <i>xxx</i> to have been defined as a macro and
              thus contain newlines (it is not permitted for the argument to
              <b>\X </b>to contain newlines).  The inclusion of newlines requires
              an extension to the UNIX troff output format, and confuses
              drivers that do not know about this extension.

       <b>\Z'</b><i>anything</i><b>'</b>
              Print anything and then restore the horizontal and vertical
              position; <i>anything</i> may not contain tabs or leaders.

       <b>\$0    </b>The name by which the current macro was invoked.  The <b>als</b>
              request can make a macro have more than one name.

       <b>\$*    </b>In a macro or string, the concatenation of all the arguments
              separated by spaces.

       <b>\$@    </b>In a macro or string, the concatenation of all the arguments
              with each surrounded by double quotes, and separated by spa‐
              ces.

       <b>\$^    </b>In a macro, the representation of all parameters as if they
              were an argument to the <b>ds </b>request.

       <b>\$(</b><i>nn</i>
       <b>\$[</b><i>nnn</i><b>]</b>
              In a macro or string, this gives the <i>nn</i>-th or <i>nnn</i>-th argument.
              Macros and strings can have an unlimited number of arguments.

       <b>\?</b><i>anything</i><b>\?</b>
              When used in a diversion, this transparently embeds <i>anything</i>
              in the diversion.  <i>anything</i> is read in copy mode.  When the
              diversion is reread, <i>anything</i> is interpreted.  <i>anything</i> may
              not contain newlines; use <b>\! </b>if you want to embed newlines in
              a diversion.  The escape sequence <b>\? </b>is also recognized in
              copy mode and turned into a single internal code; it is this
              code that terminates <i>anything</i>.  Thus

                     .nr x 1
                     .nf
                     .di d
                     \?\\?\\\\?\\\\\\\\nx\\\\?\\?\?
                     .di
                     .nr x 2
                     .di e
                     .d
                     .di
                     .nr x 3
                     .di f
                     .e
                     .di
                     .nr x 4
                     .f

              prints <b>4</b>.

       <b>\/     </b>This increases the width of the preceding glyph so that the
              spacing between that glyph and the following glyph is correct
              if the following glyph is a roman glyph.  It is a good idea to
              use this escape sequence whenever an italic glyph is immedi‐
              ately followed by a roman glyph without any intervening space.

       <b>\,     </b>This modifies the spacing of the following glyph so that the
              spacing between that glyph and the preceding glyph is correct
              if the preceding glyph is a roman glyph.  It is a good idea to
              use this escape sequence whenever a roman glyph is immediately
              followed by an italic glyph without any intervening space.

       <b>\)     </b>Like <b>\&amp; </b>except that it behaves like a character declared with
              the <b>cflags </b>request to be transparent for the purposes of end-
              of-sentence recognition.

       <b>\~     </b>This produces an unbreakable space that stretches like a nor‐
              mal inter-word space when a line is adjusted.

       <b>\:     </b>This causes the insertion of a zero-width break point.  It is
              equal to <b>\% </b>within a word but without insertion of a soft
              hyphen glyph.

       <b>\#     </b>Everything up to and including the next newline is ignored.
              This is interpreted in copy mode.  It is like <b>\" </b>except that
              <b>\" </b>does not ignore the terminating newline.

   <b>New requests</b>
       <b>.aln </b><i>xx yy</i>
              Create an alias <i>xx</i> for number register object named <i>yy</i>.  The
              new name and the old name are exactly equivalent.  If <i>yy</i> is
              undefined, a warning of type <b>reg </b>is generated, and the request
              is ignored.

       <b>.als </b><i>xx yy</i>
              Create an alias <i>xx</i> for request, string, macro, or diversion
              object named <i>yy</i>.  The new name and the old name are exactly
              equivalent (it is similar to a hard rather than a soft link).
              If <i>yy</i> is undefined, a warning of type <b>mac </b>is generated, and
              the request is ignored.  The <b>de</b>, <b>am</b>, <b>di</b>, <b>da</b>, <b>ds</b>, and <b>as</b>
              requests only create a new object if the name of the macro,
              diversion or string is currently undefined or if it is defined
              to be a request; normally they modify the value of an existing
              object.

       <b>.am1 </b><i>xx yy</i>
              Similar to <b>.am</b>, but compatibility mode is switched off during
              execution.  To be more precise, a ‘compatibility save’ token
              is inserted at the beginning of the macro addition, and a
              ‘compatibility restore’ token at the end.  As a consequence,
              the requests <b>am</b>, <b>am1</b>, <b>de</b>, and <b>de1 </b>can be intermixed freely
              since the compatibility save/restore tokens only affect the
              macro parts defined by <b>.am1 </b>and <b>.ds1</b>.

       <b>.ami </b><i>xx yy</i>
              Append to macro indirectly.  See the <b>dei </b>request below for
              more information.

       <b>.ami1 </b><i>xx yy</i>
              Same as the <b>ami </b>request but compatibility mode is switched off
              during execution.

       <b>.as1 </b><i>xx yy</i>
              Similar to <b>.as</b>, but compatibility mode is switched off during
              expansion.  To be more precise, a ‘compatibility save’ token
              is inserted at the beginning of the string, and a ‘compatibil‐
              ity restore’ token at the end.  As a consequence, the requests
              <b>as</b>, <b>as1</b>, <b>ds</b>, and <b>ds1 </b>can be intermixed freely since the com‐
              patibility save/restore tokens only affect the (sub)strings
              defined by <b>as1 </b>and <b>ds1</b>.

       <b>.asciify </b><i>xx</i>
              This request ‘unformats’ the diversion <i>xx</i> in such a way that
              ASCII and space characters (and some escape sequences) that
              were formatted and diverted into <i>xx</i> are treated like ordinary
              input characters when <i>xx</i> is reread.  Useful for diversions in
              conjunction with the <b>writem </b>request.  It can be also used for
              gross hacks; for example, this

                     .tr @.
                     .di x
                     @nr n 1
                     .br
                     .di
                     .tr @@
                     .asciify x
                     .x

              sets register <b>n </b>to 1.  Note that glyph information (font, font
              size, etc.) is not preserved; use <b>.unformat </b>instead.

       <b>.backtrace</b>
              Print a backtrace of the input stack on stderr.

       <b>.blm </b><i>xx</i>
              Set the blank line macro to <i>xx</i>.  If there is a blank line
              macro, it is invoked when a blank line is encountered instead
              of the usual troff behaviour.

       <b>.box </b><i>xx</i>
       <b>.boxa </b><i>xx</i>
              These requests are similar to the <b>di </b>and <b>da </b>requests with the
              exception that a partially filled line does not become part of
              the diversion (i.e., the diversion always starts with a new
              line) but is restored after ending the diversion, discarding
              the partially filled line which possibly comes from the diver‐
              sion.

       <b>.break </b>Break out of a while loop.  See also the <b>while </b>and <b>continue</b>
              requests.  Be sure not to confuse this with the <b>br </b>request.

       <b>.brp   </b>This is the same as <b>\p</b>.

       <b>.cflags </b><i>n c1 c2 ...</i>
              Characters <i>c1</i>, <i>c2</i>, <i>...</i>, have properties determined by <i>n</i>, which
              is ORed from the following:

              1      The character ends sentences (initially characters <b>.?!</b>
                     have this property).

              2      Lines can be broken before the character (initially no
                     characters have this property); a line is not broken at
                     a character with this property unless the characters on
                     each side both have non-zero hyphenation codes.  This
                     can be overridden with value 64.

              4      Lines can be broken after the character (initially
                     characters <b>-\[hy]\[em] </b>have this property); a line is
                     not broken at a character with this property unless the
                     characters on each side both have non-zero hyphenation
                     codes.  This can be overridden with value 64.

              8      The glyph associated with this character overlaps hori‐
                     zontally (initially characters <b>\[ul]\[rn]\[ru]\[radi‐</b>
                     <b>calex]\[sqrtex] </b>have this property).

              16     The glyph associated with this character overlaps ver‐
                     tically (initially glyph <b>\[br] </b>has this property).

              32     An end-of-sentence character followed by any number of
                     characters with this property is treated as the end of
                     a sentence if followed by a newline or two spaces; in
                     other words the character is transparent for the pur‐
                     poses of end-of-sentence recognition; this is the same
                     as having a zero space factor in TeX (initially charac‐
                     ters <b>"')]*\[dg]\[rq]\[cq] </b>have this property).

              64     Ignore hyphenation code values of the surrounding char‐
                     acters.  Use this in combination with values 2 and 4
                     (initially no characters have this property).

              128    Prohibit a line break before the character, but allow a
                     line break after the character.  This works only in
                     combination with flags 256 and 512 and has no effect
                     otherwise.

              256    Prohibit a line break after the character, but allow a
                     line break before the character.  This works only in
                     combination with flags 128 and 512 and has no effect
                     otherwise.

              512    Allow line break before or after the character.  This
                     works only in combination with flags 128 and 256 and
                     has no effect otherwise.

              Contrary to flag values 2 and 4, the flags 128, 256, and 512
              work pairwise.  If, for example, the left character has value
              512, and the right character 128, no line break gets inserted.
              If we use value 6 instead for the left character, a line break
              after the character can't be suppressed since the right neigh‐
              bour character doesn't get examined.

       <b>.char </b><i>c string</i>
              [This request can both define characters and glyphs.]

              Define entity <i>c</i> to be <i>string</i>.  To be more precise, define (or
              even override) a groff entity which can be accessed with
              name <i>c</i> on the input side, and which uses <i>string</i> on the output
              side.  Every time glyph <i>c</i> needs to be printed, <i>string</i> is pro‐
              cessed in a temporary environment and the result is wrapped up
              into a single object.  Compatibility mode is turned off and
              the escape character is set to <b>\ </b>while <i>string</i> is being pro‐
              cessed.  Any emboldening, constant spacing or track kerning is
              applied to this object rather than to individual glyphs in
              <i>string</i>.

              A groff object defined by this request can be used just like a
              normal glyph provided by the output device.  In particular
              other characters can be translated to it with the <b>tr </b>request;
              it can be made the leader glyph by the <b>lc </b>request; repeated
              patterns can be drawn with the glyph using the <b>\l </b>and <b>\L</b>
              escape sequences; words containing <i>c</i> can be hyphenated cor‐
              rectly, if the <b>hcode </b>request is used to give the object a
              hyphenation code.

              There is a special anti-recursion feature: Use of glyph within
              the glyph's definition is handled like normal glyphs not
              defined with <b>char</b>.

              A glyph definition can be removed with the <b>rchar </b>request.

       <b>.chop </b><i>xx</i>
              Chop the last element off macro, string, or diversion <i>xx</i>.
              This is useful for removing the newline from the end of diver‐
              sions that are to be interpolated as strings.

       <b>.class </b><i>name c1 c2 ...</i>
              Assign <i>name</i> to a set of characters <i>c1</i>, <i>c2</i>, <i>...</i>, so that they
              can be referred to from other requests easily (currently
              <b>.cflags </b>only).  Character ranges (indicated by an intermediate
              ‘-’) and nested classes are possible also.  This is useful to
              assign properties to a large set of characters.

       <b>.close </b><i>stream</i>
              Close the stream named <i>stream</i>; <i>stream</i> will no longer be an
              acceptable argument to the <b>write </b>request.  See the <b>open</b>
              request.

       <b>.composite </b><i>glyph1 glyph2</i>
              Map glyph name <i>glyph1</i> to glyph name <i>glyph2</i> if it is used in
              <b>\[</b><i>...</i><b>] </b>with more than one component.

       <b>.continue</b>
              Finish the current iteration of a while loop.  See also the
              <b>while </b>and <b>break </b>requests.

       <b>.color </b><i>n</i>
              If <i>n</i> is non-zero or missing, enable colors (this is the
              default), otherwise disable them.

       <b>.cp </b><i>n</i>  If <i>n</i> is non-zero or missing, enable compatibility mode, other‐
              wise disable it.  In compatibility mode, long names are not
              recognized, and the incompatibilities caused by long names do
              not arise.

       <b>.defcolor </b><i>xxx scheme color_components</i>
              Define color <i>xxx</i>.  <i>scheme</i> can be one of the following values:
              <b>rgb </b>(three components), <b>cmy </b>(three components), <b>cmyk </b>(four
              components), and <b>gray </b>or <b>grey </b>(one component).  Color compo‐
              nents can be given either as a hexadecimal string or as posi‐
              tive decimal integers in the range 0–65535.  A hexadecimal
              string contains all color components concatenated; it must
              start with either <b># </b>or <b>##</b>.  The former specifies hex values in
              the range 0–255 (which are internally multiplied by 257), the
              latter in the range 0–65535.  Examples: #FFC0CB (pink),
              ##ffff0000ffff (magenta).  A new scaling indicator <b>f </b>has been
              introduced which multiplies its value by 65536; this makes it
              convenient to specify color components as fractions in the
              range 0 to 1.  Example:

                     .defcolor darkgreen rgb 0.1f 0.5f 0.2f

              Note that <b>f </b>is the default scaling indicator for the <b>defcolor</b>
              request, thus the above statement is equivalent to

                     .defcolor darkgreen rgb 0.1 0.5 0.2

              The color named <b>default </b>(which is device-specific) can't be
              redefined.  It is possible that the default color for <b>\M </b>and
              <b>\m </b>is not the same.

       <b>.de1 </b><i>xx yy</i>
              Similar to <b>.de</b>, but compatibility mode is switched off during
              execution.  On entry, the current compatibility mode is saved
              and restored at exit.

       <b>.dei </b><i>xx yy</i>
              Define macro indirectly.  The following example

                     .ds xx aa
                     .ds yy bb
                     .dei xx yy

              is equivalent to

                     .de aa bb

       <b>.dei1 </b><i>xx yy</i>
              Similar to the <b>dei </b>request but compatibility mode is switched
              off during execution.

       <b>.device </b><i>anything</i>
              This is (almost) the same as the <b>\X </b>escape.  <i>anything</i> is read
              in copy mode; a leading <b>" </b>is stripped.

       <b>.devicem </b><i>xx</i>
              This is the same as the <b>\Y </b>escape (to embed the contents of a
              macro into the intermediate output preceded with ‘x X’).

       <b>.do </b><i>xxx</i>
              Interpret <i>.xxx</i> with compatibility mode disabled.  For example,

                     .do fam T

              would have the same effect as

                     .fam T

              except that it would work even if compatibility mode had been
              enabled.  Note that the previous compatibility mode is
              restored before any files sourced by <i>xxx</i> are interpreted.

       <b>.ds1 </b><i>xx yy</i>
              Similar to <b>.ds</b>, but compatibility mode is switched off during
              expansion.  To be more precise, a ‘compatibility save’ token
              is inserted at the beginning of the string, and a ‘compatibil‐
              ity restore’ token at the end.

       <b>.ecs   </b>Save current escape character.

       <b>.ecr   </b>Restore escape character saved with <b>ecs</b>.  Without a previous
              call to <b>ecs</b>, ‘<b>\</b>’ will be the new escape character.

       <b>.evc </b><i>xx</i>
              Copy the contents of environment <i>xx</i> to the current environ‐
              ment.  No pushing or popping of environments is done.

       <b>.fam </b><i>xx</i>
              Set the current font family to <i>xx</i>.  The current font family is
              part of the current environment.  If <i>xx</i> is missing, switch
              back to previous font family.  The value at start-up is ‘T’.
              See the description of the <b>sty </b>request for more information on
              font families.

       <b>.fchar </b><i>c string</i>
              Define fallback character (or glyph) <i>c</i> to be <i>string</i>.  The syn‐
              tax of this request is the same as the <b>char </b>request; the only
              difference is that a glyph defined with <b>char </b>hides the glyph
              with the same name in the current font, whereas a glyph
              defined with <b>fchar </b>is checked only if the particular glyph
              isn't found in the current font.  This test happens before
              checking special fonts.

       <b>.fcolor </b><i>c</i>
              Set the fill color to <i>c</i>.  If <i>c</i> is missing, switch to the pre‐
              vious fill color.

       <b>.fschar </b><i>f c string</i>
              Define fallback character (or glyph) <i>c</i> for font <i>f</i> to be
              <i>string</i>.  The syntax of this request is the same as the <b>char</b>
              request (with an additional argument to specify the font); a
              glyph defined with <b>fschar </b>is searched after the list of fonts
              declared with the <b>fspecial </b>request but before the list of
              fonts declared with <b>.special</b>.

       <b>.fspecial </b><i>f s1 s2 ...</i>
              When the current font is <i>f</i>, fonts <i>s1</i>, <i>s2</i>, <i>...</i>, are special,
              that is, they are searched for glyphs not in the current font.
              Any fonts specified in the <b>special </b>request are searched after
              fonts specified in the <b>fspecial </b>request.  Without argument,
              reset the list of global special fonts to be empty.

       <b>.ftr </b><i>f g</i>
              Translate font <i>f</i> to <i>g</i>.  Whenever a font named <i>f</i> is referred to
              in an <b>\f </b>escape sequence, in the <b>F </b>and <b>S </b>conditional opera‐
              tors, or in the <b>ft</b>, <b>ul</b>, <b>bd</b>, <b>cs</b>, <b>tkf</b>, <b>special</b>, <b>fspecial</b>, <b>fp</b>, or
              <b>sty </b>requests, font <i>g</i> is used.  If <i>g</i> is missing, or equal to <i>f</i>
              then font <i>f</i> is not translated.

       <b>.fzoom </b><i>f zoom</i>
              Set zoom factor <i>zoom</i> for font <i>f</i>.  <i>zoom</i> must a non-negative
              integer multiple of 1/1000th.  If it is missing or is equal to
              zero, it means the same as 1000, namely no magnification.
              <i>f</i> must be a real font name, not a style.

       <b>.gcolor </b><i>c</i>
              Set the glyph color to <i>c</i>.  If <i>c</i> is missing, switch to the pre‐
              vious glyph color.

       <b>.hcode </b><i>c1 code1 c2 code2 ...</i>
              Set the hyphenation code of character <i>c1</i> to <i>code1</i> and that of
              <i>c2</i> to <i>code2</i>, and so on.  A hyphenation code must be a single
              input character (not a special character) other than a digit
              or a space.  Initially each lower-case letter a–z has a
              hyphenation code, which is itself, and each upper-case letter
              A–Z has a hyphenation code which is the lower-case version of
              itself.  See also the <b>hpf </b>request.

       <b>.hla </b><i>lang</i>
              Set the current hyphenation language to <i>lang</i>.  Hyphenation
              exceptions specified with the <b>hw </b>request and hyphenation pat‐
              terns specified with the <b>hpf </b>request are both associated with
              the current hyphenation language.  The <b>hla </b>request is usually
              invoked by the <b>troffrc </b>file to set up a default language.

       <b>.hlm </b><i>n</i> Set the maximum number of consecutive hyphenated lines to <i>n</i>.
              If <i>n</i> is negative, there is no maximum.  The default value
              is -1.  This value is associated with the current environment.
              Only lines output from an environment count towards the maxi‐
              mum associated with that environment.  Hyphens resulting from
              <b>\% </b>are counted; explicit hyphens are not.

       <b>.hpf </b><i>file</i>
              Read hyphenation patterns from <i>file</i>; this is searched for in
              the same way that <i>name</i><b>.tmac </b>is searched for when the <b>-m</b><i>name</i>
              option is specified.  It should have the same format as (sim‐
              ple) TeX patterns files.  More specifically, the following
              scanning rules are implemented.

              ·      A percent sign starts a comment (up to the end of the
                     line) even if preceded by a backslash.

              ·      No support for ‘digraphs’ like <b>\$</b>.

              ·      <b>^^</b><i>xx</i> (<i>x</i> is 0–9 or a–f) and <b>^^</b><i>x</i> (character code of <i>x</i> in
                     the range 0–127) are recognized; other use of <b>^ </b>causes
                     an error.

              ·      No macro expansion.

              ·      <b>hpf </b>checks for the expression <b>\patterns{</b>...<b>} </b>(possibly
                     with whitespace before and after the braces).  Every‐
                     thing between the braces is taken as hyphenation pat‐
                     terns.  Consequently, <b>{ </b>and <b>} </b>are not allowed in pat‐
                     terns.

              ·      Similarly, <b>\hyphenation{</b>...<b>} </b>gives a list of hyphen‐
                     ation exceptions.

              ·      <b>\endinput </b>is recognized also.

              ·      For backwards compatibility, if <b>\patterns </b>is missing,
                     the whole file is treated as a list of hyphenation pat‐
                     terns (only recognizing the <b>% </b>character as the start of
                     a comment).

              Use the <b>hpfcode </b>request to map the encoding used in hyphen‐
              ation patterns files to <b>groff</b>'s input encoding.  By default,
              everything maps to itself except letters ‘A’ to ‘Z’ which map
              to ‘a’ to ‘z’.

              The set of hyphenation patterns is associated with the current
              language set by the <b>hla </b>request.  The <b>hpf </b>request is usually
              invoked by the <b>troffrc </b>file; a second call replaces the old
              patterns with the new ones.

       <b>.hpfa </b><i>file</i>
              The same as <b>hpf </b>except that the hyphenation patterns from <i>file</i>
              are appended to the patterns already loaded in the current
              language.

       <b>.hpfcode </b><i>a b c d ...</i>
              After reading a hyphenation patterns file with the <b>hpf </b>or <b>hpfa</b>
              request, convert all characters with character code <i>a</i> in the
              recently read patterns to character code <i>b</i>, character code <i>c</i>
              to <i>d</i>, etc.  Initially, all character codes map to themselves.
              The arguments of <b>hpfcode </b>must be integers in the range 0
              to 255.  Note that it is even possible to use character codes
              which are invalid in <b>groff </b>otherwise.

       <b>.hym </b><i>n</i> Set the <i>hyphenation margin</i> to <i>n</i>: when the current adjustment
              mode is not <b>b</b>, the line is not hyphenated if the line is no
              more than <i>n</i> short.  The default hyphenation margin is 0.  The
              default scaling indicator for this request is <b>m</b>.  The hyphen‐
              ation margin is associated with the current environment.  The
              current hyphenation margin is available in the <b>\n[.hym] </b>regis‐
              ter.

       <b>.hys </b><i>n</i> Set the <i>hyphenation space</i> to <i>n</i>: When the current adjustment
              mode is <b>b </b>don't hyphenate the line if the line can be justi‐
              fied by adding no more than <i>n</i> extra space to each word space.
              The default hyphenation space is 0.  The default scaling indi‐
              cator for this request is <b>m</b>.  The hyphenation space is associ‐
              ated with the current environment.  The current hyphenation
              space is available in the <b>\n[.hys] </b>register.

       <b>.itc </b><i>n macro</i>
              Variant of <b>.it </b>for which a line interrupted with <b>\c </b>counts as
              one input line.

       <b>.kern </b><i>n</i>
              If <i>n</i> is non-zero or missing, enable pairwise kerning, other‐
              wise disable it.

       <b>.length </b><i>xx string</i>
              Compute the length of <i>string</i> and return it in the number reg‐
              ister <i>xx</i> (which is not necessarily defined before).

       <b>.linetabs </b><i>n</i>
              If <i>n</i> is non-zero or missing, enable line-tabs mode, otherwise
              disable it (which is the default).  In line-tabs mode, tab
              distances are computed relative to the (current) output line.
              Otherwise they are taken relative to the input line.  For
              example, the following

                     .ds x a\t\c
                     .ds y b\t\c
                     .ds z c
                     .ta 1i 3i
                     \*x
                     \*y
                     \*z

              yields

                     a         b         c

              In line-tabs mode, the same code gives

                     a         b                   c

              Line-tabs mode is associated with the current environment; the
              read-only number register <b>\n[.linetabs] </b>is set to 1 if in
              line-tabs mode, and 0 otherwise.

       <b>.lsm </b><i>xx</i>
              Set the leading spaces macro to <i>xx</i>.  If there are leading spa‐
              ces in an input line, it is invoked instead of the usual troff
              behaviour; the leading spaces are removed.  Registers <b>\n[lsn]</b>
              and <b>\n[lss] </b>hold the number of removed leading spaces and the
              corresponding horizontal space, respectively.

       <b>.mso </b><i>file</i>
              The same as the <b>so </b>request except that <i>file</i> is searched for in
              the same directories as macro files for the the <b>-m </b>command
              line option.  If the file name to be included has the form
              <i>name</i><b>.tmac </b>and it isn't found, <b>mso </b>tries to include <b>tmac.</b><i>name</i>
              instead and vice versa.  A warning of type <b>file </b>is generated
              if <i>file</i> can't be loaded, and the request is ignored.

       <b>.nop </b><i>anything</i>
              Execute <i>anything</i>.  This is similar to ‘.if 1’.

       <b>.nroff </b>Make the <b>n </b>built-in condition true and the <b>t </b>built-in condi‐
              tion false.  This can be reversed using the <b>troff </b>request.

       <b>.open </b><i>stream filename</i>
              Open <i>filename</i> for writing and associate the stream named
              <i>stream</i> with it.  See also the <b>close </b>and <b>write </b>requests.

       <b>.opena </b><i>stream filename</i>
              Like <b>open</b>, but if <i>filename</i> exists, append to it instead of
              truncating it.

       <b>.output </b><i>string</i>
              Emit <i>string</i> directly to the intermediate output (subject to
              copy-mode interpretation); this is similar to <b>\! </b>used at the
              top level.  An initial double quote in <i>string</i> is stripped off
              to allow initial blanks.

       <b>.pev   </b>Print the current environment and each defined environment
              state on stderr.

       <b>.pnr   </b>Print the names and contents of all currently defined number
              registers on stderr.

       <b>.psbb </b><i>filename</i>
              Get the bounding box of a PostScript image <i>filename</i>.  This
              file must conform to Adobe's Document Structuring Conventions;
              the command looks for a <b>%%BoundingBox </b>comment to extract the
              bounding box values.  After a successful call, the coordinates
              (in PostScript units) of the lower left and upper right corner
              can be found in the registers <b>\n[llx]</b>, <b>\n[lly]</b>, <b>\n[urx]</b>, and
              <b>\n[ury]</b>, respectively.  If some error has occurred, the four
              registers are set to zero.

       <b>.pso </b><i>command</i>
              This behaves like the <b>so </b>request except that input comes from
              the standard output of <i>command</i>.

       <b>.ptr   </b>Print the names and positions of all traps (not including
              input line traps and diversion traps) on stderr.  Empty slots
              in the page trap list are printed as well, because they can
              affect the priority of subsequently planted traps.

       <b>.pvs </b><i>±n</i>
              Set the post-vertical line space to <i>n</i>; default scale indicator
              is <b>p</b>.  This value is added to each line after it has been out‐
              put.  With no argument, the post-vertical line space is set to
              its previous value.

              The total vertical line spacing consists of four components:
              <b>.vs </b>and <b>\x </b>with a negative value which are applied before the
              line is output, and <b>.pvs </b>and <b>\x </b>with a positive value which
              are applied after the line is output.

       <b>.rchar </b><i>c1 c2 ...</i>
              Remove the definitions of glyphs <i>c1</i>, <i>c2</i>, <i>...</i> This undoes the
              effect of a <b>char </b>request.

       <b>.return</b>
              Within a macro, return immediately.  If called with an argu‐
              ment, return twice, namely from the current macro and from the
              macro one level higher.  No effect otherwise.

       <b>.rfschar </b><i>c1 c2 ...</i>
              Remove the font-specific definitions of glyphs <i>c1</i>, <i>c2</i>, <i>...</i>
              This undoes the effect of a <b>fschar </b>request.

       <b>.rj</b>
       <b>.rj </b><i>n</i>  Right justify the next <i>n</i> input lines.  Without an argument
              right justify the next input line.  The number of lines to be
              right justified is available in the <b>\n[.rj] </b>register.  This
              implicitly does <b>.ce 0</b>.  The <b>ce </b>request implicitly does <b>.rj 0</b>.

       <b>.rnn </b><i>xx yy</i>
              Rename number register <i>xx</i> to <i>yy</i>.

       <b>.schar </b><i>c string</i>
              Define global fallback character (or glyph) <i>c</i> to be <i>string</i>.
              The syntax of this request is the same as the <b>char </b>request; a
              glyph defined with <b>schar </b>is searched after the list of fonts
              declared with the <b>special </b>request but before the mounted spe‐
              cial fonts.

       <b>.shc </b><i>c</i> Set the soft hyphen character to <i>c</i>.  If <i>c</i> is omitted, the soft
              hyphen character is set to the default <b>\[hy]</b>.  The soft hyphen
              character is the glyph which is inserted when a word is
              hyphenated at a line break.  If the soft hyphen character does
              not exist in the font of the glyph immediately preceding a
              potential break point, then the line is not broken at that
              point.  Neither definitions (specified with the <b>char </b>request)
              nor translations (specified with the <b>tr </b>request) are consid‐
              ered when finding the soft hyphen character.

       <b>.shift </b><i>n</i>
              In a macro, shift the arguments by <i>n</i> positions: argument <i>i</i>
              becomes argument <i>i</i>-<i>n</i>; arguments 1 to <i>n</i> are no longer avail‐
              able.  If <i>n</i> is missing, arguments are shifted by 1.  Shifting
              by negative amounts is currently undefined.

       <b>.sizes </b><i>s1 s2 ... sn</i> <b>[0]</b>
              This command is similar to the <b>sizes </b>command of a <b>DESC </b>file.
              It sets the available font sizes for the current font to <i>s1</i>,
              <i>s2</i>, <i>...</i>, <i>sn</i> scaled points.  The list of sizes can be termi‐
              nated by an optional <b>0</b>.  Each <i>si</i> can also be a range of sizes
              <i>m</i>–<i>n</i>.  Contrary to the font file command, the list can't extend
              over more than a single line.

       <b>.special </b><i>s1 s2 ...</i>
              Fonts <i>s1</i>, <i>s2</i>, <i>...</i>, are special and are searched for glyphs not
              in the current font.  Without arguments, reset the list of
              special fonts to be empty.

       <b>.spreadwarn </b><i>limit</i>
              Make <b>troff </b>emit a warning if the additional space inserted for
              each space between words in an output line is larger or equal
              to <i>limit</i>.  A negative value is changed to zero; no argument
              toggles the warning on and off without changing <i>limit</i>.  The
              default scaling indicator is <b>m</b>.  At startup, <b>spreadwarn </b>is
              deactivated, and <i>limit</i> is set to 3m.  For example, <b>.spread‐</b>
              <b>warn 0.2m </b>causes a warning if <b>troff </b>must add 0.2m or more for
              each interword space in a line.  This request is active only
              if text is justified to both margins (using <b>.ad b</b>).

       <b>.sty </b><i>n f</i>
              Associate style <i>f</i> with font position <i>n</i>.  A font position can
              be associated either with a font or with a style.  The current
              font is the index of a font position and so is also either a
              font or a style.  When it is a style, the font that is actu‐
              ally used is the font the name of which is the concatenation
              of the name of the current family and the name of the current
              style.  For example, if the current font is 1 and font posi‐
              tion 1 is associated with style <b>R </b>and the current font family
              is <b>T</b>, then font <b>TR </b>is used.  If the current font is not a
              style, then the current family is ignored.  When the requests
              <b>cs</b>, <b>bd</b>, <b>tkf</b>, <b>uf</b>, or <b>fspecial </b>are applied to a style, then they
              are applied instead to the member of the current family corre‐
              sponding to that style.  The default family can be set with
              the <b>-f </b>command line option.  The <b>styles </b>command in the DESC
              file controls which font positions (if any) are initially
              associated with styles rather than fonts.

       <b>.substring </b><i>xx n1</i> <b>[</b><i>n2</i><b>]</b>
              Replace the string named <i>xx</i> with the substring defined by the
              indices <i>n1</i> and <i>n2</i>.  The first character in the string has
              index 0.  If <i>n2</i> is omitted, it is taken to be equal to the
              string's length.  If the index value <i>n1</i> or <i>n2</i> is negative, it
              is counted from the end of the string, going backwards: The
              last character has index -1, the character before the last
              character has index -2, etc.

       <b>.tkf </b><i>f s1 n1 s2 n2</i>
              Enable track kerning for font <i>f</i>.  When the current font is <i>f</i>
              the width of every glyph is increased by an amount between <i>n1</i>
              and <i>n2</i>; when the current point size is less than or equal to
              <i>s1</i> the width is increased by <i>n1</i>; when it is greater than or
              equal to <i>s2</i> the width is increased by <i>n2</i>; when the point size
              is greater than or equal to <i>s1</i> and less than or equal to <i>s2</i>
              the increase in width is a linear function of the point size.

       <b>.tm1 </b><i>string</i>
              Similar to the <b>tm </b>request, <i>string</i> is read in copy mode and
              written on the standard error, but an initial double quote in
              <i>string</i> is stripped off to allow initial blanks.

       <b>.tmc </b><i>string</i>
              Similar to <b>tm1 </b>but without writing a final newline.

       <b>.trf </b><i>filename</i>
              Transparently output the contents of file <i>filename</i>.  Each line
              is output as if preceded by <b>\!</b>; however, the lines are not
              subject to copy-mode interpretation.  If the file does not end
              with a newline, then a newline is added.  For example, you can
              define a macro <i>x</i> containing the contents of file <i>f</i>, using

                     .di x
                     .trf f
                     .di

              Unlike with the <b>cf </b>request, the file cannot contain characters
              such as NUL that are not valid troff input characters.

       <b>.trin </b><i>abcd</i>
              This is the same as the <b>tr </b>request except that the <b>asciify</b>
              request uses the character code (if any) before the character
              translation.  Example:

                     .trin ax
                     .di xxx
                     a
                     .br
                     .di
                     .xxx
                     .trin aa
                     .asciify xxx
                     .xxx

              The result is <b>x a</b>.  Using <b>tr</b>, the result would be <b>x x</b>.

       <b>.trnt </b><i>abcd</i>
              This is the same as the <b>tr </b>request except that the transla‐
              tions do not apply to text that is transparently throughput
              into a diversion with <b>\!</b>.  For example,

                     .tr ab
                     .di x
                     \!.tm a
                     .di
                     .x

              prints <b>b</b>; if <b>trnt </b>is used instead of <b>tr </b>it prints <b>a</b>.

       <b>.troff </b>Make the <b>n </b>built-in condition false, and the <b>t </b>built-in condi‐
              tion true.  This undoes the effect of the <b>nroff </b>request.

       <b>.unformat </b><i>xx</i>
              This request ‘unformats’ the diversion <i>xx</i>.  Contrary to the
              <b>asciify </b>request, which tries to convert formatted elements of
              the diversion back to input tokens as much as possible,
              <b>.unformat </b>only handles tabs and spaces between words (usually
              caused by spaces or newlines in the input) specially.  The
              former are treated as if they were input tokens, and the lat‐
              ter are stretchable again.  Note that the vertical size of
              lines is not preserved.  Glyph information (font, font size,
              space width, etc.) is retained.  Useful in conjunction with
              the <b>box </b>and <b>boxa </b>requests.

       <b>.vpt </b><i>n</i> Enable vertical position traps if <i>n</i> is non-zero, disable them
              otherwise.  Vertical position traps are traps set by the <b>wh </b>or
              <b>dt </b>requests.  Traps set by the <b>it </b>request are not vertical
              position traps.  The parameter that controls whether vertical
              position traps are enabled is global.  Initially vertical
              position traps are enabled.

       <b>.warn </b><i>n</i>
              Control warnings.  <i>n</i> is the sum of the numbers associated with
              each warning that is to be enabled; all other warnings are
              disabled.  The number associated with each warning is listed
              in <a href="../man1/troff.1.html">troff(1)</a>.  For example, <b>.warn 0 </b>disables all warnings, and
              <b>.warn 1 </b>disables all warnings except that about missing
              glyphs.  If <i>n</i> is not given, all warnings are enabled.

       <b>.warnscale </b><i>si</i>
              Set the scaling indicator used in warnings to <i>si</i>.  Valid val‐
              ues for <i>si</i> are <b>u</b>, <b>i</b>, <b>c</b>, <b>p</b>, and <b>P</b>.  At startup, it is set to <b>i</b>.

       <b>.while </b><i>c anything</i>
              While condition <i>c</i> is true, accept <i>anything</i> as input; <i>c</i> can be
              any condition acceptable to an <b>if </b>request; <i>anything</i> can com‐
              prise multiple lines if the first line starts with <b>\{ </b>and the
              last line ends with <b>\}</b>.  See also the <b>break </b>and <b>continue</b>
              requests.

       <b>.write </b><i>stream anything</i>
              Write <i>anything</i> to the stream named <i>stream</i>.  <i>stream</i> must previ‐
              ously have been the subject of an <b>open </b>request.  <i>anything</i> is
              read in copy mode; a leading <b>" </b>is stripped.

       <b>.writec </b><i>stream anything</i>
              Similar to <b>write </b>but without writing a final newline.

       <b>.writem </b><i>stream xx</i>
              Write the contents of the macro or string <i>xx</i> to the stream
              named <i>stream</i>.  <i>stream</i> must previously have been the subject of
              an <b>open </b>request.  <i>xx</i> is read in copy mode.

   <b>Extended escape sequences</b>
       <b>\D'</b>...<b>'</b>
              All drawing commands of groff's intermediate output are
              accepted.  See subsection <b>Drawing Commands </b>below for more
              information.

   <b>Extended requests</b>
       <b>.cf </b><i>filename</i>
              When used in a diversion, this embeds in the diversion an
              object which, when reread, will cause the contents of <i>filename</i>
              to be transparently copied through to the output.  In UNIX
              troff, the contents of <i>filename</i> is immediately copied through
              to the output regardless of whether there is a current diver‐
              sion; this behaviour is so anomalous that it must be consid‐
              ered a bug.

       <b>.de </b><i>xx yy</i>
       <b>.am </b><i>xx yy</i>
       <b>.ds </b><i>xx yy</i>
       <b>.as </b><i>xx yy</i>
              In compatibility mode, these requests behaves similar to <b>.de1</b>,
              <b>.am1</b>, <b>.ds1</b>, and <b>.as1</b>, respectively: A ‘compatibility save’
              token is inserted at the beginning, and a ‘compatibility
              restore’ token at the end, with compatibility mode switched on
              during execution.

       <b>.ev </b><i>xx</i> If <i>xx</i> is not a number, this switches to a named environment
              called <i>xx</i>.  The environment should be popped with a matching
              <b>ev </b>request without any arguments, just as for numbered envi‐
              ronments.  There is no limit on the number of named environ‐
              ments; they are created the first time that they are refer‐
              enced.

       <b>.ss </b><i>m n</i>
              When two arguments are given to the <b>ss </b>request, the second
              argument gives the <i>sentence space size</i>.  If the second argu‐
              ment is not given, the sentence space size is the same as the
              word space size.  Like the word space size, the sentence space
              is in units of one twelfth of the spacewidth parameter for the
              current font.  Initially both the word space size and the sen‐
              tence space size are 12.  Contrary to UNIX troff, GNU troff
              handles this request in nroff mode also; a given value is then
              rounded down to the nearest multiple of 12.  The sentence
              space size is used in two circumstances.  If the end of a sen‐
              tence occurs at the end of a line in fill mode, then both an
              inter-word space and a sentence space are added; if two spaces
              follow the end of a sentence in the middle of a line, then the
              second space is a sentence space.  Note that the behaviour of
              UNIX troff are exactly that exhibited by GNU troff if a second
              argument is never given to the <b>ss </b>request.  In GNU troff, as
              in UNIX troff, you should always follow a sentence with either
              a newline or two spaces.

       <b>.ta </b><i>n1 n2 ... nn</i> <b>T </b><i>r1 r2 ... rn</i>
              Set tabs at positions <i>n1</i>, <i>n2</i>, <i>...</i>, <i>nn</i> and then set tabs at
              <i>nn</i>+<i>r1</i>, <i>nn</i>+<i>r2</i>, <i>...</i>, <i>nn</i>+<i>rn</i> and then at <i>nn</i>+<i>rn</i>+<i>r1</i>, <i>nn</i>+<i>rn</i>+<i>r2</i>, <i>...</i>,
              <i>nn</i>+<i>rn</i>+<i>rn</i>, and so on.  For example,

                     .ta T .5i

              sets tabs every half an inch.

   <b>New number registers</b>
       The following read-only registers are available:

       <b>\n[.br]</b>
              Within a macro call, it is set to 1 if the macro is called
              with the ‘normal’ control character (‘.’ by default), and set
              to 0 otherwise.  This allows to reliably modify requests.

                     .als bp*orig bp
                     .de bp
                     .tm before bp
                     .ie \\n[.br] .bp*orig
                     .el 'bp*orig
                     .tm after bp
                     ..

              Using this register outside of a macro makes no sense (it
              always returns zero in such cases).

       <b>\n[.C] </b>1 if compatibility mode is in effect, 0 otherwise.

       <b>\n[.cdp]</b>
              The depth of the last glyph added to the current environment.
              It is positive if the glyph extends below the baseline.

       <b>\n[.ce]</b>
              The number of lines remaining to be centered, as set by the <b>ce</b>
              request.

       <b>\n[.cht]</b>
              The height of the last glyph added to the current environment.
              It is positive if the glyph extends above the baseline.

       <b>\n[.color]</b>
              1 if colors are enabled, 0 otherwise.

       <b>\n[.csk]</b>
              The skew of the last glyph added to the current environment.
              The <i>skew</i> of a glyph is how far to the right of the center of a
              glyph the center of an accent over that glyph should be
              placed.

       <b>\n[.ev]</b>
              The name or number of the current environment.  This is a
              string-valued register.

       <b>\n[.fam]</b>
              The current font family.  This is a string-valued register.

       <b>\n[.fn]</b>
              The current (internal) real font name.  This is a string-val‐
              ued register.  If the current font is a style, the value of
              <b>\n[.fn] </b>is the proper concatenation of family and style name.

       <b>\n[.fp]</b>
              The number of the next free font position.

       <b>\n[.g] </b>Always 1.  Macros should use this to determine whether they
              are running under GNU troff.

       <b>\n[.height]</b>
              The current height of the font as set with <b>\H</b>.

       <b>\n[.hla]</b>
              The current hyphenation language as set by the <b>hla </b>request.

       <b>\n[.hlc]</b>
              The number of immediately preceding consecutive hyphenated
              lines.

       <b>\n[.hlm]</b>
              The maximum allowed number of consecutive hyphenated lines, as
              set by the <b>hlm </b>request.

       <b>\n[.hy]</b>
              The current hyphenation flags (as set by the <b>hy </b>request).

       <b>\n[.hym]</b>
              The current hyphenation margin (as set by the <b>hym </b>request).

       <b>\n[.hys]</b>
              The current hyphenation space (as set by the <b>hys </b>request).

       <b>\n[.in]</b>
              The indentation that applies to the current output line.

       <b>\n[.int]</b>
              Set to a positive value if last output line is interrupted
              (i.e., if it contains <b>\c</b>).

       <b>\n[.kern]</b>
              1 if pairwise kerning is enabled, 0 otherwise.

       <b>\n[.lg]</b>
              The current ligature mode (as set by the <b>lg </b>request).

       <b>\n[.linetabs]</b>
              The current line-tabs mode (as set by the <b>linetabs </b>request).

       <b>\n[.ll]</b>
              The line length that applies to the current output line.

       <b>\n[.lt]</b>
              The title length as set by the <b>lt </b>request.

       <b>\n[.m] </b>The name of the current drawing color.  This is a string-val‐
              ued register.

       <b>\n[.M] </b>The name of the current background color.  This is a string-
              valued register.

       <b>\n[.ne]</b>
              The amount of space that was needed in the last <b>ne </b>request
              that caused a trap to be sprung.  Useful in conjunction with
              the <b>\n[.trunc] </b>register.

       <b>\n[.ns]</b>
              1 if no-space mode is active, 0 otherwise.

       <b>\n[.O] </b>The current output level as set with <b>\O</b>.

       <b>\n[.P] </b>1 if the current page is in the output list set with <b>-o</b>.

       <b>\n[.pe]</b>
              1 during a page ejection caused by the <b>bp </b>request, 0 other‐
              wise.

       <b>\n[.pn]</b>
              The number of the next page, either the value set by a <b>pn</b>
              request, or the number of the current page plus 1.

       <b>\n[.ps]</b>
              The current point size in scaled points.

       <b>\n[.psr]</b>
              The last-requested point size in scaled points.

       <b>\n[.pvs]</b>
              The current post-vertical line space as set with the <b>pvs</b>
              request.

       <b>\n[.rj]</b>
              The number of lines to be right-justified as set by the <b>rj</b>
              request.

       <b>\n[.slant]</b>
              The slant of the current font as set with <b>\S</b>.

       <b>\n[.sr]</b>
              The last requested point size in points as a decimal fraction.
              This is a string-valued register.

       <b>\n[.ss]</b>
       <b>\n[.sss]</b>
              These give the values of the parameters set by the first and
              second arguments of the <b>ss </b>request.

       <b>\n[.sty]</b>
              The current font style.  This is a string-valued register.

       <b>\n[.tabs]</b>
              A string representation of the current tab settings suitable
              for use as an argument to the <b>ta </b>request.

       <b>\n[.trunc]</b>
              The amount of vertical space truncated by the most recently
              sprung vertical position trap, or, if the trap was sprung by a
              <b>ne </b>request, minus the amount of vertical motion produced by
              the <b>ne </b>request.  In other words, at the point a trap is
              sprung, it represents the difference of what the vertical
              position would have been but for the trap, and what the verti‐
              cal position actually is.  Useful in conjunction with the
              <b>\n[.ne] </b>register.

       <b>\n[.U] </b>Set to 1 if in safer mode and to 0 if in unsafe mode (as given
              with the <b>-U </b>command line option).

       <b>\n[.vpt]</b>
              1 if vertical position traps are enabled, 0 otherwise.

       <b>\n[.warn]</b>
              The sum of the numbers associated with each of the currently
              enabled warnings.  The number associated with each warning is
              listed in <a href="../man1/troff.1.html">troff(1)</a>.

       <b>\n[.x] </b>The major version number.  For example, if the version number
              is 1.03, then <b>\n[.x] </b>contains 1.

       <b>\n[.y] </b>The minor version number.  For example, if the version number
              is 1.03, then <b>\n[.y] </b>contains 03.

       <b>\n[.Y] </b>The revision number of groff.

       <b>\n[.zoom]</b>
              The zoom value of the current font, in multiples of 1/1000th.
              Zero if no magnification.

       <b>\n[llx]</b>
       <b>\n[lly]</b>
       <b>\n[urx]</b>
       <b>\n[ury]</b>
              These four read/write registers are set by the <b>psbb </b>request
              and contain the bounding box values (in PostScript units) of a
              given PostScript image.

       The following read/write registers are set by the <b>\w </b>escape sequence:

       <b>\n[rst]</b>
       <b>\n[rsb]</b>
              Like the <b>st </b>and <b>sb </b>registers, but take account of the heights
              and depths of glyphs.

       <b>\n[ssc]</b>
              The amount of horizontal space (possibly negative) that should
              be added to the last glyph before a subscript.

       <b>\n[skw]</b>
              How far to right of the center of the last glyph in the <b>\w</b>
              argument, the center of an accent from a roman font should be
              placed over that glyph.

       Other available read/write number registers are:

       <b>\n[c.] </b>The current input line number.  <b>\n[.c] </b>is a read-only alias to
              this register.

       <b>\n[hours]</b>
              The number of hours past midnight.  Initialized at start-up.

       <b>\n[hp] </b>The current horizontal position at input line.

       <b>\n[lsn]</b>
       <b>\n[lss]</b>
              If there are leading spaces in an input line, these registers
              hold the number of leading spaces and the corresponding hori‐
              zontal space, respectively.

       <b>\n[minutes]</b>
              The number of minutes after the hour.  Initialized at start-
              up.

       <b>\n[seconds]</b>
              The number of seconds after the minute.  Initialized at start-
              up.

       <b>\n[systat]</b>
              The return value of the system() function executed by the last
              <b>sy </b>request.

       <b>\n[slimit]</b>
              If greater than 0, the maximum number of objects on the input
              stack.  If less than or equal to 0, there is no limit on the
              number of objects on the input stack.  With no limit, recur‐
              sion can continue until virtual memory is exhausted.

       <b>\n[year]</b>
              The current year.  Note that the traditional <b>troff </b>number reg‐
              ister <b>\n[yr] </b>is the current year minus 1900.

   <b>Miscellaneous</b>
       <b>troff </b>predefines a single (read/write) string-based register, <b>\*[.T]</b>,
       which contains the argument given to the <b>-T </b>command line option,
       namely the current output device (for example, <i>latin1</i> or <i>ascii</i>).
       Note that this is not the same as the (read-only) number register
       <b>\n[.T] </b>which is defined to be 1 if <b>troff </b>is called with the <b>-T </b>com‐
       mand line option, and zero otherwise.  This behaviour is different to
       UNIX troff.

       Fonts not listed in the DESC file are automatically mounted on the
       next available font position when they are referenced.  If a font is
       to be mounted explicitly with the <b>fp </b>request on an unused font posi‐
       tion, it should be mounted on the first unused font position, which
       can be found in the <b>\n[.fp] </b>register; although <b>troff </b>does not enforce
       this strictly, it does not allow a font to be mounted at a position
       whose number is much greater than that of any currently used posi‐
       tion.

       Interpolating a string does not hide existing macro arguments.  Thus
       in a macro, a more efficient way of doing

              <b>.</b><i>xx</i> <b>\\$@</b>

       is

              <b>\\*[</b><i>xx</i><b>]\\</b>

       If the font description file contains pairwise kerning information,
       glyphs from that font are kerned.  Kerning between two glyphs can be
       inhibited by placing a <b>\&amp; </b>between them.

       In a string comparison in a condition, characters that appear at dif‐
       ferent input levels to the first delimiter character are not recog‐
       nized as the second or third delimiters.  This applies also to the <b>tl</b>
       request.  In a <b>\w </b>escape sequence, a character that appears at a dif‐
       ferent input level to the starting delimiter character is not recog‐
       nized as the closing delimiter character.  The same is true for <b>\A</b>,
       <b>\b</b>, <b>\B</b>, <b>\C</b>, <b>\l</b>, <b>\L</b>, <b>\o</b>, <b>\X</b>, and <b>\Z</b>.  When decoding a macro or string
       argument that is delimited by double quotes, a character that appears
       at a different input level to the starting delimiter character is not
       recognized as the closing delimiter character.  The implementation of
       <b>\$@ </b>ensures that the double quotes surrounding an argument appear at
       the same input level, which is different to the input level of the
       argument itself.  In a long escape name <b>] </b>is not recognized as a
       closing delimiter except when it occurs at the same input level as
       the opening <b>[</b>.  In compatibility mode, no attention is paid to the
       input-level.

       There are some new types of condition:

       <b>.if r</b><i>xxx</i>
              True if there is a number register named <i>xxx</i>.

       <b>.if d</b><i>xxx</i>
              True if there is a string, macro, diversion, or request named
              <i>xxx</i>.

       <b>.if m</b><i>xxx</i>
              True if there is a color named <i>xxx</i>.

       <b>.if c</b><i>ch</i>
              True if there is a character (or glyph) <i>ch</i> available; <i>ch</i> is
              either an ASCII character or a glyph (special character)
              <b>\N'</b><i>xxx</i><b>'</b>, <b>\(</b><i>xx</i> or <b>\[</b><i>xxx</i><b>]</b>; the condition is also true if <i>ch</i> has
              been defined by the <b>char </b>request.

       <b>.if F</b><i>f</i> True if font <i>f</i> exists.  <b>f </b>is handled as if it was opened with
              the <b>ft </b>request (this is, font translation and styles are
              applied), without actually mounting it.

       <b>.if S</b><i>s</i> True if style <i>s</i> has been registered.  Font translation is
              applied.

       The <b>tr </b>request can now map characters onto <b>\~</b>.

       The space width emitted by the <b>\| </b>and <b>\^ </b>escape sequences can be con‐
       trolled on a per-font basis.  If there is a glyph named <b>\| </b>or <b>\^</b>,
       respectively (note the leading backslash), defined in the current
       font file, use this glyph's width instead of the default value.

       It is now possible to have whitespace between the first and second
       dot (or the name of the ending macro) to end a macro definition.
       Example:

              .if t \{\
              .  de bar
              .    nop Hello, I'm ‘bar’.
              .  .
              .\}
</pre>
<h2><a id="INTERMEDIATE_OUTPUT_FORMAT" href="#INTERMEDIATE_OUTPUT_FORMAT"></a>INTERMEDIATE OUTPUT FORMAT  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This section describes the format output by GNU troff.  The output
       format used by GNU troff is very similar to that used by Unix device-
       independent troff.  Only the differences are documented here.

   <b>Units</b>
       The argument to the <b>s </b>command is in scaled points (units of points/<i>n</i>,
       where <i>n</i> is the argument to the <b>sizescale </b>command  in the DESC file).
       The argument to the <b>x Height </b>command is also in scaled points.

   <b>Text Commands</b>
       <b>N</b><i>n</i>     Print glyph with index <i>n</i> (a non-negative integer) of the
              current font.

       If the <b>tcommand </b>line is present in the DESC file, troff uses the
       following two commands.

       <b>t</b><i>xxx</i>   <i>xxx</i> is any sequence of characters terminated by a space or a
              newline (to be more precise, it is a sequence of glyphs which
              are accessed with the corresponding characters); the first
              character should be printed at the current position, the
              current horizontal position should be increased by the width
              of the first character, and so on for each character.  The
              width of the glyph is that given in the font file,
              appropriately scaled for the current point size, and rounded
              so that it is a multiple of the horizontal resolution.
              Special characters cannot be printed using this command.

       <b>u</b><i>n xxx</i> This is same as the <b>t </b>command except that after printing each
              character, the current horizontal position is increased by the
              sum of the width of that character and <i>n</i>.

       Note that single characters can have the eighth bit set, as can the
       names of fonts and special characters.

       The names of glyphs and fonts can be of arbitrary length; drivers
       should not assume that they are only two characters long.

       When a glyph is to be printed, that glyph is always in the current
       font.  Unlike device-independent troff, it is not necessary for
       drivers to search special fonts to find a glyph.

       For color support, some new commands have been added:

       <b>mc </b><i>cyan magenta yellow</i>
       <b>md</b>
       <b>mg </b><i>gray</i>
       <b>mk </b><i>cyan magenta yellow black</i>
       <b>mr </b><i>red green blue</i>
              Set the color components of the current drawing color, using
              various color schemes.  <b>md </b>resets the drawing color to the
              default value.  The arguments are integers in the range 0 to
              65536.

       The <b>x </b>device control command has been extended.

       <b>x u </b><i>n</i>  If <i>n</i> is 1, start underlining of spaces.  If <i>n</i> is 0, stop
              underlining of spaces.  This is needed for the <b>cu </b>request in
              nroff mode and is ignored otherwise.

   <b>Drawing Commands</b>
       The <b>D </b>drawing command has been extended.  These extensions are not
       used by GNU pic if the <b>-n </b>option is given.

       <b>Df </b><i>n</i>\n Set the shade of gray to be used for filling solid objects to
              <i>n</i>; <i>n</i> must be an integer between 0 and 1000, where 0
              corresponds solid white and 1000 to solid black, and values in
              between correspond to intermediate shades of gray.  This
              applies only to solid circles, solid ellipses and solid
              polygons.  By default, a level of 1000 is used.  Whatever
              color a solid object has, it should completely obscure
              everything beneath it.  A value greater than 1000 or less
              than 0 can also be used: this means fill with the shade of
              gray that is currently being used for lines and text.
              Normally this is black, but some drivers may provide a way of
              changing this.

              The corresponding <b>\D'f</b><i>...</i><b>' </b>command shouldn't be used since its
              argument is always rounded to an integer multiple of the
              horizontal resolution which can lead to surprising results.

       <b>DC </b><i>d</i>\n Draw a solid circle with a diameter of <i>d</i> with the leftmost
              point at the current position.

       <b>DE </b><i>dx dy</i>\n
              Draw a solid ellipse with a horizontal diameter of <i>dx</i> and a
              vertical diameter of <i>dy</i> with the leftmost point at the current
              position.  delim $$

       <b>Dp </b>$dx sub 1$ $dy sub 1$ $dx sub 2$ $dy sub 2$ $...$ $dx sub n$ $dy
       sub n$\n
              Draw a polygon with, for $i = 1 ,..., n+1$, the <i>i</i>-th vertex at
              the current position $+ sum from j=1 to i-1 ( dx sub j , dy
              sub j )$.  At the moment, GNU pic only uses this command to
              generate triangles and rectangles.

       <b>DP </b>$dx sub 1$ $dy sub 1$ $dx sub 2$ $dy sub 2$ $...$ $dx sub n$ $dy
       sub n$\n
              Like <b>Dp </b>but draw a solid rather than outlined polygon.

       <b>Dt </b><i>n</i>\n Set the current line thickness to <i>n</i> machine units.
              Traditionally Unix troff drivers use a line thickness
              proportional to the current point size; drivers should
              continue to do this if no <b>Dt </b>command has been given, or if a
              <b>Dt </b>command has been given with a negative value of <i>n</i>.  A zero
              value of <i>n</i> selects the smallest available line thickness.

       A difficulty arises in how the current position should be changed
       after the execution of these commands.  This is not of great
       importance since the code generated by GNU pic does not depend on
       this.  Given a drawing command of the form

              <b>\D'</b><i>c</i> $x sub 1$ $y sub 1$ $x sub 2$ $y sub 2$ $...$ $x sub n$
              $y sub n$<b>'</b>

       where <i>c</i> is not one of <b>c</b>, <b>e</b>, <b>l</b>, <b>a</b>, or <b>~</b>, Unix troff treats each of the
       $x sub i$ as a horizontal quantity, and each of the $y sub i$ as a
       vertical quantity and assumes that the width of the drawn object is
       $sum from i=1 to n x sub i$, and that the height is $sum from i=1 to
       n y sub i$.  (The assumption about the height can be seen by
       examining the <b>st </b>and <b>sb </b>registers after using such a <b>D </b>command in a
       <b>\w </b>escape sequence).  This rule also holds for all the original
       drawing commands with the exception of <b>De</b>.  For the sake of
       compatibility GNU troff also follows this rule, even though it
       produces an ugly result in the case of the <b>Dt </b>and <b>Df</b>, and, to a
       lesser extent, <b>DE </b>commands.  Thus after executing a <b>D </b>command of the
       form

              <b>D</b><i>c</i> $x sub 1$ $y sub 1$ $x sub 2$ $y sub 2$ $...$ $x sub n$ $y
              sub n$\n

       the current position should be increased by $( sum from i=1 to n x
       sub i , sum from i=1 to n y sub i )$.

       Another set of extensions is

       <b>DFc </b><i>cyan magenta yellow</i>\n
       <b>DFd</b>\n
       <b>DFg </b><i>gray</i>\n
       <b>DFk </b><i>cyan magenta yellow black</i>\n
       <b>DFr </b><i>red green blue</i>\n
              Set the color components of the filling color similar to the
              <b>m </b>commands above.

       The current position isn't changed by those colour commands (contrary
       to <b>Df</b>).

   <b>Device Control Commands</b>
       There is a continuation convention which permits the argument to the
       <b>x X </b>command to contain newlines: when outputting the argument to the
       <b>x X </b>command, GNU troff follows each newline in the argument with a <b>+</b>
       character (as usual, it terminates the entire argument with a
       newline); thus if the line after the line containing the <b>x X </b>command
       starts with <b>+</b>, then the newline ending the line containing the <b>x X</b>
       command should be treated as part of the argument to the <b>x X </b>command,
       the <b>+ </b>should be ignored, and the part of the line following the <b>+</b>
       should be treated like the part of the line following the <b>x X</b>
       command.

       The first three output commands are guaranteed to be:

              <b>x T </b><i>device</i>
              <b>x res </b><i>n h v</i>
              <b>x init</b>
</pre>
<h2><a id="INCOMPATIBILITIES" href="#INCOMPATIBILITIES"></a>INCOMPATIBILITIES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       In spite of the many extensions, groff has retained compatibility to
       classical troff to a large degree.  For the cases where the
       extensions lead to collisions, a special compatibility mode with the
       restricted, old functionality was created for groff.

   <b>Groff Language</b>
       <i>groff</i> provides a <b>compatibility mode </b>that allows to process roff code
       written for classical <b>troff </b>or for other implementations of roff in a
       consistent way.

       Compatibility mode can be turned on with the <b>-C </b>command line option,
       and turned on or off with the <b>.cp </b>request.  The number register <b>\n(.C</b>
       is 1 if compatibility mode is on, 0 otherwise.

       This became necessary because the GNU concept for long names causes
       some incompatibilities.  <i>Classical troff</i> interprets

              <b>.dsabcd</b>

       as defining a string <b>ab </b>with contents <b>cd</b>.  In <i>groff</i> mode, this is
       considered as a call of a macro named <b>dsabcd</b>.

       Also <i>classical troff</i> interprets <b>\*[ </b>or <b>\n[ </b>as references to a string
       or number register called <b>[ </b>while <i>groff</i> takes this as the start of a
       long name.

       In <i>compatibility mode</i>, groff interprets these things in the
       traditional way; so long names are not recognized.

       On the other hand, groff in <i>GNU native mode</i> does not allow to use the
       single-character escapes <b>\\ </b>(backslash), <b>\| </b>(vertical bar), <b>\^</b>
       (caret), <b>\&amp; </b>(ampersand), <b>\{ </b>(opening brace), <b>\} </b>(closing brace), ‘<b>\ </b>’
       (space), <b>\' </b>(single quote), <b>\` </b>(backquote), <b>\- </b>(minus), <b>\_</b>
       (underline), <b>\! </b>(bang), <b>\% </b>(percent), and <b>\c </b>(character c) in names
       of strings, macros, diversions, number registers, fonts or
       environments, whereas <i>classical troff</i> does.

       The <b>\A </b>escape sequence can be helpful in avoiding these escape
       sequences in names.

       Fractional point sizes cause one noteworthy incompatibility.  In
       <i>classical troff</i>, the <b>ps </b>request ignores scale indicators and so

              <b>.ps 10u</b>

       sets the point size to 10 points, whereas in groff native mode the
       point size is set to 10 scaled points.

       In <i>groff</i>, there is a fundamental difference between unformatted input
       characters, and formatted output characters (glyphs).  Everything
       that affects how a glyph is output is stored with the glyph; once a
       glyph has been constructed it is unaffected by any subsequent
       requests that are executed, including the <b>bd</b>, <b>cs</b>, <b>tkf</b>, <b>tr</b>, or <b>fp</b>
       requests.

       Normally glyphs are constructed from input characters at the moment
       immediately before the glyph is added to the current output line.
       Macros, diversions and strings are all, in fact, the same type of
       object; they contain lists of input characters and glyphs in any
       combination.

       Special characters can be both; before being added to the output,
       they act as input entities, afterwards they denote glyphs.

       A glyph does not behave like an input character for the purposes of
       macro processing; it does not inherit any of the special properties
       that the input character from which it was constructed might have
       had.  The following example makes things clearer.

              .di x
              \\\\
              .br
              .di
              .x

       With <i>GNU troff</i> this is printed as <b>\\</b>.  So each pair of input back‐
       slashes ‘\\’ is turned into a single output backslash glyph ‘\’ and
       the resulting output backslashes are not interpreted as escape char‐
       acters when they are reread.

       <i>Classical troff</i> would interpret them as escape characters when they
       were reread and would end up printing a single backslash ‘\’.

       In GNU, the correct way to get a printable version of the backslash
       character ’\’ is the <b>\(rs </b>escape sequence, but classical troff does
       not provide a clean feature for getting a non-syntactical backslash.
       A close method is the printable version of the current escape charac‐
       ter using the <b>\e </b>escape sequence; this works if the current escape
       character is not redefined.  It works in both GNU mode and compati‐
       bility mode, while dirty tricks like specifying a sequence of multi‐
       ple backslashes do not work reliably; for the different handling in
       diversions, macro definitions, or text mode quickly leads to a confu‐
       sion about the necessary number of backslashes.

       To store an escape sequence in a diversion that is interpreted when
       the diversion is reread, either the traditional <b>\! </b>transparent output
       facility or the new <b>\? </b>escape sequence can be used.

   <b>Intermediate Output</b>
       The groff intermediate output format is in a state of evolution.  So
       far it has some incompatibilities, but it is intended to establish a
       full compatibility to the classical troff output format.  Actually
       the following incompatibilities exist:

       · The positioning after the drawing of the polygons conflicts with
         the classical definition.

       · The intermediate output cannot be rescaled to other devices as
         classical ‘device-independent’ troff did.
</pre>
<h2><a id="SEE_ALSO" href="#SEE_ALSO"></a>SEE ALSO  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The <i>groff info file</i>, cf. <b>info</b>(1) presents all groff documentation
       within a single document.

       <a href="../man1/groff.1.html">groff(1)</a>
              A list of all documentation around <i>groff</i>.

       <a href="groff.7.html">groff(7)</a>
              A description of the <i>groff</i> language, including a short, but
              complete reference of all predefined requests, registers, and
              escapes of plain <i>groff</i>.  From the command line, this is called
              using

                     man 7 groff

       <a href="roff.7.html">roff(7)</a>
              A survey of <i>roff</i> systems, including pointers to further his‐
              torical documentation.

       [<i>CSTR #54</i>]
              The <i>Nroff/Troff User's Manual</i> by <i>J. F. Ossanna</i> of 1976 in the
              revision of <i>Brian Kernighan</i> of 1992, being the classical troff
              documentation ⟨<a href="../../../../cm.bell-labs.com/cm/cs/cstr/54.ps.gz">http://cm.bell-labs.com/cm/cs/cstr/54.ps.gz</a>⟩.
</pre>
<h2><a id="COPYING" href="#COPYING"></a>COPYING  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       Copyright © 1989-2014 Free Software Foundation, Inc.

       This file is part of groff, the GNU roff type-setting system.  It is
       the source of the man-page groff_diff(7).

       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.3 or
       any later version published by the Free Software Foundation; with no
       Front-Cover Texts, and with no Back-Cover Texts.

       A copy of the Free Documentation License is included as a file called
       FDL in the main directory of the groff source package, it is also
       available in the internet at GNU FDL license 
       ⟨<a href="http://www.gnu.org/copyleft/fdl.html">http://www.gnu.org/copyleft/fdl.html</a>⟩.
</pre>
<h2><a id="AUTHORS" href="#AUTHORS"></a>AUTHORS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This document was written by James Clark ⟨jjc@jclark.com⟩, was modi‐
       fied by Werner Lemberg ⟨wl@gnu.org⟩ and Bernd Warken ⟨groff-
       bernd.warken-72@web.de⟩.
</pre>
<h2><a id="COLOPHON" href="#COLOPHON"></a>COLOPHON  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This page is part of the <i>groff</i> (GNU troff) project.  Information
       about the project can be found at 
       ⟨<a href="http://www.gnu.org/software/groff/">http://www.gnu.org/software/groff/</a>⟩.  If you have a bug report for
       this manual page, see ⟨<a href="http://www.gnu.org/software/groff/">http://www.gnu.org/software/groff/</a>⟩.  This
       page was obtained from the tarball groff-1.22.3.tar.gz fetched from
       ⟨ftp://ftp.gnu.org/gnu/groff/⟩ on 2017-07-05.  If you discover any
       rendering problems in this HTML version of the page, or you believe
       there is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">Groff Version 1.22.3           4 November 2014                 GROFF_DIFF(7)</span>
</pre>

<hr class="end-man-text" />
<p>Pages that refer to this page: 
    <a href="../man1/groff.1.html">groff(1)</a>,&nbsp; 
    <a href="../man1/troff.1.html">troff(1)</a>,&nbsp; 
    <a href="../man5/groff_out.5.html">groff_out(5)</a>,&nbsp; 
    <a href="groff.7.html">groff(7)</a>,&nbsp; 
    <a href="groff_filenames.7.html">groff_filenames(7)</a>
</p>
<hr/>

 
<hr class="start-footer" />

<div class="footer"> 

<table class="colophon-table">
    <tr>
    <td class="pub-info">
        <p>
            HTML rendering created 2017-07-13
            by <a href="http://man7.org/mtk/index.html">Michael Kerrisk</a>, 
            author of 
            <a href="http://man7.org/tlpi/"><em>The Linux Programming Interface</em></a>, 
            maintainer of the 
            <a href="https://www.kernel.org/doc/man-pages/">Linux <em>man-pages</em> project</a>.
        </p>
        <p>
            For details of in-depth
            <strong>Linux/UNIX system programming training courses</strong>
            that I teach, look <a href="http://man7.org/training/">here</a>.
        </p>
        <p>
            Hosting by <a href="http://www.jambit.com/index_en.html">jambit GmbH</a>.
        </p>
        <p>
            <a href="http://validator.w3.org/check?uri=referer">
            <img src="http://www.w3.org/Icons/valid-xhtml11"
                alt="Valid XHTML 1.1" height="31" width="88" />
            </a>
        </p>
    </td>
    <td class="colophon-divider">
    </td>
    <td class="tlpi-cover">
        <a href="http://man7.org/tlpi/"><img src="../../../tlpi/cover/TLPI-front-cover-vsmall.png" alt="Cover of TLPI" /></a>
    </td>
    </tr>
</table>

</div>

<hr class="end-footer" />



<!--BEGIN-SITETRACKING-->
<!-- SITETRACKING.man7.org_linux_man-pages -->

<!-- Start of StatCounter Code (xhtml) -->

<script type="text/javascript">
//<![CDATA[
var sc_project=7422636; 
var sc_invisible=1; 
var sc_security="9b6714ff"; 
//]]>
</script>
<script type="text/javascript"
src="../../../../www.statcounter.com/counter/counter_xhtml.js"></script>
<noscript><div class="statcounter"><a title="website
statistics" href="http://statcounter.com/"
class="statcounter"><img class="statcounter"
src="http://c.statcounter.com/7422636/0/9b6714ff/1/"
alt="website statistics" /></a></div></noscript>

<!-- End of StatCounter Code -->


<!-- Start of Google Analytics Code -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9830363-8']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- End of Google Analytics Code -->

<!--END-SITETRACKING-->

</body>
</html>
