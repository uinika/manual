
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <link rel="stylesheet" type="text/css" href="../../../style.css" title="style" />
    <link rel="stylesheet" type="text/css" href="../style.css" title="style" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <title>slapo-retcode(5) - Linux manual page</title>
</head>

<body>

<div class="page-top"><a id="top_of_page"></a></div>
<!--%%%TOP_BAR%%%-->
    <div class="nav-bar">
        <table class="nav-table">
            <tr>
                <td class="nav-cell">
                    <p class="nav-text">
                        <a href="http://man7.org/index.html">man7.org</a> &gt; Linux &gt; <a href="../index.html">man-pages</a>
                    </p>
                </td>
                <td class="training-cell">
                    <p class="training-text"><a class="training-link" href="http://man7.org/training/">Linux/UNIX system programming training</a></p>
                </td>
            </tr>
        </table>
    </div>

<hr class="nav-end" />

<!--%%%PAGE_START%%%-->


<table class="sec-table">
<tr>
    <td>
        <p class="section-dir">
<a href="#NAME">NAME</a> | <a href="#SYNOPSIS">SYNOPSIS</a> | <a href="#DESCRIPTION">DESCRIPTION</a> | <a href="#SCHEMA">SCHEMA</a> | <a href="#EXAMPLE">EXAMPLE</a> | <a href="#FILES">FILES</a> | <a href="#SEE_ALSO">SEE&nbsp;ALSO</a> | <a href="#ACKNOWLEDGEMENTS">ACKNOWLEDGEMENTS</a> | <a href="#COLOPHON">COLOPHON</a>
        </p>
    </td>
    <td class="search-box">
        <div class="man-search-box">

            <form method="get" action="http://www.google.com/search">
                <fieldset class="man-search">
                    <input type="text" name="q" size="10" maxlength="255" value="" />
                    <input type="hidden" name="sitesearch" value="man7.org/linux/man-pages" />
                    <input type="submit" name="sa" value="Search online pages" />
                </fieldset>
            </form>

        </div>
    </td>
    <td> </td>
</tr>
</table>

<pre>
<span class="headline">SLAPO-RETCODE(5)             File Formats Manual            SLAPO-RETCODE(5)</span>
</pre>
<h2><a id="NAME" href="#NAME"></a>NAME  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       slapo-retcode - return code overlay to slapd
</pre>
<h2><a id="SYNOPSIS" href="#SYNOPSIS"></a>SYNOPSIS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       ETCDIR/slapd.conf
</pre>
<h2><a id="DESCRIPTION" href="#DESCRIPTION"></a>DESCRIPTION  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The <b>retcode </b>overlay to <a href="../man8/slapd.8.html">slapd(8)</a> is useful to test the behavior of
       clients when server-generated erroneous and/or unusual responses
       occur, e.g. error codes, referrals, excessive response times and so
       on.

       The error responses are generated according to different strategies.

       In the first case, all operations targeted at a specific configurable
       subtree cause the object related to the request DN to be looked up
       and checked for return code data: a response code, plus an optional
       textual message, an optional configurable delay, an optional matched
       DN field, and, when the response code is "referral", a (list of)
       referral(s).

       Well-known response codes from standard track documents are provided
       in <b>retcode.conf</b>, which can be included after instantiating the
       overlay.

       In the second case, objects of classes inherited from the
       <b>errAbsObject</b>, like <b>errObject </b>or <b>errAuxObject</b>, when returned as
       intermediate responses of a search request, are changed into the
       response dictated by their content.

       A third mode causes objects to be looked up from the underlying
       database to discover if their class inherits from <b>errABsObject</b>; in
       that case, their content is used to compute the corresponding
       response.

       The behavior is disabled by using the <b>manageDSAit </b>control (RFC 3296);
       in that case, the resulting object, either present in the directory
       or dynamically generated by the overlay, or contained in the request,
       is handled as usual.

       The config directives that are specific to the <b>retcode </b>overlay must
       be prefixed by <b>retcode-</b>, to avoid conflicts with directives specific
       to the underlying database or to other stacked overlays.  The
       following specific directives can be used to configure the retcode
       overlay:

       <b>retcode-parent &lt;DN&gt;</b>
              This directive defines the parent DN where dynamically
              generated entries reside.  If not defined, the suffix of the
              database is used.

       <b>retcode-item &lt;RDN&gt; &lt;errCode&gt; [op=&lt;oplist&gt;] [text=&lt;message&gt;]</b>
              <b>[ref=&lt;referral&gt;] [sleeptime=&lt;sec&gt;] [matched=&lt;DN&gt;]</b>
              <b>[unsolicited=&lt;OID&gt;[:&lt;data&gt;]]</b>
              <b>[flags=[pre|post-]disconnect[,...]]</b>
              A dynamically generated entry, located below <b>retcode-parent</b>.
              The <b>errCode </b>is the number of the response code; it can be in
              any format supported by <a href="../man3/strtol.3.html">strtol(3)</a>.  The optional <b>oplist </b>is a
              list of operations that cause response code generation; if
              absent, all operations are affected.  The <b>matched </b>field is the
              matched DN that is returned along with the error, while the
              <b>text </b>field is an optional diagnostics message.  The <b>ref </b>field
              is only allowed for the <b>referral </b>response code.  The <b>sleeptime</b>
              field causes <a href="../man8/slapd.8.html">slapd(8)</a> to sleep the specified number of seconds
              before proceeding with the operation.  The <b>unsolicited </b>field
              can be used to cause the return of an RFC 4511 unsolicited
              response message; if <b>OID </b>is not "0", an extended response is
              generated, with the optional <b>data </b>appended.  If <b>flags </b>contains
              <b>disconnect</b>, or <b>pre-disconnect</b>, <a href="../man8/slapd.8.html">slapd(8)</a> disconnects abruptly,
              without notice; <b>post-disconnect </b>causes disconnection right
              after sending response as appropriate.

       <b>retcode-indir</b>
              Enables exploitation of in-directory stored errAbsObject.  May
              result in a lot of unnecessary overhead.

       <b>retcode-sleep [-]&lt;n&gt;</b>
              Defines a sleep time in seconds that is spent before actually
              handling any operation.  If negative, a random time between 0
              and the absolute value of the argument is used.
</pre>
<h2><a id="SCHEMA" href="#SCHEMA"></a>SCHEMA  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       The <b>retcode </b>overlay utilizes the "return code" schema described
       herein.  This schema is specifically designed for use with this
       overlay and is not intended to be used otherwise.  It is also noted
       that the schema described here is <i>a work in progress</i>, and hence
       subject to change without notice.  The schema is loaded automatically
       by the overlay.

       The schema includes a number of object classes and associated
       attribute types as described below.

       The error code:
           (  1.3.6.1.4.1.4203.666.11.4.1.1
               NAME ( 'errCode' )
               DESC 'LDAP error code'
               EQUALITY integerMatch
               ORDERING integerOrderingMatch
               SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
               SINGLE-VALUE )

       The operations that trigger the response code:
           ( 1.3.6.1.4.1.4203.666.11.4.1.2
               NAME ( 'errOp' )
               DESC 'Operations the errObject applies to'
               EQUALITY caseIgnoreMatch
               SUBSTR caseIgnoreSubstringsMatch
               SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 )

       The text message:
           ( 1.3.6.1.4.1.4203.666.11.4.1.3
               NAME ( 'errText' )
               DESC 'LDAP error textual description'
               EQUALITY caseIgnoreMatch
               SUBSTR caseIgnoreSubstringsMatch
               SYNTAX 1.3.6.1.4.1.1466.115.121.1.15
               SINGLE-VALUE )

       The sleep time before the response is actually returned to the
       client:
           ( 1.3.6.1.4.1.4203.666.11.4.1.4
               NAME ( 'errSleepTime' )
               DESC 'Time to wait before returning the error'
               EQUALITY integerMatch
               SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
               SINGLE-VALUE )

       The matched DN returned to the client:
           ( 1.3.6.1.4.1.4203.666.11.4.1.5
               NAME ( 'errMatchedDN' )
               DESC 'Value to be returned as matched DN'
               EQUALITY distinguishedNameMatch
               SYNTAX 1.3.6.1.4.1.1466.115.121.1.12
               SINGLE-VALUE )

       The OID to be returned as extended response OID in RFC 4511
       unsolicited responses ("0" generates a regular response with msgid
       set to 0):
           ( 1.3.6.1.4.1.4203.666.11.4.1.6
               NAME ( 'errUnsolicitedOID' )
               DESC 'OID to be returned within unsolicited response'
               EQUALITY objectIdentifierMatch
               SYNTAX 1.3.6.1.4.1.1466.115.121.1.38
               SINGLE-VALUE )

       The octet string to be returned as extended response data in RFC 4511
       unsolicited response:
           ( 1.3.6.1.4.1.4203.666.11.4.1.7
               NAME ( 'errUnsolicitedData' )
               DESC 'Data to be returned within unsolicited response'
               SYNTAX 1.3.6.1.4.1.1466.115.121.1.40
               SINGLE-VALUE )

       If TRUE, <a href="../man8/slapd.8.html">slapd(8)</a> disconnects abruptly without notice; if FALSE, it
       disconnects after sending response as appropriate:
           ( 1.3.6.1.4.1.4203.666.11.4.1.8
               NAME ( 'errDisconnect' )
               DESC 'Disconnect without notice'
               SYNTAX 1.3.6.1.4.1.1466.115.121.1.7
               SINGLE-VALUE )

       The abstract class that triggers the overlay:
           ( 1.3.6.1.4.1.4203.666.11.4.3.0
               NAME ( 'errAbsObject' )
               SUP top ABSTRACT
               MUST ( errCode )
               MAY ( cn $ description $ errOp $ errText $ errSleepTime
                   $ errMatchedDN ) )

       The standalone structural objectclass for specifically created data:
           ( 1.3.6.1.4.1.4203.666.11.4.3.1
               NAME ( 'errObject' )
               SUP errAbsObject STRUCTURAL )

       The auxiliary objectclass to alter the behavior of existing objects:
           ( 1.3.6.1.4.1.4203.666.11.4.3.2
               NAME ( 'errAuxObject' )
               SUP errAbsObject AUXILIARY )
</pre>
<h2><a id="EXAMPLE" href="#EXAMPLE"></a>EXAMPLE  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
              overlay         retcode
              retcode-parent  "ou=RetCodes,dc=example,dc=com"

              # retcode.conf is found in tests/data/ of the source tree
              include         ./retcode.conf

              # Wait 10 seconds, then return success (0x00)
              retcode-item    "cn=Success after 10 seconds" 0x00 sleeptime=10
              # Wait 10 seconds, then return timelimitExceeded (0x03)
              retcode-item    "cn=Timelimit after 10 seconds" 0x03 sleeptime=10
</pre>
<h2><a id="FILES" href="#FILES"></a>FILES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       ETCDIR/slapd.conf
              default slapd configuration file
</pre>
<h2><a id="SEE_ALSO" href="#SEE_ALSO"></a>SEE ALSO  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <a href="slapd.conf.5.html">slapd.conf(5)</a>, <a href="slapd-config.5.html">slapd-config(5)</a>, <a href="../man8/slapd.8.html">slapd(8)</a>.  The <a href="slapo-retcode.5.html">slapo-retcode(5)</a>
       overlay supports dynamic configuration via <b>back-config</b>.
</pre>
<h2><a id="ACKNOWLEDGEMENTS" href="#ACKNOWLEDGEMENTS"></a>ACKNOWLEDGEMENTS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This module was written in 2005 by Pierangelo Masarati for SysNet
       s.n.c.
</pre>
<h2><a id="COLOPHON" href="#COLOPHON"></a>COLOPHON  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This page is part of the <i>OpenLDAP</i> (an open source implementation of
       the Lightweight Directory Access Protocol) project.  Information
       about the project can be found at ⟨<a href="http://www.openldap.org/">http://www.openldap.org/</a>⟩.  If you
       have a bug report for this manual page, see 
       ⟨<a href="http://www.openldap.org/its/">http://www.openldap.org/its/</a>⟩.  This page was obtained from the
       project's upstream Git repository 
       ⟨git://git.openldap.org/openldap.git⟩ on 2017-07-05.  If you discover
       any rendering problems in this HTML version of the page, or you
       believe there is a better or more up-to-date source for the page, or
       you have corrections or improvements to the information in this
       COLOPHON (which is <i>not</i> part of the original manual page), send a mail
       to man-pages@man7.org

<span class="footline">OpenLDAP LDVERSION               RELEASEDATE                SLAPO-RETCODE(5)</span>
</pre>

<hr class="end-man-text" />
<p>Pages that refer to this page: 
    <a href="slapd.overlays.5.html">slapd.overlays(5)</a>,&nbsp; 
    <a href="slapo-retcode.5.html">slapo-retcode(5)</a>
</p>
<hr/>

 
<hr class="start-footer" />

<div class="footer"> 

<table class="colophon-table">
    <tr>
    <td class="pub-info">
        <p>
            HTML rendering created 2017-07-13
            by <a href="http://man7.org/mtk/index.html">Michael Kerrisk</a>, 
            author of 
            <a href="http://man7.org/tlpi/"><em>The Linux Programming Interface</em></a>, 
            maintainer of the 
            <a href="https://www.kernel.org/doc/man-pages/">Linux <em>man-pages</em> project</a>.
        </p>
        <p>
            For details of in-depth
            <strong>Linux/UNIX system programming training courses</strong>
            that I teach, look <a href="http://man7.org/training/">here</a>.
        </p>
        <p>
            Hosting by <a href="http://www.jambit.com/index_en.html">jambit GmbH</a>.
        </p>
        <p>
            <a href="http://validator.w3.org/check?uri=referer">
            <img src="http://www.w3.org/Icons/valid-xhtml11"
                alt="Valid XHTML 1.1" height="31" width="88" />
            </a>
        </p>
    </td>
    <td class="colophon-divider">
    </td>
    <td class="tlpi-cover">
        <a href="http://man7.org/tlpi/"><img src="../../../tlpi/cover/TLPI-front-cover-vsmall.png" alt="Cover of TLPI" /></a>
    </td>
    </tr>
</table>

</div>

<hr class="end-footer" />



<!--BEGIN-SITETRACKING-->
<!-- SITETRACKING.man7.org_linux_man-pages -->

<!-- Start of StatCounter Code (xhtml) -->

<script type="text/javascript">
//<![CDATA[
var sc_project=7422636; 
var sc_invisible=1; 
var sc_security="9b6714ff"; 
//]]>
</script>
<script type="text/javascript"
src="../../../../www.statcounter.com/counter/counter_xhtml.js"></script>
<noscript><div class="statcounter"><a title="website
statistics" href="http://statcounter.com/"
class="statcounter"><img class="statcounter"
src="http://c.statcounter.com/7422636/0/9b6714ff/1/"
alt="website statistics" /></a></div></noscript>

<!-- End of StatCounter Code -->


<!-- Start of Google Analytics Code -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9830363-8']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- End of Google Analytics Code -->

<!--END-SITETRACKING-->

</body>
</html>
