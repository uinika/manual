
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <link rel="stylesheet" type="text/css" href="../../../style.css" title="style" />
    <link rel="stylesheet" type="text/css" href="../style.css" title="style" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <title>xfs_metadump(8) - Linux manual page</title>
</head>

<body>

<div class="page-top"><a id="top_of_page"></a></div>
<!--%%%TOP_BAR%%%-->
    <div class="nav-bar">
        <table class="nav-table">
            <tr>
                <td class="nav-cell">
                    <p class="nav-text">
                        <a href="http://man7.org/index.html">man7.org</a> &gt; Linux &gt; <a href="../index.html">man-pages</a>
                    </p>
                </td>
                <td class="training-cell">
                    <p class="training-text"><a class="training-link" href="http://man7.org/training/">Linux/UNIX system programming training</a></p>
                </td>
            </tr>
        </table>
    </div>

<hr class="nav-end" />

<!--%%%PAGE_START%%%-->


<table class="sec-table">
<tr>
    <td>
        <p class="section-dir">
<a href="#NAME">NAME</a> | <a href="#SYNOPSIS">SYNOPSIS</a> | <a href="#DESCRIPTION">DESCRIPTION</a> | <a href="#OPTIONS">OPTIONS</a> | <a href="#DIAGNOSTICS">DIAGNOSTICS</a> | <a href="#NOTES">NOTES</a> | <a href="#SEE_ALSO">SEE&nbsp;ALSO</a> | <a href="#BUGS">BUGS</a> | <a href="#COLOPHON">COLOPHON</a>
        </p>
    </td>
    <td class="search-box">
        <div class="man-search-box">

            <form method="get" action="http://www.google.com/search">
                <fieldset class="man-search">
                    <input type="text" name="q" size="10" maxlength="255" value="" />
                    <input type="hidden" name="sitesearch" value="man7.org/linux/man-pages" />
                    <input type="submit" name="sa" value="Search online pages" />
                </fieldset>
            </form>

        </div>
    </td>
    <td> </td>
</tr>
</table>

<pre>
<span class="headline">xfs_metadump(8)            System Manager's Manual           xfs_metadump(8)</span>
</pre>
<h2><a id="NAME" href="#NAME"></a>NAME  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       xfs_metadump - copy XFS filesystem metadata to a file
</pre>
<h2><a id="SYNOPSIS" href="#SYNOPSIS"></a>SYNOPSIS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>xfs_metadump </b>[ <b>-aefFgow </b>] [ <b>-m </b><i>max_extents</i> ] ] [ <b>-l </b><i>logdev</i> ] <i>source</i>
       <i>target</i>
       <b>xfs_metadump -V</b>
</pre>
<h2><a id="DESCRIPTION" href="#DESCRIPTION"></a>DESCRIPTION  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>xfs_metadump </b>is a debugging tool that copies the metadata from an XFS
       filesystem to a file.  The <i>source</i> argument must be the pathname of
       the device or file containing the XFS filesystem and the <i>target</i>
       argument specifies the destination file name.  If <i>target</i> is -, then
       the output is sent to stdout. This allows the output to be redirected
       to another program such as a compression application.

       <b>xfs_metadump </b>may only be used to copy unmounted filesystems, or read-
       only mounted filesystems.

       <b>xfs_metadump </b>does not alter the source filesystem in any way. The
       <i>target</i> image is a contiguous (non-sparse) file containing all the
       filesystem's metadata and indexes to where the blocks were copied
       from.

       By default, <b>xfs_metadump </b>obfuscates most file (regular file,
       directory and symbolic link) names and extended attribute names to
       allow the dumps to be sent without revealing confidential
       information. Extended attribute values are zeroed and no data is
       copied. The only exceptions are file or attribute names that are 4 or
       less characters in length. Also file names that span extents (this
       can only occur with the <a href="mkfs.xfs.8.html">mkfs.xfs(8)</a> options where <b>-n </b><i>size</i> &gt; <b>-b </b><i>size</i>)
       are not obfuscated. Names between 5 and 8 characters in length
       inclusively are partially obfuscated.

       <b>xfs_metadump </b>should not be used for any purposes other than for
       debugging and reporting filesystem problems. The most common usage
       scenario for this tool is when <a href="xfs_repair.8.html">xfs_repair(8)</a> fails to repair a
       filesystem and a metadump image can be sent for analysis.

       The file generated by <b>xfs_metadump </b>can be restored to filesystem
       image (minus the data) using the <a href="xfs_mdrestore.8.html">xfs_mdrestore(8)</a> tool.
</pre>
<h2><a id="OPTIONS" href="#OPTIONS"></a>OPTIONS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>-a     </b>Copies entire metadata blocks.  Normally, <b>xfs_metadump </b>will
              zero any stale bytes interspersed with in-use metadata.  Use
              this option to copy full metadata blocks, to provide more
              debugging information for a corrupted filesystem.  Note that
              the extra data will be unobfuscated.

       <b>-e     </b>Stops the dump on a read error. Normally, it will ignore read
              errors and copy all the metadata that is accessible.

       <b>-f     </b>Specifies that the filesystem image to be processed is stored
              in a regular file (see the <b>mkfs.xfs -d </b>file option). This can
              also happen if an image copy of a filesystem has been made
              into an ordinary file with <a href="xfs_copy.8.html">xfs_copy(8)</a>.

       <b>-F     </b>Specifies that we want to continue even if the superblock
              magic is not correct.  If the source is truly not an XFS
              filesystem, the resulting image will be useless, and
              xfs_metadump may crash.

       <b>-g     </b>Shows dump progress. This is sent to stdout if the <i>target</i> is a
              file or to stderr if the <i>target</i> is stdout.

       <b>-l </b><i>logdev</i>
              For filesystems which use an external log, this specifies the
              device where the external log resides. The external log is not
              copied, only internal logs are copied.

       <b>-m     </b>Set the maximum size of an allowed metadata extent.  Extremely
              large metadata extents are likely to be corrupt, and will be
              skipped if they exceed this value.  The default size is 1000
              blocks.

       <b>-o     </b>Disables obfuscation of file names and extended attributes.

       <b>-w     </b>Prints warnings of inconsistent metadata encountered to
              stderr. Bad metadata is still copied.

       <b>-V     </b>Prints the version number and exits.
</pre>
<h2><a id="DIAGNOSTICS" href="#DIAGNOSTICS"></a>DIAGNOSTICS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <b>xfs_metadump </b>returns an exit code of 0 if all readable metadata is
       successfully copied or 1 if a write error occurs or a read error
       occurs and the <b>-e </b>option used.
</pre>
<h2><a id="NOTES" href="#NOTES"></a>NOTES  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       As <b>xfs_metadump </b>copies metadata only, it does not matter if the
       <i>source</i> filesystem has a realtime section or not. If the filesystem
       has an external log, it is not copied. Internal logs are copied and
       any outstanding log transactions are not obfuscated if they contain
       names.

       <b>xfs_metadump </b>is a shell wrapper around the <a href="xfs_db.8.html">xfs_db(8)</a> <b>metadump</b>
       command.
</pre>
<h2><a id="SEE_ALSO" href="#SEE_ALSO"></a>SEE ALSO  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       <a href="xfs_repair.8.html">xfs_repair(8)</a>, <a href="xfs_mdrestore.8.html">xfs_mdrestore(8)</a>, <a href="xfs_freeze.8.html">xfs_freeze(8)</a>, <a href="xfs_db.8.html">xfs_db(8)</a>,
       <a href="xfs_copy.8.html">xfs_copy(8)</a>, <a href="../man5/xfs.5.html">xfs(5)</a>
</pre>
<h2><a id="BUGS" href="#BUGS"></a>BUGS  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       Email bug reports to <b>linux-xfs@vger.kernel.org</b>.
</pre>
<h2><a id="COLOPHON" href="#COLOPHON"></a>COLOPHON  &nbsp; &nbsp; &nbsp; &nbsp; <a href="#top_of_page"><span class="top-link">top</span></a></h2><pre>
       This page is part of the <i>xfsprogs</i> (utilities for XFS filesystems)
       project.  Information about the project can be found at 
       ⟨<a href="http://xfs.org/">http://xfs.org/</a>⟩.  If you have a bug report for this manual page, see
       ⟨<a href="http://oss.sgi.com/bugzilla/buglist.cgi?product=XFS">http://oss.sgi.com/bugzilla/buglist.cgi?product=XFS</a>⟩.  This page was
       obtained from the project's upstream Git repository 
       ⟨git://oss.sgi.com/xfs/cmds/xfsprogs⟩ on 2017-07-05.  If you discover
       any rendering problems in this HTML version of the page, or you
       believe there is a better or more up-to-date source for the page, or
       you have corrections or improvements to the information in this
       COLOPHON (which is <i>not</i> part of the original manual page), send a mail
       to man-pages@man7.org

<span class="footline">                                                             xfs_metadump(8)</span>
</pre>

<hr class="end-man-text" />
<p>Pages that refer to this page: 
    <a href="xfs_db.8.html">xfs_db(8)</a>,&nbsp; 
    <a href="xfs_mdrestore.8.html">xfs_mdrestore(8)</a>,&nbsp; 
    <a href="xfs_repair.8.html">xfs_repair(8)</a>
</p>
<hr/>

 
<hr class="start-footer" />

<div class="footer"> 

<table class="colophon-table">
    <tr>
    <td class="pub-info">
        <p>
            HTML rendering created 2017-07-13
            by <a href="http://man7.org/mtk/index.html">Michael Kerrisk</a>, 
            author of 
            <a href="http://man7.org/tlpi/"><em>The Linux Programming Interface</em></a>, 
            maintainer of the 
            <a href="https://www.kernel.org/doc/man-pages/">Linux <em>man-pages</em> project</a>.
        </p>
        <p>
            For details of in-depth
            <strong>Linux/UNIX system programming training courses</strong>
            that I teach, look <a href="http://man7.org/training/">here</a>.
        </p>
        <p>
            Hosting by <a href="http://www.jambit.com/index_en.html">jambit GmbH</a>.
        </p>
        <p>
            <a href="http://validator.w3.org/check?uri=referer">
            <img src="http://www.w3.org/Icons/valid-xhtml11"
                alt="Valid XHTML 1.1" height="31" width="88" />
            </a>
        </p>
    </td>
    <td class="colophon-divider">
    </td>
    <td class="tlpi-cover">
        <a href="http://man7.org/tlpi/"><img src="../../../tlpi/cover/TLPI-front-cover-vsmall.png" alt="Cover of TLPI" /></a>
    </td>
    </tr>
</table>

</div>

<hr class="end-footer" />



<!--BEGIN-SITETRACKING-->
<!-- SITETRACKING.man7.org_linux_man-pages -->

<!-- Start of StatCounter Code (xhtml) -->

<script type="text/javascript">
//<![CDATA[
var sc_project=7422636; 
var sc_invisible=1; 
var sc_security="9b6714ff"; 
//]]>
</script>
<script type="text/javascript"
src="../../../../www.statcounter.com/counter/counter_xhtml.js"></script>
<noscript><div class="statcounter"><a title="website
statistics" href="http://statcounter.com/"
class="statcounter"><img class="statcounter"
src="http://c.statcounter.com/7422636/0/9b6714ff/1/"
alt="website statistics" /></a></div></noscript>

<!-- End of StatCounter Code -->


<!-- Start of Google Analytics Code -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9830363-8']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- End of Google Analytics Code -->

<!--END-SITETRACKING-->

</body>
</html>
