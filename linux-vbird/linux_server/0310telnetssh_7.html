<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-TW" lang="zh-TW"><head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf8">
	<meta name="Author" content="VBird, 鸟哥">
	<meta name="Description" content="关于文字接口登入主机的 ssh 及图形接口登入主机的 VNC/XDMCP 等方法">
	<title>鸟哥的 Linux 私房菜 -- 远程联机服务器 SSH/XDMCP/VNC/RDP</title>
    <script src="../script/SpryMenuBar.js" type="text/javascript"></script>
	<script src="../script/index.js" type="text/javascript"></script>
	<link href="../css/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
    <link href="../css/main.css" rel="stylesheet" type="text/css" />
    </head><body style="margin: 0pt; padding: 0pt;" class="table"onload="MM_preloadImages('../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html')">

<center>
<div id="apDiv5">
<div> <LINK REL="SHORTCUT ICON" HREF="../index-2.html">
<!-- ImageReady Slices (title3.ai) -->
<table id="___01" width="898" height="81" border="0" align="center" cellpadding="0" cellspacing="0";>
	<tr>
		<td colspan="15">
			<img src="image/title/title_01.png" width="900" height="1" alt=""></td>
	</tr>
	<tr>
		<td rowspan="4" bgcolor="#182448"><p><img src="http://linux.vbird.org/cgi-bin/Count.cgi?dd=C&amp;ft=5&amp;sh=T&amp;md=8&amp;pad=Y&amp;df=vbird.dic.ksu.edu.tw.dat" width="93" align="left" title="計數器" /></p>
	    <p><font color="#FFFFFF" size="-1">since2012/04/23</font></p></td>
		<td rowspan="4" align="left" valign="top"><a href="../index.html"><img src="image/title/title_03.png" alt="" width="263" height="79" border="0"></a></td>
		<td colspan="13">
			<img src="image/title/title_04.png" alt="" width="535" height="9" border="0"></td>
	</tr>
	<tr>
		<td rowspan="3">
			<img src="image/title/title_05.png" alt="" width="53" height="70" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="../linux_basic/0110whatislinux.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image51','','image/title/title_06.png',1)"><img src="image/title/title3_06.png" name="Image51" width="106" height="25" border="0" id="Image51" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_07.png" alt="" width="27" height="37" border="0"></td>
		<td colspan="3" align="left" valign="top"><a href="0110network_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image52','','image/title/title_08.png',1)"><img src="image/title/title3_08.png" name="Image52" width="107" height="25" border="0" id="Image52" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_09.png" alt="" width="37" height="37" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="../about.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image53','','image/title/title_10.png',1)"><img src="image/title/title3_10.png" name="Image53" width="75" height="25" border="0" id="Image53" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_11.png" alt="" width="35" height="70" border="0"></td>
		<td align="left" valign="top"><a href="mailto:vbird@mail.vbird.idv.tw" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image54','','image/title/title_12.png',1)"><img src="image/title/title3_12.png" name="Image54" width="74" height="25" border="0" id="Image54" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_13.png" alt="" width="21" height="70" border="0"></td>
	</tr>
	<tr>
		<td colspan="2">
			<img src="image/title/title_14.png" alt="" width="106" height="12" border="0"></td>
		<td colspan="3">
			<img src="image/title/title_15.png" alt="" width="107" height="12" border="0"></td>
		<td colspan="2">
			<img src="image/title/title_16.png" width="75" height="12" alt=""></td>
		<td rowspan="2">
			<img src="image/title/title_17.png" alt="" width="74" height="45" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/title_18.png" alt="" width="15" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar1" class="MenuBarHorizontal">
	  <li><a href="../linux_basic/linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image44','','image/title/title_19.png',1)"><img src="image/title/title3_19.png" name="Image44" width="123" height="33" border="0" id="Image44" /></a>
			    <ul>
			      <li><a href="../linux_basic/Mandrake9.0/mandrake9.0.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image46','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image46" width="120" height="26" border="0" id="Image46" alt="" /></a></li>
                  <li><a href="../linux_basic/fedora_4/fc4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image47','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image47" width="120" height="26" border="0" id="Image47" alt="" /></a></li>
                  <li><a href="../linux_basic/linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image48','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image48" width="120" height="26" border="0" id="Image48" alt="" /></a></li>
                </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_20.png" alt="" width="42" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar2" class="MenuBarHorizontal">
	  <li><a href="index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image45','','image/title/title_21.png',1)"><img src="image/title/title3_21.png" name="Image45" width="125" height="33" border="0" id="Image45" /></a>
			    <ul>
			      <li><a href="linux_redhat9/redhat9.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image43','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image43" width="120" height="26" border="0" id="Image43" alt=""/></a></li>
			      <li><a href="centos4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image49','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image49" width="120" height="26" border="0" id="Image49" alt="" /></a></li>
			      <li><a href="index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image50','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image50" width="120" height="26" border="0" id="Image50" alt="" /></a></li>
		        </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_22.png" alt="" width="47" height="33" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/Spacer.gif" width="101" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="263" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="53" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="15" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="91" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="27" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="5" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="42" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="60" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="37" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="28" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="47" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="35" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="74" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="22" height="1" alt=""></td>
	</tr>
</table>
<!-- End ImageReady Slices -->
<script type="text/javascript">
<!--
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
var MenuBar2 = new Spry.Widget.MenuBar("MenuBar2", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
//-->
</script>
</div>
<table summary="本文内容的排版" style="width: 898px;" border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td style="width: 16px; height: 16px;">　</td>
    <td style="width: 866px; height: 16px;">　</td>
    <td style="width: 16px; height: 16px;">　</td></tr>
<tr><td style="width: 16px; font-size: 6px;">　</td>
    <td width="866">

<!-- 本文的档头部分 -->
<div style="text-align:center">
    <a href="http://linux.vbird.org/linux_server/0310telnetssh.php">
    <span class="text_head0">第十一章、远程联机服务器<span class="text_head_en">SSH / XDMCP / VNC / RDP</span></span></a><br>
</div>
    <div style="text-align:right">
        <span class="text_history">最近更新日期：2011/11/24</span>
    </div>
<!-- 本文的连结区部分 -->
<div class="block1">
<span class="text_h1">
11.7 <a href="#hint">重点回顾</a><br>
11.8 <a href="#ex">课后练习</a><br>
11.9 <a href="#reference">参考数据与延伸阅读</a><br>
<span class="text_h2">
11.10<a href="http://phorum.vbird.org/viewtopic.php?p=114550" target="_blank">针对本文的建议：http://phorum.vbird.org/viewtopic.php?p=114550</a><br>
</span>
</span></div>
<!-- 本文的正式部分 -->
<hr><a name="hint"></a><img src="../image/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">11.7 重点回顾</span><br>
<div class="block1">
<ul class="text_import2">
	<li>远程联机服务器可以让使用者在任何一部计算机登入主机，以使用主机的资源或管理与维护主机；</li>
	<li>常见的远程登录服务有 rsh, telnet, ssh, vnc, xdmcp 及 RDP 等；</li>
	<li>telnet 与 rsh 都是以明码传输数据，当数据在 Internet 上面传输时较不安全；</li>
	<li>ssh 由于使用密钥系统，因此数据在 Internet 上面传输时是加密过的，所以较为安全；</li>
	<li>但 ssh 还是属于比较危险的服务，请不要对整个 Internet 开放 ssh 的可登入权限，可利用 iptables 规范可登入范围；</li>
	<li>ssh 的 public Key 是放在服务器端，而 private key 是放在 client 端；</li>
	<li>ssh 的联机机制有两种版本，建议使用可确认联机正确性的 version 2 ；</li>
	<li>使用 ssh 时，尽量使用类似 email 的方式来登入，亦即： ssh username@hostname</li>
	<li>client 端可以比对 server  传来的 public key 的一致性，利用的档案为 ~user/.ssh/known_hosts；</li>
	<li>ssh 的 client 端软件提供 ssh, scp, sftp 等程序；</li>
	<li>制作不需要密码的 ssh 账号可利用 ssh-keygen -t rsa 来制作 public, private Key pair；</li>
	<li>上述指令所制作出的 public key 必须要上传到 server 的 ~user/.ssh/authorized_keys 档案中；</li>
	<li>Xdmcp 是透过 X display manager (xdm, gdm, kdm 等) 所提供的功能协议；</li>
	<li>若 client 端为 Linux 时，需要在 X 环境下以 xhost 增加可连接到本机 X Server 的 IP 才行；</li>
	<li>除了 Xdmcp 之外，我们可以利用 VNC 来进行 X 的远程登录架构；</li>
	<li>VNC 预设开的 port number 为 5900  开始，每个 port 仅允许一个联机；</li>
	<li>rsync 可透过 ssh 的服务通道或 rsync --daemon 的方式来联机传输，其主要功能可以透过类似镜像备份，
		仅备份新的数据，因此传输备份速度相当快速！</li>
</ul>
</div>


<hr><a name="ex"></a><img src="../image/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">11.8 本章习题</span><br>
<div class="block1">
<ul>
	<li>Telnet 与 SSH 都是远程联机服务器，为何我们都会推荐使用 SSH 而避免使用 Telnet 呢？原因何在？
	<div class="blockex">
	因为 Telnet 除了使用『明码』传送数据外，本身 telnet 就是很容易被入侵的一个服务器，所以当然也就比较危险了。
	至于 ssh 其实也不是很安全的！由台湾计算机危机处理小组的文件可以明显的发现 openssl + openssh 
	也是常常有漏洞在发布！不过，比起 telnet 来说，确实是稍微安全一些！ 
	</div></li>

	<li>请尝试说明 SSH 在 Server 与 Client 端联机时的封包加密机制；
	<div class="blockex">
	利用 key pair 来达到加密的机制：Server 提供 Public Key 给 Client 端演算 Private key ，以提供封包传送时的加密、解密！
	</div></li>

	<li>请问 SSH 的配置文件是哪一个？如果我要修改让 root 无法使用 SSH 联机进入我的
	SSH 主机，应该如何设定？又，如果要让 badbird 这个用户无法登入 SSH 主机，该如何设定？
	<div class="blockex">
	SSH 配置文件档名为 sshd_config ，通常放置在 /etc/ssh/sshd_config 内；如果不想让 root 登入，可以修改 
	sshd_config 内的参数成为：『PermitRootLogin no 』，并重新启动 ssh 来设定！如果要让 badbird 
	使用者无法登入，同样在 sshd_config 里面设定为：『DenyUsers badbird』即可！
	</div></li>

	<li>在 Linux 上，预设的 Telnet 与 SSH 服务器使用的埠口(port number)各为多少？
	<div class="blockex">
	telnet 与 ssh 的埠口分别是：23 与 22！请参考 /etc/services 喔！ 
	</div></li>

	<li>如果发现我无法在 Client 端使用 ssh 程序登入我的 Linux 主机，但是 Linux
	主机却一切正常，可能的原因为何？(防火墙、known_hosts...)
	<div class="blockex">
	无法登入的原因可能有很多，最好先查询一下 /var/log/messages 里面的错误讯息来判断，当然，还有其他可能的原因为：
	<ol>
	<li>被防火墙挡住了，请以 iptables -L -n 来察看，当然也要察看 /etc/hosts.deny；</li>
	<li>可能由于主机重新启动过， public key 改变了，请修改你的 ~/ssh/known_hosts 里面的主机 IP ；</li>
	<li>可能由于 /etc/ssh/sshd_config 里面的设定问题，导致你这个使用者无法使用；</li>
	<li>在 /etc/passwd 里面，你的 user 不具有可以登入的 shell ；</li>
	<li>其他因素(如账号密码过期等等)</li></ol>
	</div></li>

	<li>既然 ssh 是比较安全的资料封包传送方式，那么我就可以在 Internet 上面开放我的
	Linux 主机的 SSH 服务了吗？！请说明你选择的答案的原因！
	<div class="blockex">
	最好不要对 Internet 开放你的 SSH 服务，因为 SSH 的加密函式库使用的是 openssl ，一般 Linux distribution 使用的 
	SSH 则是 openssh ，这两个套件事实上仍有不少的漏洞被发布过，因此，最好不要对 Internet 开放，毕竟 
	SSH 对于主机的权限是很高的！ 
	</div></li>
</ul>
</div>


<hr><a name="reference"></a><img src="../image/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">11.9 参考数据与延伸阅读</span><br>
<div class="block1">
<ul>
	<li><a name="ps1"></a>注1：与 SSH 服务器有关的两个重要官网<br>
		OpenSSH 官方网站：<a href="http://www.openssh.com/" target="_blank">http://www.openssh.com/</a><br>
		OpenSSL 官方网站：<a href="http://www.openssl.org/" target="_blank">http://www.openssl.org/</a></li>
	<li><a name="ps2"></a>注2：与 putty 及 pietty 有关的网站<br>
		putty 官方网站：<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank">http://www.chiark.greenend.org.uk/~sgtatham/putty/</a><br>
		pietty 中文网站：<a href="http://ntu.csie.org/~piaip/pietty/" target="_blank">http://ntu.csie.org/~piaip/pietty/</a></li>
	<li><a name="ps3"></a>注3：XDMCP 维基百科：<a href="http://en.wikipedia.org/wiki/X_display_manager_(program_type)" target="_blank">http://en.wikipedia.org/wiki/X_display_manager_(program_type)</a></li>
	<li><a name="ps4"></a>注4：教你怎么设定 gdm 的 custom.conf<br>
		<a href="http://www.idevelopment.info/data/Unix/Linux/LINUX_ConfiguringXDMCPRedHatLinux.shtml" target="_blank">http://www.idevelopment.info/data/Unix/Linux/LINUX_ConfiguringXDMCPRedHatLinux.shtml</a><br>
		<a href="http://www.yolinux.com/TUTORIALS/GDM_XDMCP.html" target="_blank">http://www.yolinux.com/TUTORIALS/GDM_XDMCP.html</a></li>
	<li><a name="ps5"></a>注5：自由的 X server -- Xming： <a href="http://sourceforge.net/projects/xming/" target="_blank">http://sourceforge.net/projects/xming/</a></li>
	<li><a name="ps6"></a>注6：与 VNC 相关的资料<br>
		man vncserver, man Xvnc<br>
		使用 X 的 VNC Module：<a href="http://phorum.study-area.org/viewtopic.php?t=25713" target="_blank">http://phorum.study-area.org/viewtopic.php?t=25713</a><br>
		<a href="http://fedoranews.org/tchung/vnc/03.shtml" target="_blank">http://fedoranews.org/tchung/vnc/03.shtml</a></li>
	<li><a name="ps7"></a>注7：维基百科：<a href="http://en.wikipedia.org/wiki/Remote_Desktop_Protocol" target="_blank">http://en.wikipedia.org/wiki/Remote_Desktop_Protocol</a></li>
	<li><a name="ps8"></a>注8：官网在 <a href="http://xrdp.sourceforge.net/" target="_blank">http://xrdp.sourceforge.net/</a></li>
	<li><a name="ps9"></a>注9： Fedora 基金会提供的 Extra Packages for Enterprise Linux (EPEL) 计划：<br>
		<a href="http://fedoraproject.org/wiki/EPEL" target="_blank">http://fedoraproject.org/wiki/EPEL</a></li>
	<li><a name="ps10"></a>注10：rsync 的相关用法介绍：<br>
		酷学园：用 rsync 做备份：<a href="http://phorum.study-area.org/viewtopic.php?t=15553" target="_blank">http://phorum.study-area.org/viewtopic.php?t=15553</a><br>
		ADJ 实验室的 rsync + SSH：<a href="http://www.adj.idv.tw/server/linux_rsync.php" target="_blank">http://www.adj.idv.tw/server/linux_rsync.php</a></li>
	<li><a name="20111104"></a>公钥加密机制的维基百科解释：<a href="http://en.wikipedia.org/wiki/Public_Key_Cryptography" target="_blank">http://en.wikipedia.org/wiki/Public_Key_Cryptography</a></li>
</ul>
</div>
<hr />
    </td>
    <td style="width: 16px; font-size: 6px;">　</td></tr>
<tr><td style="width: 16px; height: 16px;">　</td>
    <td style="width: 866px; height: 16px;">　</td>
    <td style="width: 16px; height: 16px;">　</td></tr>
</tbody></table>

<div style="padding-top: 0px; text-align: center;">
<span style="font-size: 80%;">
	<a href="http://linux.vbird.org/" target="_top" title="前往鸟哥的首页">http://linux.vbird.org</a>
	is designed by <a href="mailto:vbird@mail.vbird.idv.tw" title="联络鸟哥(我不要广告信！)">VBird</a>
		during 2001-2011. <a href="http://www.ksu.edu.tw/" target="_blank">ksu.edu</a></span>
         ﻿<div id="apDiv4">
      <p>本网页主要以Firefox配合解析度 1024x768 作为设计依据&nbsp;&nbsp;&nbsp;&nbsp; 鸟哥自由软件整合应用研究室</p></div></div>
</div>
</center>
</body></html>
