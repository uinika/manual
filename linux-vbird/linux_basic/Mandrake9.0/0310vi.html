<!DOCTYPE HTML PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>


   <meta http-equiv="Content-Type" content="text/html; charset=utf8">
   <meta name="Author" content="VBird">
   <title>鸟哥的 Linux 私房菜 -- vi 字处理器</title>
    <script src="../../script/SpryMenuBar.js" type="text/javascript"></script>
	<script src="../../script/index.js" type="text/javascript"></script>
	<link href="../../css/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
    <link href="../../css/main.css" rel="stylesheet" type="text/css" />

<!-- saved from url=(0022)http://internet.e-mail -->
</head><body style="margin: 0pt; padding: 0pt;" class="table"onload="MM_preloadImages('../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html')">

<center>
<div id="apDiv5">
<div> <LINK REL="SHORTCUT ICON" HREF="../../index-2.html">
<!-- ImageReady Slices (title3.ai) -->
<table id="___01" width="898" height="81" border="0" align="center" cellpadding="0" cellspacing="0";>
	<tr>
		<td colspan="15">
			<img src="image/title/title_01.png" width="900" height="1" alt=""></td>
	</tr>
	<tr>
		<td rowspan="4" bgcolor="#182448"><p><img src="http://linux.vbird.org/cgi-bin/Count.cgi?dd=C&amp;ft=5&amp;sh=T&amp;md=8&amp;pad=Y&amp;df=vbird.dic.ksu.edu.tw.dat" width="93" align="left" title="計數器" /></p>
	    <p><font color="#FFFFFF" size="-1">since2012/04/23</font></p></td>
		<td rowspan="4" align="left" valign="top"><a href="../../index.html"><img src="image/title/title_03.png" alt="" width="263" height="79" border="0"></a></td>
		<td colspan="13">
			<img src="image/title/title_04.png" alt="" width="535" height="9" border="0"></td>
	</tr>
	<tr>
		<td rowspan="3">
			<img src="image/title/title_05.png" alt="" width="53" height="70" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="../0110whatislinux.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image51','','image/title/title_06.png',1)"><img src="image/title/title3_06.png" name="Image51" width="106" height="25" border="0" id="Image51" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_07.png" alt="" width="27" height="37" border="0"></td>
		<td colspan="3" align="left" valign="top"><a href="../../linux_server/0110network_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image52','','image/title/title_08.png',1)"><img src="image/title/title3_08.png" name="Image52" width="107" height="25" border="0" id="Image52" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_09.png" alt="" width="37" height="37" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="../../about.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image53','','image/title/title_10.png',1)"><img src="image/title/title3_10.png" name="Image53" width="75" height="25" border="0" id="Image53" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_11.png" alt="" width="35" height="70" border="0"></td>
		<td align="left" valign="top"><a href="mailto:vbird@mail.vbird.idv.tw" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image54','','image/title/title_12.png',1)"><img src="image/title/title3_12.png" name="Image54" width="74" height="25" border="0" id="Image54" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_13.png" alt="" width="21" height="70" border="0"></td>
	</tr>
	<tr>
		<td colspan="2">
			<img src="image/title/title_14.png" alt="" width="106" height="12" border="0"></td>
		<td colspan="3">
			<img src="image/title/title_15.png" alt="" width="107" height="12" border="0"></td>
		<td colspan="2">
			<img src="image/title/title_16.png" width="75" height="12" alt=""></td>
		<td rowspan="2">
			<img src="image/title/title_17.png" alt="" width="74" height="45" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/title_18.png" alt="" width="15" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar1" class="MenuBarHorizontal">
	  <li><a href="../linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image44','','image/title/title_19.png',1)"><img src="image/title/title3_19.png" name="Image44" width="123" height="33" border="0" id="Image44" /></a>
			    <ul>
			      <li><a href="mandrake9.0.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image46','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image46" width="120" height="26" border="0" id="Image46" alt="" /></a></li>
                  <li><a href="../fedora_4/fc4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image47','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image47" width="120" height="26" border="0" id="Image47" alt="" /></a></li>
                  <li><a href="../linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image48','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image48" width="120" height="26" border="0" id="Image48" alt="" /></a></li>
                </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_20.png" alt="" width="42" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar2" class="MenuBarHorizontal">
	  <li><a href="../../linux_server/index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image45','','image/title/title_21.png',1)"><img src="image/title/title3_21.png" name="Image45" width="125" height="33" border="0" id="Image45" /></a>
			    <ul>
			      <li><a href="../../linux_server/linux_redhat9/redhat9.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image43','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image43" width="120" height="26" border="0" id="Image43" alt=""/></a></li>
			      <li><a href="../../linux_server/centos4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image49','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image49" width="120" height="26" border="0" id="Image49" alt="" /></a></li>
			      <li><a href="../../linux_server/index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image50','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image50" width="120" height="26" border="0" id="Image50" alt="" /></a></li>
		        </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_22.png" alt="" width="47" height="33" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/Spacer.gif" width="101" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="263" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="53" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="15" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="91" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="27" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="5" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="42" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="60" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="37" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="28" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="47" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="35" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="74" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="22" height="1" alt=""></td>
	</tr>
</table>
<!-- End ImageReady Slices -->
<script type="text/javascript">
<!--
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
var MenuBar2 = new Spry.Widget.MenuBar("MenuBar2", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
//-->
</script>
</div>
<div align="left">
<font color="#3333ff"><font size="+2"><a href="http://linux.vbird.org/linux_basic/0310vi/0310vi.php" target="_self"><font face="Times New Roman CE">vi
</font><font face="标楷体">文字处理软件</font></a></font></font><br>
本文已不再维护，新文章请参考 <a href="http://linux.vbird.org/linux_basic/0310vi.php">此处</a>

<div align="right"><font face="新细明体"><font color="#3333ff"><font size="-1">最近更新日期：2003/02/25</font></font></font></div>
<font color="#000099"><font size="-2">　</font></font>
<table width="100%" bgcolor="#ffcccc" border="1" cols="1">
<tbody><tr>
<td><font color="#000099"><font size="-1">一个系统管理员至少应该要熟悉一种字处理软件，以方便未来的系统管理，包括系统设定与架站时候的参数配置文件修订等等工作之进行。在
Unix-Like 系统中，肯定看的到的文书编辑器就是 vi 啦，他算是最正规的文字接口下的字处理器了。为什么字处理器很重要呢？还记得前两个章节中我们提到的
/etc/fstab 这个档案吗？您如果想要修改他的话，要如何修改呢？当然是使用文书编辑器来编辑他啰，那么在
Linux 的指令列模式当中使用什么文书编辑器呢呢？当然几乎就是 vi 啦！此外，后续的
shell scripts 章节与 Linux 架站设定的档案等等，几乎都是使用他来进行设定耶！那
vi 重不重要呢？你猜猜?</font></font></td>
</tr>
</tbody></table>
<font color="#000099"><font size="-2">　</font></font>
<br><font color="#000099"><font size="+1"><a href="#vi_what">vi 简易说明</a></font></font>
<br><font color="#000099"><font size="+1"><a href="#ex">简易执行范例</a></font></font>
<br><font color="#000099"><font size="+1"><a href="#command">命令行内容说明</a></font></font>
<br><font color="#000099"><font size="+1"><a href="#case_study">一个案例练习</a></font></font>
<br><font color="#000099"><font size="+1"><a href="#LPI">本章与 LPI 的关系</a></font></font>
<br><font color="#000099"><font size="+1"><a href="#FAQ">本章习题练习</a></font></font>
<br>
<hr width="100%"><a name="vi_what"></a><font color="#000099"><font size="+1">vi
简易说明</font></font>
<blockquote>由前面一路走来，我们一直建议使用文本模式来处理 Linux 的系统设定问题，因为不但可以让您比较容易了解到
Linux 的运作状况，也比较容易了解整个设定的基本精神，更能『保证』您的修改可以顺利的被运作
( 这里要再次的强调，不同的 Linux distribution 各有其不同的附加软件，例如
Red Hat 的 userconf, Linuxconf, ntsysv 与 setup 等等，而 Caldera 则有 COAS
等等，因此，如果您只会使用此种类型的软件来控制您的 Linux 系统时，当接管不同的
Linux distribution 时，呵呵！那可就苦恼了！ ) 所以，<font color="#000066">在
Linux 的系统中使用文本编辑器来编辑您的 Linux 参数配置文件，嗯！可是一件很重要的事情呦</font>！所以说嘛！系统管理员至少应该要熟悉一种字处理器的！
<p>由 <a href="http://linux.vbird.org/linux_basic/0310vi/0110whatislinux.php">Linux是什么 </a>介绍中，我们知道 <font color="#000066">Linux
与 Unix 系统中的参数文件几乎都是 ASCII 码的『纯文本』档</font>！因此，利用简单的文字编辑软件就可以马上修改
Linux 的参数档啰！然而，与 Windows 不同的是，如果您用惯了 Microsoft Word
或 Corel Wordperfect 的话，那么除了 Xwindows 里面的编辑程序(如 xemacs )用起来尚可应付外，于
Linux 的文本模式下，会觉得档案编辑程序都没有 Windows 程序那么方便。( 注：什么是
ASCII 的纯文本档案呢？说穿了，就是您开启的档案可以将内容给您看到的档案，而不是呈现乱码的档案，那就是纯文本档了！当您以
Windows 的 word 存一个档案时，在 DOS 的情况下使用 type ，嗯！完全不知到内容是什么？因为会出现很多的乱码，那并非是纯文本档，而如果以
word 在存档时，选择『纯文本类型』，嗯！那就可以使用 type 看到该档案的内容了！总之，纯文本档相当的容易修改就是了！
)
</p><p>无论如何，要管理好 Linux 系统，纯文本的手工设定仍然是需要的！所以请您千万不要嫌麻烦，努力的将下文参详一下吧！以下我们以最常见到的
vi 这套文书软件来介绍 Linux 底下的文书编辑动作。 ( 注： vi 是 Unix 预设的文字处理软件，当然，也是
Linux 预设的文字处理软件！ )
</p><p>基本上 vi 共分为三种模式，分别是『<font color="#000066">一般模式</font>』、『<font color="#000066">编辑模式</font>』与『<font color="#000066">指令列命令模式</font>』三种！
</p><ul>
<li>
<font color="#000099">一般模式</font>：以 vi 处理一个档案的时后，一进入该档案就是一般模式了。在这个模式中，你可以使用『上下左右』按键来移动光标，您可以使用『删除字符』或『删除整行』来处理档案内容，也可以使用『复制、贴上』来处理您的文件数据。</li>
</ul>

<ul>
<li>
<font color="#000099">编辑模式</font>：在一般模式中可以处理删除、复制、贴上等等的动作，但是却无法编辑的！要等到您按下『<font face="细明体"><font color="#000066">i,
I, o, O, a, A, r, R</font></font>』等字母之后才会进入编辑模式。注意了！通常在
Linux 中，按下上述的字母时，在画面的左下方会出现『 <font color="#000066">INSERT
或 REPLACE </font>』的字样，才可以输入任何字来输入到您的档案中！而如果要回到一般模式时，则必须要按下『<b><font color="#000066">Esc</font></b>』这个按键即可退出编辑模式。</li>
</ul>

<ul>
<li>
<font color="#000099">指令列命令模式</font>：在一般模式当中，输入『<font color="#000066">
: 或 / </font>』就可以将光标移动到最底下那一行，在这个模式当中，可以提供您『搜寻资料』的动作，而读取、存盘、大量取代字符、离开
vi 、显示行号 等等的动作则是在此模式中达成的！</li>
</ul>
简单的说，我们可以将这三个模式想成底下的图标来表示之：
</div>
<center><img src="0310vi_files/0310vi_1.jpg" nosave="" width="465" height="292"></center>
闲话不多说，我们底下以一个简单的例子来进行说明吧！</blockquote>

<div align="left">
<hr width="100%"><a name="ex"></a><font color="#000099"><font size="+1">简易执行范例</font></font>
<blockquote>我们怎么使用 vi 建立一个档名为 test.txt 的资料呢？也是很简单的啦，
<ol>
<li>
<b><font color="#000099">使用 vi 进入一般模式；</font></b></li>
</div>

<table width="500" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
root]# </font><font color="#ffff00">vi test.txt</font></font></font></td>
</tr>
</tbody></table>
<div align="left">
直接输入『 vi 档名』即可进入 vi 了！如下图所示，左下角还会显示这个档案目前的状态！如果是新建档案会显示
[New File]，如果是以存在的档案，则会显示目前的文件名、行数与字符数，例如：『"/etc/man.config"
145L, 4614C』
</div>
<br><img src="0310vi_files/0310vi_2.jpg" nosave="" width="397" height="196">
<br>
<div align="left">　
<li>
<b><font color="#000099">按下 i 进入编辑模式，开始编辑文字；</font></b></li>

<br>在一般模式之中，只要按下 I, o, a 等字符，就可以进入编辑模式了！在编辑模式当中，您可以发现在左下角会出现
–INSERT- 的画面，那就是可以输入任意字符的提示啰！这个时候，键盘上除了
[Esc] 这个按键之外，其他的按键都可以视作为一般的输入按钮了，所以您可以进行任何的编辑啰！（注：在
vi 里面， [tab] 这个按钮所得到的结果与空格符所得到的结果是不一样的，特别强调一下！）
</div>
<br><img src="0310vi_files/0310vi_3.jpg" nosave="" width="399" height="195">
<br>　
<div align="left">
<li>
<b><font color="#000099">按下 [ESC] 按钮回到一般模式；</font></b></li>

<br>好了，假设我已经按照上面的样式给他编辑完毕了，那么应该要如何退出呢？是的！没错！就是给他按下
[Esc] 这个按钮即可！马上你就会发现画面左下角的 – INSERT – 不见了！
<br>　
<li>
<b><font color="#000099">在一般模式中按下 :wq 储存后离开 vi ！</font></b></li>

<br>OK，我们要存档了，存盘并离开的指令很简单，输入『:wq』即可存档离开！（注意了，按下
: 该光标就会移动到最底下一行去！）这时你在提示字符后面输入『 ls -l 』即可看到我们刚刚建立的
test.txt 档案啦！整个图示有点像底下这样：
</div>
<br><img src="0310vi_files/0310vi_4.jpg" nosave="" width="401" height="195">
<div align="left">
<br>如此一来，您的档案 test.txt 就已经建立起来啰！很简单吧！需要注意的是，如果您的档案权限不对，例如为
-r--r--r-- 时，那么可能会无法写入，那么可以使用『强制写入』的方式吗？可以！使用『:wq!』多加一个惊叹号即可！不过，需要特别注意呦！那个是在『您的权限可以改变』的情况下才能成立的！关于权限的概念，请参考一下
<a href="http://linux.vbird.org/linux_basic/0310vi/0210filepermission.php">Linux
的档案权限概念 </a>啰！</ol>
</blockquote>

<hr width="100%"><a name="command"></a><font color="#000099"><font size="+1">命令行内容说明</font></font>
<blockquote>如前所述，所谓的命令行或命令模式，就是在最下面一行没有显示『<font color="#000099">--INSERT--</font>』或者『<font color="#000099">--REPLACE--</font>』字样的时候。通常在命令行中的指令有下面几种：（注意，当按下
『:』 时，光标会自动移动到屏幕的最下面一行！）
</div>
<br>　
<table width="90%" border="1" cols="2">
<tbody><tr>
<td width="200" bgcolor="#ffcccc"><font face="标楷体"><font color="#000099"><font size="+1">一般模式：</font></font></font></td>

<td bgcolor="#ffcccc"><font face="标楷体"><font color="#000099"><font size="+1">移动光标</font></font></font></td>
</tr>

<tr>
<td>
<center><font face="细明体">h 或 向左箭头键</font></center>
</td>

<td><font face="细明体">光标向左移动一个字符</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">j 或 向下箭头键</font></center>
</td>

<td><font face="细明体">光标向下移动一个字符</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">k 或 向上箭头键</font></center>
</td>

<td><font face="细明体">光标向上移动一个字符</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">l 或 向右箭头键</font></center>
</td>

<td><font face="细明体">光标向右移动一个字符</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">[Ctrl] + [f]</font></center>
</td>

<td><font face="细明体">屏幕『向前』移动一页</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">[Ctrl] + [b]</font></center>
</td>

<td><font face="细明体">屏幕『向后』移动一页</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">[Ctrl] + [d]</font></center>
</td>

<td><font face="细明体">屏幕『向前』移动半页</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">[Ctrl] + [u]</font></center>
</td>

<td><font face="细明体">屏幕『向后』移动半页</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">+</font></center>
</td>

<td><font face="细明体">光标移动到非空格符的下一列</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">-</font></center>
</td>

<td><font face="细明体">光标移动到非空格符的上一列</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">n&lt;space&gt;</font></center>
</td>

<td><font face="细明体">按下数字后再按空格键，光标会向右移动这一行的 n
个字符。例如 20&lt;space&gt; 则光标会向后面移动 20 个字符距离。</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">0</font></center>
</td>

<td><font face="细明体">这是数字『 0 』：移动到这一行的最前面字符处</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">$</font></center>
</td>

<td><font face="细明体">移动到这一行的最后面字符处</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">H</font></center>
</td>

<td><font face="细明体">光标移动到这个屏幕的最上方那一行</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">M</font></center>
</td>

<td><font face="细明体">光标移动到这个屏幕的中央那一行</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">L</font></center>
</td>

<td><font face="细明体">光标移动到这个屏幕的最下方那一行</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">G</font></center>
</td>

<td><font face="细明体">移动到这个档案的最后一行</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">nG</font></center>
</td>

<td><font face="细明体">移动到这个档案的第 n 行。例如 20G 则会移动到这个档案的
20 行(可配合 :set nu)</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">n&lt;Enter&gt;</font></center>
</td>

<td><font face="细明体">光标向下移动 n 行</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td bgcolor="#ffcccc"><font face="标楷体"><font color="#000099"><font size="+1">一般模式：</font></font></font></td>

<td bgcolor="#ffcccc"><font face="标楷体"><font color="#000099"><font size="+1">搜寻与取代</font></font></font></td>
</tr>

<tr>
<td>
<center><font face="细明体">/word</font></center>
</td>

<td><font face="细明体">向光标之后寻找一个字符串名称为 word 的字符串。</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">?word</font></center>
</td>

<td><font face="细明体">向光标之前寻找一个字符串名称为 word 的字符串。</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">:n1,n2s/word1/word2/g</font></center>
</td>

<td><font face="细明体">在第 n1 与 n2 行之间寻找 word1 这个字符串，并将该字符串取代为
word2 ！</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">:1,$s/word1/word2/g</font></center>
</td>

<td><font face="细明体">从第一行到最后一行寻找 word1 字符串，并将该字符串取代为
word2 ！</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">:1,$s/word1/word2/gc</font></center>
</td>

<td><font face="细明体">从第一行到最后一行寻找 word1 字符串，并将该字符串取代为
word2 ！</font>且在取代前显示提示字符给用户确认（conform）是否需要取代！（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td bgcolor="#ffcccc"><font face="标楷体"><font color="#000099"><font size="+1">一般模式：</font></font></font></td>

<td bgcolor="#ffcccc"><font face="标楷体"><font color="#000099"><font size="+1">删除、复制与贴上</font></font></font></td>
</tr>

<tr>
<td>
<center><font face="细明体">x, X</font></center>
</td>

<td><font face="细明体">x 为向后删除一个字符， X 为向前删除一个字符</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">nx</font></center>
</td>

<td><font face="细明体">向后删除 n 个字符</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">dd</font></center>
</td>

<td><font face="细明体">删除游标所在的那一整列</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">ndd</font></center>
</td>

<td><font face="细明体">删除光标所在的向下 n 列，例如 20dd 则是删除 20
列</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">d1G</font></center>
</td>

<td><font face="细明体">删除游标所在到第一行的所有数据</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">dG</font></center>
</td>

<td><font face="细明体">删除游标所在到最后一行的所有数据</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">yy</font></center>
</td>

<td><font face="细明体">复制游标所在的那一行</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">nyy</font></center>
</td>

<td><font face="细明体">复制光标所在的向下 n 列，例如 20yy 则是复制 20
列</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">y1G</font></center>
</td>

<td><font face="细明体">复制游标所在列到第一列的所有数据</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">yG</font></center>
</td>

<td><font face="细明体">复制游标所在列到最后一列的所有数据</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">p, P</font></center>
</td>

<td><font face="细明体">p 为复制的数据在光标下一行贴上，P 则为贴在游标上一行！</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">J</font></center>
</td>

<td><font face="细明体">将光标所在列与下一列的数据结合成同一列</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">c</font></center>
</td>

<td><font face="细明体">重复删除多个数据，例如向下删除 10 行，[ 10cj ]</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">u</font></center>
</td>

<td><font face="细明体">复原前一个动作。</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td bgcolor="#ffcccc"><font face="标楷体"><font color="#000099"><font size="+1">进入编辑模式</font></font></font></td>

<td bgcolor="#ffcccc"><font face="细明体">&nbsp;</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">i, I</font></center>
</td>

<td><font face="细明体">插入：在目前的光标所在处插入输入之文字，已存在的文字会向后退；（<font color="#3333ff">常用</font>）</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">a, A</font></center>
</td>

<td><font face="细明体">增加：由目前光标所在的下一个字开始输入，已存在的文字会向后退：（<font color="#3333ff">常用</font>）</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">o, O</font></center>
</td>

<td><font face="细明体">插入新的一行：从光标所在的下一行枝行首开始输入文字；（<font color="#3333ff">常用</font>）</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">r, R</font></center>
</td>

<td><font face="细明体">取代：r 会取代光标所在的那一个字符；R</font>会一直取代光标所在的文字，直到按下
ESC 为止；（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">Esc</font></center>
</td>

<td><font face="细明体">退出编辑模式，回到一般模式中</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td bgcolor="#ffcccc"><font face="标楷体"><font color="#000099"><font size="+1">指令列命令模式</font></font></font></td>

<td bgcolor="#ffcccc"><font face="细明体">&nbsp;</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">:w</font></center>
</td>

<td><font face="细明体">将编辑的数据写入硬盘档案中</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">:w!</font></center>
</td>

<td><font face="细明体">若文件属性为『只读』时，强制写入该档案</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">:q</font></center>
</td>

<td><font face="细明体">离开 vi </font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">:q!</font></center>
</td>

<td><font face="细明体">若曾修改过档案，又不想储存，使用 ! 为强制离开不储存档案。</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">:wq</font></center>
</td>

<td><font face="细明体">储存后离开，若为 :wq! 则为强制储存后离开</font>（<font color="#3333ff">常用</font>）</td>
</tr>

<tr>
<td>
<center><font face="细明体">:e!</font></center>
</td>

<td>将文件还原到最原始的状态！</td>
</tr>

<tr>
<td>
<center><font face="细明体">ZZ</font></center>
</td>

<td>若档案没有更动，则不储存离开，若档案已经经过更动，则储存后离开！</td>
</tr>

<tr>
<td>
<center><font face="细明体">:w [filename]</font></center>
</td>

<td><font face="细明体">将编辑的数据储存成另一个档案</font>（类似另存新档）</td>
</tr>

<tr>
<td>
<center><font face="细明体">:r [filename]</font></center>
</td>

<td><font face="细明体">在编辑的数据中，读入另一个档案的数据。亦即将 『filename』
这个档案内容加到游标所在行后面</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">:set nu</font></center>
</td>

<td><font face="细明体">显示行号，设定之后，会在每一行的前缀显示该行的行号</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">:set nonu</font></center>
</td>

<td><font face="细明体">与 set nu 相反，为取消行号！</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">n1,n2 w [filename]</font></center>
</td>

<td><font face="细明体">将 n1 到 n2 的内容储存成 filename 这个档案。</font></td>
</tr>

<tr>
<td>
<center><font face="细明体">:! command</font></center>
</td>

<td><font face="细明体">暂时离开 vi 到指令列模式下执行 command 的显示结果！例如[
:! ls /home ]</font></td>
</tr>
</tbody></table>

<div align="left">
<p>OK！会这些指令就已经很厉害了，因为常用到的指令也只有不到一半！通常 vi
的指令除了上面 VBird 注明的常用的几个外，其他是不用背的，你可以做一张简单的指令表在你的屏幕墙上，一有疑问可以马上的查询呦！</p></blockquote>

<hr width="100%"><a name="case_study"></a><font color="#000099"><font size="+1">一个案例练习</font></font>
<blockquote>来来来！测试一下您是否已经熟悉 vi 这个指令呢？请依照底下的需求进行您的指令动作(
请注意，该档案为 Mandrake 9.0 所附上的档案内容，如果是其他的 distribution
，可能结果会不太一样！ )，然后看一下结果在屏幕前面显示什么？
<ol>
<li>
<font face="细明体">请在 /root 这个目录下建立一个名为 vitest 的目录；</font></li>

<li>
<font face="细明体">进入 vitest 这个目录当中；</font></li>

<li>
<font face="细明体">将 /etc/man.config 拷贝到本目录底下；</font></li>

<li>
<font face="细明体">使用 vi 开启本目录下的 man.config 这个档案；</font></li>

<li>
<font face="细明体">在 vi 中设定一下行号；</font></li>

<li>
<font face="细明体">移动到第62 行，向右移动 40 个字符，请问您看到的双引号内是什么目录？</font></li>

<li>
<font face="细明体">移动到第一行，并且向下搜寻一下『 teTeX 』这个字符串，请问他在第几行？</font></li>

<li>
<font face="细明体">接着下来，我要将 50 到 100 行之间的 man 改为 MAN ，并且一个一个挑选是否需要修改，如何下达指令？</font></li>

<li>
<font face="细明体">修改完之后，突然反悔了，要全部复原，有哪些方法？</font></li>

<li>
<font face="细明体">我要复制 51 到 60 行这十行的内容，并且贴到最后一行之后；</font></li>

<li>
<font face="细明体">删除 11 到 30 行之间的 20 行；</font></li>

<li>
<font face="细明体">将这个档案另存成一个 man.test.config 的檔名；</font></li>

<li>
<font face="细明体">去到第 29 行，并且删除 15 个字符；</font></li>

<li>
<font face="细明体">请问目前的档案有多少行与多少字符？</font></li>

<li>
<font face="细明体">储存后离开吧！</font></li>
</ol>
整个的步骤可以如下所示：
<ol>
<li>
<font face="细明体"><font color="#000066">mkdir /root/vitest</font></font></li>

<li>
<font face="细明体"><font color="#000066">cd /root/vitest</font></font></li>

<li>
<font face="细明体"><font color="#000066">cp /etc/man.config .</font></font></li>

<li>
<font face="细明体"><font color="#000066">vi man.config</font></font></li>

<li>
<font face="细明体"><font color="#000066">: set nu</font></font></li>

<li>
<font face="细明体"><font color="#000066">先按下 62G ，再按下 40 + 向右键，会看到『/dir/bin/foo』</font></font></li>

<li>
<font face="细明体"><font color="#000066">先按下 1G ，然后按下 /teTeX 搜寻，会看到他在第
51 行！</font></font></li>

<li>
<font face="细明体"><font color="#000066">:50,100s/man/MAN/gc</font></font></li>

<li>
<font face="细明体"><font color="#000066">(1)简单的方法可以一直按 u 回复到原始状态，(2)使用不储存离开
:q! 之后，再重新读取一次该档案</font></font></li>

<li>
<font face="细明体"><font color="#000066">51G 然后在 10yy 之后按下 G 到最后一行，再给他
p 贴上十行！</font></font></li>

<li>
<font face="细明体"><font color="#000066">11G 之后，再给他 20dd 即可删除
20 行了；</font></font></li>

<li>
<font face="细明体"><font color="#000066">:w man.test.config</font></font></li>

<li>
<font face="细明体"><font color="#000066">29G 之后，再给他 15x 即可删除
15 个字符；</font></font></li>

<li>
<font face="细明体"><font color="#000066">135行，共 3903 个字符</font></font></li>

<li>
<font face="细明体"><font color="#000066">:wq!</font></font></li>
</ol>
如果您的结果都可以查的到，那么 vi 的使用上面应该没有太大的问题啦！剩下的问题会是在…..打字练习….</blockquote>

<hr width="100%"><a name="LPI"></a><font color="#000099"><font size="+1">本章与
LPI 的关系：</font></font>
<blockquote>在 <a href="http://www.lpi.org/" target="_blank">http://www.lpi.org</a>
所提供的 topic 当中， LPI 101 的 Topic 103 之 1.103.8 提到：『<font color="#000066">应试者应该能够学会使用
vi 文书编辑器，学习的目标包含了 vi 的插入、编辑、删除、复制与搜寻等功能的练习！</font>』至于使用到的指令与
vi 当中所会用到的数据与指令为：
<ul>
<li>
<font face="细明体"><font color="#000066">vi</font></font></li>

<li>
<font face="细明体"><font color="#000066">/, ? (请看搜寻部分)</font></font></li>

<li>
<font face="细明体"><font color="#000066">h, j, k, l (移动光标的部分，这个较常考！)</font></font></li>

<li>
<font face="细明体"><font color="#000066">G, H, L (移动光标的部分)</font></font></li>

<li>
<font face="细明体"><font color="#000066">i, c, d, dd, p, o, a (删除、编辑与贴上的部分)</font></font></li>

<li>
<font face="细明体"><font color="#000066">ZZ, :w!, :q!, :e!</font></font></li>

<li>
<font face="细明体"><font color="#000066">:!</font></font></li>
</ul>
</blockquote>

<hr width="100%"><a name="FAQ"></a><font color="#000099"><font size="+1">本章习题练习
( 要看答案请将鼠标移动到『答：』底下的空白处，按下左键圈选空白处即可察看
)</font></font>
<ul>
<li>
<font face="细明体"><font color="#000000">我要在某个档案的第 34 行向右移动
15 个字符，应该在一般模式下达什么指令？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ol>
<ol>
<li>
<font face="细明体"><font color="#ffffff">先按下 11G 到第 11 行；</font></font></li>

<li>
<font face="细明体"><font color="#ffffff">再按下 [ 15 + 向右键 ]，或 [
15l ] 亦可！</font></font></li>
</ol>
<font face="细明体"><font color="#000000">　</font></font></ol>

<li>
<font face="细明体"><font color="#000000">在 vi 里面， PageDown 按钮可以使用什么组合键来取代？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">[Ctrl] + f 可以向后翻一页</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何去到 vi 该档案里面的页首或页尾？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">去页首按下 1G ；</font></font>
<br><font face="细明体"><font color="#ffffff">去页尾按下&nbsp; G 即可</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何在一行中，移动到行头及行尾？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">移动到行头，按 0 ，</font></font>
<br><font face="细明体"><font color="#ffffff">移动到行尾按 $ 即可！</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">进入编辑模式的按钮？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">i, I, o, O, a, A, R</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">vi 里面， r 有什么功能？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">取代光标所在的那个字符！</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何将目前的页面另存新档？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">:w filename</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">在 linux 底下最常使用的文书编辑器为
vi ，请问如何进入编辑模式？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul>
<li>
<font face="细明体"><font color="#ffffff">在一般模式底下输入： i, I, a,
A 为在本行当中输入新字符；（出现 –Insert- ）</font></font></li>

<li>
<font face="细明体"><font color="#ffffff">在一般模式当中输入： o, O 为在一个新的一行输入新字符；</font></font></li>

<li>
<font face="细明体"><font color="#ffffff">在一般模式当中输入： r, R 为取代字符！（左下角出现
–Replace-）</font></font></li>
</ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何由编辑模式跳回一般模式？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">可以按下[Esc]</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">若上下左右键无法使用时，请问如何在一般模式移动光标？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">[h, j, k, l]分别代表[左、下、上、右]</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">若 [pagedown] [ pageup] 在一般模式无法使用时，如何往前或往后翻一页？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">向下翻 [Ctrl] + [f]</font></font>
<br><font face="细明体"><font color="#ffffff">向前翻 [Ctrl] + [b]</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何到本档案的最后一行、第一行；本行的第一个字符、最后一个字符？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">分别为：G, 1G, 0, $</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何删除一行、n行；如何删除一个字符？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">分别为 dd, ndd, x 或 X （dG
及 d1G 分别表示删除到页首及页尾）</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何复制一行、n行并加以贴上？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">分别为 yy, nyy, p 或 P</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何搜寻 string 这个字符串？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">?string (往前搜寻)</font></font>
<br><font face="细明体"><font color="#ffffff">/string (往后搜寻)</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何取代 word1 成为 word2，而若需要使用者确认机制，又该如何？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">:1,$s/word1/word2/g 或</font></font>
<br><font face="细明体"><font color="#ffffff">:1,$s/word1/word2/gc （需要使用者确认）</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何读取一个档案 filename 进来目前这个档案？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">:r filename</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何另存新档成为 newfilename？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">:w newfilename</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">如何存档、离开、存档后离开、强制存档后离开？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">:w； :q： :wq； :wq!</font></font></ul>
</ul>

<ul>
<li>
<font face="细明体"><font color="#000000">在 vi 底下作了很多的编辑动作之后，却想还原成原来的档案内容，应该怎么进行？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">直接按下 :e! 即可恢复成档案的原始状态！</font></font>
<br><font face="细明体"><font color="#000000">　</font></font></ul>

<li>
<font face="细明体"><font color="#000000">我在 vi 这个程序当中，不想离开
vi ，但是想执行 ls /home 这个指令，vi 有什么额外的功能可以达到这个目的：</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">事实上，可以使用[ :! ls /home
]不过，如果你学过后面的章节之后，你会发现，执行[ ctrl + z ]亦可暂时退出
vi 让你在指令列模式当中执行指令喔！</font></font>
<br><font face="细明体"><font color="#000000">　</font></font></ul>

<li>
<font face="细明体"><font color="#000000">如何设定与取消行号？</font></font></li>

<br><font face="细明体"><font color="#000000">答：</font></font>
<ul><font face="细明体"><font color="#ffffff">:set nu</font></font>
<br><font face="细明体"><font color="#ffffff">:set nonu</font></font></ul>
</ul>

<center><font color="#3333ff"><font size="+1"><a href="http://linux.vbird.org/linux_basic/0310vi/0310vi.php" target="_self"><font face="Times New Roman CE">vi
</font><font face="标楷体">文字处理软件</font></a></font></font></center>

<hr width="100%"><font face="新细明体"><font color="#000066"><font size="-1">2002/04/05：第一次完成</font></font></font>
<br><font face="新细明体"><font color="#000066"><font size="-1">2003/02/07：重新编排与加入
FAQ</font></font></font>
<br><font face="新细明体"><font color="#000066"><font size="-1">2003/02/25：新加入本章节与
LPI 的相关性说明！</font></font></font>
<br><font face="新细明体"><font color="#000066"><font size="-1">http://info.sayya.org/~edt1023/vim/</font></font></font>
<br>
</div>
<hr width="100%">
<center>
<br><font color="#000066"><font size="-1">Designed by <a href="mailto:vbird@mail.vbird.idv.tw">VBird</a>
during 2001-2004.&nbsp; Aerosol Lab.</font></font>
   ﻿<div id="apDiv4">
      <p>本网页主要以Firefox配合解析度 1024x768 作为设计依据&nbsp;&nbsp;&nbsp;&nbsp; 鸟哥自由软件整合应用研究室</p></div></center>
</div>
</center>
</body></html>
