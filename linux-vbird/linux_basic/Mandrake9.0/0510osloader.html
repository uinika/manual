<!DOCTYPE HTML PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>


   <meta http-equiv="Content-Type" content="text/html; charset=utf8">
   <meta name="Author" content="VBird">
   <title>鸟哥的 Linux 私房菜 -- 开机关机流程与 Loader</title>
   	<script src="../../script/SpryMenuBar.js" type="text/javascript"></script>
	<script src="../../script/index.js" type="text/javascript"></script>
	<link href="../../css/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
    <link href="../../css/main.css" rel="stylesheet" type="text/css" />

</head><body style="margin: 0pt; padding: 0pt;" class="table"onload="MM_preloadImages('../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html','../../index-2.html')">

<center>
<div id="apDiv5" align="left">
<div> <LINK REL="SHORTCUT ICON" HREF="../../index-2.html">
<!-- ImageReady Slices (title3.ai) -->
<table id="___01" width="898" height="81" border="0" align="center" cellpadding="0" cellspacing="0";>
	<tr>
		<td colspan="15">
			<img src="image/title/title_01.png" width="900" height="1" alt=""></td>
	</tr>
	<tr>
		<td rowspan="4" bgcolor="#182448"><p><img src="http://linux.vbird.org/cgi-bin/Count.cgi?dd=C&amp;ft=5&amp;sh=T&amp;md=8&amp;pad=Y&amp;df=vbird.dic.ksu.edu.tw.dat" width="93" align="left" title="計數器" /></p>
	    <p><font color="#FFFFFF" size="-1">since2012/04/23</font></p></td>
		<td rowspan="4" align="left" valign="top"><a href="../../index.html"><img src="image/title/title_03.png" alt="" width="263" height="79" border="0"></a></td>
		<td colspan="13">
			<img src="image/title/title_04.png" alt="" width="535" height="9" border="0"></td>
	</tr>
	<tr>
		<td rowspan="3">
			<img src="image/title/title_05.png" alt="" width="53" height="70" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="../0110whatislinux.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image51','','image/title/title_06.png',1)"><img src="image/title/title3_06.png" name="Image51" width="106" height="25" border="0" id="Image51" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_07.png" alt="" width="27" height="37" border="0"></td>
		<td colspan="3" align="left" valign="top"><a href="../../linux_server/0110network_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image52','','image/title/title_08.png',1)"><img src="image/title/title3_08.png" name="Image52" width="107" height="25" border="0" id="Image52" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_09.png" alt="" width="37" height="37" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="../../about.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image53','','image/title/title_10.png',1)"><img src="image/title/title3_10.png" name="Image53" width="75" height="25" border="0" id="Image53" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_11.png" alt="" width="35" height="70" border="0"></td>
		<td align="left" valign="top"><a href="mailto:vbird@mail.vbird.idv.tw" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image54','','image/title/title_12.png',1)"><img src="image/title/title3_12.png" name="Image54" width="74" height="25" border="0" id="Image54" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_13.png" alt="" width="21" height="70" border="0"></td>
	</tr>
	<tr>
		<td colspan="2">
			<img src="image/title/title_14.png" alt="" width="106" height="12" border="0"></td>
		<td colspan="3">
			<img src="image/title/title_15.png" alt="" width="107" height="12" border="0"></td>
		<td colspan="2">
			<img src="image/title/title_16.png" width="75" height="12" alt=""></td>
		<td rowspan="2">
			<img src="image/title/title_17.png" alt="" width="74" height="45" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/title_18.png" alt="" width="15" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar1" class="MenuBarHorizontal">
	  <li><a href="../linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image44','','image/title/title_19.png',1)"><img src="image/title/title3_19.png" name="Image44" width="123" height="33" border="0" id="Image44" /></a>
			    <ul>
			      <li><a href="mandrake9.0.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image46','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image46" width="120" height="26" border="0" id="Image46" alt="" /></a></li>
                  <li><a href="../fedora_4/fc4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image47','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image47" width="120" height="26" border="0" id="Image47" alt="" /></a></li>
                  <li><a href="../linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image48','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image48" width="120" height="26" border="0" id="Image48" alt="" /></a></li>
                </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_20.png" alt="" width="42" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar2" class="MenuBarHorizontal">
	  <li><a href="../../linux_server/index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image45','','image/title/title_21.png',1)"><img src="image/title/title3_21.png" name="Image45" width="125" height="33" border="0" id="Image45" /></a>
			    <ul>
			      <li><a href="../../linux_server/linux_redhat9/redhat9.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image43','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image43" width="120" height="26" border="0" id="Image43" alt=""/></a></li>
			      <li><a href="../../linux_server/centos4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image49','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image49" width="120" height="26" border="0" id="Image49" alt="" /></a></li>
			      <li><a href="../../linux_server/index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image50','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image50" width="120" height="26" border="0" id="Image50" alt="" /></a></li>
		        </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_22.png" alt="" width="47" height="33" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/Spacer.gif" width="101" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="263" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="53" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="15" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="91" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="27" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="5" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="42" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="60" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="37" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="28" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="47" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="35" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="74" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="22" height="1" alt=""></td>
	</tr>
</table>
<!-- End ImageReady Slices -->
<script type="text/javascript">
<!--
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
var MenuBar2 = new Spry.Widget.MenuBar("MenuBar2", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
//-->
</script>
</div>
<div align="center"><font color="#3333ff"><font size="+2"><a href="http://linux.vbird.org/linux_basic/0510osloader/0510osloader.php" target="_self"><font face="Times New Roman,Times">Linux
</font><font face="标楷体">开机流程分析</font></a></font></font><br>
本文已不再维护，更新文章请参考 <a href="http://linux.vbird.org/linux_basic/0510osloader.php">此处</a>
</div>

<div align="right"><font face="新细明体"><font color="#3333ff"><font size="-1">最近更新日期：2003/02/10</font></font></font></div>
<font color="#000099"><font size="+1"><a href="#openling_flow">开机流程分析</a>：</font><a href="#sysconfig_dir">/etc/sysconfig</a></font>
<br><font color="#000099"><font size="+1"><a href="#login-runlevel">变换默认的登入模式</a></font></font>
<br><font color="#000099"><font size="+1"><a href="#lilo">Lilo</a> ：</font><a href="#lilo_file">配置文件
/etc/lilo.conf</a>, <a href="#lilo_add">以预设的 lilo.conf 新增一个开机档</a>,
<a href="#lilo_setup">安装
lilo</a> ,<a href="#lilo_faq">一些问题的解决之道</a></font>
<br><font color="#000099"><font size="+1"><a href="#grub">Grub</a> ：</font><a href="#grub_file">配置文件
/boot/grub/menu.lst</a>, <a href="#grub_install">安装 grub 在系统中</a>,
<a href="#grub_manual">开机手动设定选项</a></font>
<br><font color="#000099"><font size="+1"><a href="#rescue">可启动盘与救援磁盘制作</a></font></font>
<br><font color="#000099"><font size="+1"><a href="#FAQ">本章习题练习</a></font></font>
<br>
<hr width="100%"><a name="openling_flow"></a><font color="#000099"><font size="+1">开机流程分析</font></font>
<blockquote>开机不是只要单击电源钮而关机只要关掉电源钮就可以了吗？有何大学问？话是这样没错啦，但是由于
Linux 是一套多人多任务的操作系统，你难保你在关机时没有人在在线，如果你关机的时候碰巧一大群人在在线工作，那会让当时在在线工作的人马上断线的！那不是害死人了！一些数据可以无价之宝哩！另外，与
DOS 环境不同的是， Linux 在执行的时候，虽然你在画面上只会看到黑压压的一片，完全没有任何画面，但其实他是有很多的程序在背景底下执行的，例如邮件程序、浏览器主机程序等，你如果随便关机的话，是很容易伤害硬盘及数据传输的动作的！所以在
Linux 下关机可是一门大学问喔
<br>　
<br>既然开机是很严肃的一件事，呵呵，那我们来了解一下整个开机的过程吧！好让大家比较容易发现开机过程里面发生错误的地方，与解决之道！不过，由于开机的过程中，那个
Boot Loader 使用的软件可能不一样，例如 Mandrake 9.0 已经同时提供 Lilo 与
Grub 这两个开机管理程序，虽然 lilo 与 grub 的启动过程或许有点不太相同，但是他的原理则都是一样的哩！这里我们先介绍较老牌的
Lilo 啰！ Lilo 是什么？！简单的说，他是 LInux LOader 的缩写，就是 Linux
开机时候载入的咚咚就对了！这东西可是控制了你的多重引导的命脉！底下的篇幅会再分别介绍这两套开机管理程序！底下先开始来谈谈
Linux 是如何开机的呢？基本的流程为：
<ol>
<li>
<font color="#000066">加载 BIOS 的硬件信息；</font></li>

<li>
<font color="#000066">读取 MBR 的 Kernel Loader (亦即是 lilo, grub, spfdisk
等等)开机信息；</font></li>

<li>
<font color="#000066">加载 Kernel 的操作系统核心信息；</font></li>

<li>
<font color="#000066">Kernel 执行 init 程序并取得 run-level 信息；</font></li>

<li>
<font color="#000066">init 执行 /etc/rc.d/rc.sysinit 档案；</font></li>

<li>
<font color="#000066">启动核心的外挂式模块 (/etc/modules.conf)；</font></li>

<li>
<font color="#000066">init 执行 run-level 的各个批处理文件( Scripts )；</font></li>

<li>
<font color="#000066">init 执行 /etc/rc.d/rc.local 档案；</font></li>

<li>
<font color="#000066">执行 /bin/login 程序；</font></li>

<li>
<font color="#000066">登入之后开始以 Shell 控管主机。</font></li>
</ol>
大概的流程就是上面写的那个样子啦，而每一个程序的内容主要是在干嘛呢？底下就分别来谈一谈吧！
<ul>
<li>
<b><font color="#000066">寻找 BIOS 加载硬件信息：</font></b></li>

<br>稍微有 PC 硬件经验的人们大概都知道 BIOS ( Basic Input/Output Setup
) 的作用！他是第一个被加载计算机的数据！你主机的 CPU 数据、开机顺序、硬盘大小、芯片组工作状态、PnP
的开启与否、内存的频率等等等...这都记录在 BIOS 当中！所以啦，开机之后，系统会先去找这个东西；</ul>

<ul>
<li>
<b><font color="#000066">可开机硬盘的 MBR 读取 Kernel loader：</font></b></li>

<br>再来呢？呵呵！当然就是硬盘的开机数据啰！由于个人计算机的系统在读完 BIOS
之后，会先去读取第一个开机硬盘的第一个扇区（就是 master boot record, MBR
啰！），还记得这个 MBR 吗？嗄！忘记了？赶紧回到第二篇好好的再复习一遍ㄋㄟ?。而这个扇区主要就是在记录开机的信息！还记得上面提到的
Lilo 及 grub 吧？他的纪录就是在这里啰！所以啰，这个时候 Lilo 纪录的信息就会被读出来，系统并依
Lilo 的信息去不同的系统开机，这也就是多重引导设定的地方啦。
<br>　
<br>好了，先再来回忆一下，如果你是以 grub 程序开机的话，那么在开机的时候会显示什么数据呢？呵呵！会显示蛮多的开机选单，没错?就是『选单』，然后选择了你的选择项目之后，系统就会跑到该扇区去读取该操作系统的核心啰！呵呵！所以一个好的
boot loader 会具有两个功能，就是：
<br>　
<ul>
<li>
<font color="#000066">选单功能 ( menu )</font></li>

<li>
<font color="#000066">指向功能 ( pointer )</font></li>
</ul>
　
<br>那么为何要有 loader 呢？我想，我们得先来探讨一下这个话题才行！要探讨之前先来了解一下，晓不晓得
Windows 与 Linux 的文件格式一不一样？！呵呵！当然不一样对不对，好了，那么再来说一说，请问，你的计算机怎么知道你的硬盘的数据是什么系统？哈哈！那就是
loader 的主要功能啰！在你能使用系统之前，一定需要加载核心对吧！？但是怎样让你的硬件认识核心呢？那就是
kernel loader 的主要功能了！所以这里需要提出的是， Linux 的 loader ( lilo
或 grub ) 是可以认识 windows 的核心档案的，但是 Windows 的 loader 却不认识
Linux 的核心档案，因此，作为一个多重引导的设定 loader ，就无法使用 Windows
所提供的 loader 啰！由于需要让系统认识你的 kernel ，因此，就需要 kernel
loader 啦！这样想就对啦！
<br>　
<br>这一部份的信息我们在后续的章节会再提及！</ul>

<ul>
<li>
<b><font color="#000066">载入核心( Kernel )：</font></b></li>

<br>好了，等我们在 grub 的选单中选择了 Linux 这个系统，然后主机跑到 Linux
所在的硬盘之下，就开始将他的核心载入啰。在 Linux 的系统下，通常开机的核心都摆在
/boot 底下，因此，这个时候的 boot loader 就会到 /boot 去寻找相关的核心。我们的
kernel 名称通常就是 /boot/vmlinuz-xxxx 的格式，目前 Mandrake 9.0 的核心版本为
2.4.19，而 Mandrake 自行释出的版本为 2.4.19-16mdk ，所以，使用 uname –r
会出现 2.4.19-16mdk 呦！然后 MDK 9.0 预设核心档案就是： /boot/vmlinuz-2.4.19-16mdk
这一个！好了，载入这个档案再往下继续吧！</ul>

<ul>
<li>
<b><font color="#000066">核心执行 init 并由 /etc/inittab 取得系统登入状态：</font></b></li>

<br>核心加载之后，由核心执行的第一个程序就是 /sbin/init 啰！而这个程序第一个目标当然就是确定主机是要以怎样的情况登入！这个时候就必须要以
/sbin/init 来加载 /etc/inittab 的信息啦！而 Linux 共有几种登入模式呢？嗯！这里似乎有需要说明一下
Linux 有哪些登入的状态！如果你进入 Linux 的 /etc/inittab 档案的话( 可以使用
vi 啦 )，你应该会看到如下的信息：
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
/root]# </font><font color="#ffff00">vi /etc/inittab</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
0 - halt (Do NOT set initdefault to this)&nbsp; 关机&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
1 - Single user mode&nbsp; 单人使用（系统有问题时候的登入状况）&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
2 - Multiuser, without NFS (The same as 3, if you do not have networking)
多人但无网络&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
3 - Full multiuser mode 文字界面登入的多人系统&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
4 - unused&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 系统保留&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
5 - X11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; X-Windows
图形界面登入的多人系统&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
6 - reboot (Do NOT set initdefault to this)&nbsp; 重新启动&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">id:3:initdefault:</font></font></font></td>
</tr>
</tbody></table>
　
<br>上面显示的就是目前可以登入的状态了（就是 run-level 啦！），共有 0?6
的登入状态，其中，我们比较常使用的是 3 与 5 ， 因为我们需要 Linux 是多人多任务的情况，而较常登入的状态就是文字与图形界面啦！所以这里需要设定成
3 或者是 5 ，千万不要设定成 0 或者是 6 喔！不然系统会一直直接重新启动或者是直接关机....默认的系统登入在上面这个表格的最底下一行纪录着！就是『id:3:initdefault
』那一行！注意喔！因为 VBird 默认是以文字界面来登入，所以才会是 3 ，如果你要改成图形界面登入的话（请确定你的
X-windows 没有问题），那么就将 /etc/inittab 里面的上面那一行，将 3 改成
5 即可啰！
<br>　
<br>那么什么是『<font color="#000066">单人维护模式 ( run-level 为 1 )</font>』？如果你有玩过
Windows 的话，那么你在开机的时候如果按下 F8 时，不是会出现一些什么『安全模式』啦、『正常开机』啦或『
MS-DOS 模式』等等的进入 Windows 的状态吗？尤其是当你不正常关机的时候，
Windows 默认就会以『安全模式』来启动 Windows 啰！Windows 的『安全模式』几乎不加载一些复杂的模块，让你的
Windows 一定可以开机成功！那么 Linux 的维护模式状态即是使用单人模式（ 就是
run_level 为 1 啦！）所以说， Linux 的登入情况是如何呢？呵呵！没错，就是在这里载入的啦！</ul>

<ul>
<li>
<b><font color="#000066">init 的第一个执行内容 /etc/rc.d/rc.sysinit ：</font></b></li>

<br>确定了登入状态之后，再来当然就是需要将主机的信息给他读进去 Linux 系统啰！而
Linux 系统的第一个数据内容就是 /etc/rc.d/rc.sysinit 这个档案啦！如果你有空进入这个档案去看看的话，会发现这个档案的内容包括了==&gt;设定默认路径（
PATH ）、设定主机名、执行 /etc/sysconfig/network 所记录的网络信息、挂载
/proc 这个保存在内存当中的主机基本讯息、以及其他几个 Linux 操作系统最基本的几个信息！大抵来说，他的基本工作是：
<br>&nbsp;
<ol>
<li>
<font color="#000066">设定默认路径</font>：( PATH&nbsp; )</li>

<li>
<font color="#000066">设定网络状态</font>：系统会再去读取 /etc/sysconfig/network，并将该档案内的数据，如
NETWORKING, FORWARD_IPV4, HOSTNAME, DOMAINNAME, GATEWARY, GATEWAYDEV 等等的设定读入系统中。</li>

<li>
<font color="#000066">启动系统的置换空间</font>（简单的可以想成是虚拟内存）：
swapping</li>

<li>
<font color="#000066">检查文件系统</font>：这个时候系统会去检查一些可能会存在的目录，例如
/fsckoptions 与 /forcfsck 及 /fastboot 等等的目录，当你的系统有不正常关机的现象时（例如突然的断电等等），那么
Linux 将会自动的强制去检查 root 的文件系统 （ checking root filesystems
）。简单的想一想，就好像是 Windows 系统下，当你不正常关机时，在开机的过程中就会出现扫瞄硬盘的情况相同啦！</li>

<li>
<font color="#000066">周边设定与系统设定的参数</font> ( /proc )：在 Linux
或者是 Unix 系统中，你会在根目录中发现一个很奇怪的扇区，那就是 /proc 
啰！其实这个目录是记录在内存当中的，每次开机的时候就会被建置起来。他的主要功能是记录主机的一些接口设备的最新数据状况！例如网络周边啦、输入输出
周边啦等等的。没事的话，不要到里面乱砍喔！会有问题</li>

<li>
<font color="#000066">设定 Plug and Play ( PNP )的一些参数数据</font>；</li>

<li>
<font color="#000066">清除 /etc/mtab</font> ；</li>

<li>
<font color="#000066">mount root 及 /proc 文件系统</font> ：好了，将一些数据都设定好之后，当然就是需要将数据写下来啰！这个时候就会将
root 与 /proc 资料给他 mount 上文件系统啦！</li>

<li>
<font color="#000066">决定是否使用模块, 加载模块</font></li>

<li>
<font color="#000066">检查文件系统 </font>：与前面相同的，当前面的 /fastboot
检查的旗标开启之后，就会以 fsck 检查你的其他扇区啰！ ( 使用 fsck )</li>

<li>
<font color="#000066">挂上其它文件系统</font></li>

<li>
<font color="#000066">设定 console 字型</font></li>

<li>
<font color="#000066">打开 quota</font></li>

<li>
<font color="#000066">清除不必要的档案, 如 lock, pid</font></li>

<li>
<font color="#000066">设定 clock</font></li>

<li>
<font color="#000066">serial port 初始化</font></li>

<li>
<font color="#000066">将开机讯息经由 dmesg 放入 /var/log/dmesg 中</font></li>
</ol>
　
<br>如此一来，在 /etc/rc.d/rc.sysinit 就已经将基本的系统设定数据都写好了，也将系统的数据设定完整！而如果你想要知道到底开机的过程中发生了什么事情呢？那么就使用第十六章学会的
dmesg 就可以知道啰</ul>

<ul>
<li>
<b><font color="#000066">启动核心的外挂式模块 (/etc/modules.conf)：</font></b></li>

<br>由于我们的核心越来越聪明，所以呢，我们可以选择使用模块的型态 ( 这个在后面也会继续说明
) 来进行驱动程序的加载！那么如果系统原本找不到的模块 ( 例如早期的 via-rhine
芯片组 ) 就可以在这个档案里面 /etc/modules.conf 写入呢！</ul>

<ul>
<li>
<b><font color="#000066">init 执行 run-level 的各个 scripts ：</font></b></li>

<br>由于不同的 run-level 所需要加载的模块并不相同，所以系统早就为不同的
run-level 设定了一些批处理文件( scripts )来做这件事啰！而 run-level 早就在前面的时候以
/etc/inittab 当中取得啰！好了，如果你知道如何进入到 /etc/rc.d 的目录中的话，那么你将会看到该目录下应该有八个目录跟三个档案，目录
rc0.d ~ rc6.d 分别代表了各个 run-level 的 scripts ！而在这些目录中的档案都是以
S 及 K ( 大写 ) 为开头的档案，并接两位数的数字与该服务的名称所组合而成的！如下所示为
Mandrake 9.0 的 /etc/rc.d/rc3.d 的内容：
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
/root]#</font><font color="#ffff00"> ll /etc/rc.d/rc3.d</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">total 0</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
16 Oct 19 11:05 K55routed -&gt; ../init.d/routed*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
18 Oct 19 10:58 S03iptables -&gt; ../init.d/iptables*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
17 Oct 19 11:26 S10network -&gt; ../init.d/network*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
16 Oct 19 11:26 S12syslog -&gt; ../init.d/syslog*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
16 Oct 19 11:26 S20random -&gt; ../init.d/random*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxrwxrwx&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
13 Oct 28 15:22 S40atd -&gt; ../init.d/atd*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
19 Oct 19 10:59 S40saslauthd -&gt; ../init.d/saslauthd*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxrwxrwx&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
14 Oct 19 21:28 S55ntpd -&gt; ../init.d/ntpd*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxrwxrwx&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
14 Oct 19 12:11 S55sshd -&gt; ../init.d/sshd*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxrwxrwx&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
16 Oct 19 12:00 S56xinetd -&gt; ../init.d/xinetd*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
18 Oct 19 11:26 S75keytable -&gt; ../init.d/keytable*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
17 Oct 19 11:12 S80prelude -&gt; ../init.d/prelude*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
17 Oct 19 11:03 S85numlock -&gt; ../init.d/numlock*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
18 Oct 19 11:35 S89internet -&gt; ../init.d/internet*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
15 Oct 19 11:26 S90crond -&gt; ../init.d/crond*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
17 Oct 19 11:26 S95kheader -&gt; ../init.d/kheader*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
14 Oct 19 11:38 S99adsl -&gt; ../init.d/adsl*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
19 Oct 19 11:04 S99linuxconf -&gt; ../init.d/linuxconf*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">lrwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
11 Oct 19 10:41 S99local -&gt; ../rc.local*</font></font></font></td>
</tr>
</tbody></table>
　
<br>在这个目录下的档案都是连结档，均指向到 /etc/rc.d/init.d 这个目录下，而这个
/etc/rc.d/init.d 目录则是以 Linux 的 rpm 安装方法时，设定一些服务的启动目录。举个例子来说，如果你要重新启动
sendmail 的话，而且你的 sendmail 是以 rpm 来安装的，那么下达 /etc/rc.d/init.d/sendmail
restart 就可以直接启动 sendmail 啰！所以你即可知道 /etc/rc.d/init.d 里面档案的主要功能！因此，当你的
run-level 内的 scripts 要启动哪写服务呢，呵呵！就将档案连结到该 init.d
目录下的档案并加以启动即可啰！也就是说『当你以 文本模式 ( run-level=3 )
启动 Linux 时，你的系统在经过 BIOS、 MBR、 Kernel、 init、/etc/rc.d/rc.sysinit
之后，就会进入 /etc/rc.d/rc3.d 来启动一些服务』啰！不过，需要注意的是，在
rc3.d (或其他目录下 rc0.d ~ rc6.d )目录中 S 开头的档案为执行该服务， K
为开头的档案则是杀掉该服务的意思。那么那些数字代表的意义为何？那就是启动的顺序啦！例如S12syslog
会比S90crond 更早被执行呢！那么为什么要有这些顺序呢？这是有原因的！例如您的主机有要启动
WWW 好了，那么您的网络设定应该要先启动才对吧！所以啰，如果 WWW 先启动，才驱动网络，那么
WWW 自然就一定起不来啦！所以各项服务的启动顺序也是相当重要的！目前 Mandrake
当中，可以使用 chkconfig 来设定开机要启动的服务选项呢！</ul>

<ul>
<li>
<b><font color="#000066">init 执行 /etc/rc.d/rc.local</font></b></li>

<br>在 DOS 或 Windows 的系统中，对于 autoexec.bat 与 config.sys 这两个档案您应该不陌生吧？！这两个档案是
DOS 或 Windows 在完成开机之后，第一个要去读取的内容！那么 Linux 有没有该档案？！有的！在
Linux 系统执行完了大部分的开机程序之后，接着下来就是要执行你的 Linux 主机的个人化设定啰！举个例子来说，由于
Red Hat 7.2 默认是将 CDROM 视为一个模块启动的装置，因此你的 cdrom 将必须要加载两个模块之后才能使用，分别是
modprobe cdrom, modprobe ide-cd 这两个指令！而如果你想每次都使用 cdrom
的话，那么你每次开机都必须记得手动加载这两个模块！粉累耶....这个时候就可以将这两行指令加入到
/etc/rc.d/rc.local 当中去啰！也就是说，不论你有什么需要在开机的时候写进去的指令，都可以在这里写入喔！
( 通常为了避免麻烦，我们都将开机完之后必须要做的几件事情，例如启动 NAT
主机的命令，使用 tarball 安装的一些软件的启动指令都写在这个档案来，那么系统开机完成之后，你所需要执行的指令也都执行完毕啰！）
<br>　
<br>前面的步骤都被主机执行之后，开机的程序就已经完全的启动完毕了！也就是说，如果你已经有网络的服务启动的话（通常在
/etc/rc.d/init.d 时就加载啰），那么你的主机已经在 Internet 上面提供服务了！所以根本就不需要你登入
Linux 系统你的主机也能正确的提供相关的服务喔！</ul>

<ul>
<hr width="100%">
<li>
<a name="sysconfig_dir"></a><b><font color="#000099">开机配置文件 /etc/sysconfig</font></b></li>

<br>不过，在开机的过程中，到底使用了多少配置文件呢？呵呵！使用最多的配置文件大多放置在
/etc/sysconfig 这个目录底下呢！来看一下 Mandrake 9.0 在这个配置文件底下有哪些东西？
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
root]# </font><font color="#ffff00">ll /etc/sysconfig</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">total 100</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
511 Sep 19 17:48 alsa</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
239 Sep 19 17:48 autofsck</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
41 Oct 19 11:39 autologin*</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
36 Oct 19 11:35 clock*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">drwxr-xr-x&nbsp;&nbsp;&nbsp;
4 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
4096 Oct 19 11:27 console/</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-------&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
35 Oct 19 11:35 drakconnect</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-------&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
29 Oct 19 11:35 drakconnect.adsl_pppoe</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-------&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
363 Oct 19 11:35 drakconnect.netc</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
275 Oct 19 11:47 i18n*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
952 Sep 19 17:47 init</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1407 Sep 19 17:48 installkernel</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
446 Aug 26 23:37 ipvsadm*</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
39 Oct 19 11:27 keyboard*</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
114 Oct 18 11:43 mouse*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
53 Oct 19 11:39 msec*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
0 Sep 17 22:16 msec.rpmnew</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
100 Oct 19 13:35 network*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">drwxr-xr-x&nbsp;&nbsp;&nbsp;
5 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
4096 Oct 19 10:41 networking/</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">drwxr-xr-x&nbsp;&nbsp;&nbsp;
2 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
4096 Oct 19 13:36 network-scripts/</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
10 Oct 19 11:26 pcmcia*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
153 Jul 25&nbsp; 2000 rawdevices</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
336 Jul 26 20:35 saslauthd</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
455 Aug 14 09:30 syslog</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rwxr-xr-x&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
56 Oct 19 11:39 system*</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
337 Sep 19 17:48 usb</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">-rw-r--r--&nbsp;&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
41 Aug 22 18:11 xinetd</font></font></font></td>
</tr>
</tbody></table>
　
<br>上面具有黄色字体的哪几个项目尤其重要！
<br>&nbsp;
<ul>
<li>
<font color="#000066">clock 在设定我们 Linux 主机的时区，可以使用格林威治时间，也就是标准时间，也可以使用台湾的本地时间
( local )；</font></li>
</ul>

<ul>
<li>
<font color="#000066">i18n 在设定一些语系的使用方面，例如最麻烦的文字接口下的日期显示问题！如果您是以中文安装的，那么预设语系会被选择
big5 ，所以在纯文本接口之下，你的档案日期显示就会呈现乱码！这个时候就需要更改一下这里啦！更动这个
i18n 的档案，将里面的 LC_TIME 改成 en 即可！！</font></li>
</ul>

<ul>
<li>
<font color="#000066">Keyboard 与 mouse 就是在设定键盘与鼠标的形式；</font></li>
</ul>

<ul>
<li>
<font color="#000066">network 可以设定主机名，以及 GATEWAY 这两个重要信息呢！</font></li>
</ul>

<ul>
<li>
<font color="#000066">至于 network-scripts 里面的档案，则是主要用在设定网络卡～这部份我们在网络架设篇才再次提到！</font></li>
</ul>

<p><br>总之，这个目录下的档案都是很重要的啦！</p></ul>
</blockquote>

<hr width="100%"><a name="login-runlevel"></a><font color="#000099"><font size="+1">变换默认的登入模式</font></font>
<blockquote>刚刚在上面说了登入主机的方式最少有六种，不过常使用的是 run-level
3 的文字接口模式与 run-level 5 的图形接口模式！如果你在安装的过程中选择了文字接口登入，但是后来却想以图形接口登入系统，应该怎么做？！简单的很！就直接修改
/etc/inittab 这个档案的内容即可！如何做呢？！以 vi 或者是其他的文书编辑软件，进入
/etc/inittab 这个档案，档案的内容有点像这样：
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font color="#ffffff"><font size="-1"># Default runlevel.
The runlevels used by Mandrake Linux are:</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
0 - halt (Do NOT set initdefault to this)</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
1 - Single user mode</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
2 - Multiuser, without NFS (The same as 3, if you do not have networking)</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
3 - Full multiuser mode</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
4 - unused</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
5 - X11</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#&nbsp;&nbsp;
6 - reboot (Do NOT set initdefault to this)</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">#</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">id:3:initdefault:</font></font></font>
<p><font face="细明体"><font color="#ffffff"><font size="-1"># System initialization.</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">si::sysinit:/etc/rc.d/rc.sysinit</font></font></font>
</p><p><font face="细明体"><font color="#ffffff"><font size="-1">l0:0:wait:/etc/rc.d/rc
0</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">l1:1:wait:/etc/rc.d/rc
1</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">l2:2:wait:/etc/rc.d/rc
2</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">l3:3:wait:/etc/rc.d/rc
3</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">l4:4:wait:/etc/rc.d/rc
4</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">l5:5:wait:/etc/rc.d/rc
5</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">l6:6:wait:/etc/rc.d/rc
6</font></font></font>
</p><p><font face="细明体"><font color="#ffffff"><font size="-1"># Things to
run in every runlevel.</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">ud::once:/sbin/update</font></font></font>
</p><p><font face="细明体"><font color="#ffffff"><font size="-1"># Trap CTRL-ALT-DELETE</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">ca::ctrlaltdel:/sbin/shutdown
-t3 -r now</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1"># Run gettys
in standard runlevels</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">1:2345:respawn:/sbin/mingetty
tty1</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">2:2345:respawn:/sbin/mingetty
tty2</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">3:2345:respawn:/sbin/mingetty
tty3</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">4:2345:respawn:/sbin/mingetty
tty4</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">5:2345:respawn:/sbin/mingetty
tty5</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">6:2345:respawn:/sbin/mingetty
tty6</font></font></font></p></td>
</tr>
</tbody></table>
　
<br>在上面的数据中，<b><font color="#000066">将 id:3:initdefault: 里头的
3 改成 5 ，那么在下次的登入时就会变成是图形接口啰</font></b>！同理，要由图形接口变成文字接口来登入时，也是将上面那行改成
3 即可！此外，不知道您有没有经验，在你的 Linux 主机当中， Linux 共提供了六
个终端机接口与 一 个图形接口的登入点，你可以按下 『 Ctrl 』+ 『 Alt』 加上
『F1』 ~ 『F6』 功能键 来变换不同的文字接口登入点！至于图形接口则仅使用于『
Ctrl + Alt + F7 』这一个喔！不过，如果你只想要提供四个文字接口呢？该如何是好？！呵呵！只要将上面的最后两行删掉，只剩下
1:2345:....至 4:2345:...，只剩下这四行然后重新启动之后，你的 F5 与 F6 功能键的作用就会消失啰！就这么简单啦！不过，需要注意的是，图形接口只有一个，当你使用图形接口登入时，那么将直接进入
tty7 那一个图形接口的登入屏幕喔！而当你在 tty1 输入 startx 启动 X-Windows
时，你的控制权将会跑到 tty7 （就是在 F7 功能键），此时，若您的 X-windows
挂了！那么直接按下『 Ctrl + Alt + F1 』 回到 tty1 之后，直接删除该 X-Windows
的程序即可关闭 X-Windows 啰！很不错吧！</blockquote>

<hr width="100%"><a name="lilo"></a><font color="#000099"><font size="+1">Lilo</font></font>
<blockquote>好了，要开始来搞定 boot loader 啰！第一个介绍的事较老牌的 lilo
这个玩意儿！他算是最标准的 Linux boot loader 啰！目前我的几部主机里面，用的也大部分都是他呢！Lilo
的设定与安装方面必需要分成两个步骤，分别是设定 /etc/lilo.conf 这个配置文件，设定完毕之后，还必需要给他改写进去
MBR 或者是 Super block 才行！
<br>&nbsp;
<ul>
<hr width="100%">
<li>
<a name="lilo_file"></a><b><font color="#000099">配置文件 /etc/lilo.conf</font></b></li>

<br>基本上， lilo 是加载 Linux 核心的重要开机数据的安装程序，他的参数配置文件案就放在
/etc/lilo.conf 里头，那么我们来看一看里面有什么设定参数吧，基本上他的设定参数有点像底下这样，可以分为两部分，一个是整体的设定方面，一个则是每一个开机设定的核心档案：
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
linux]# </font><font color="#ffff00">vi /etc/lilo.conf&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffffcc"><font size="-1"># 第一部份，整体的设定部分</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">prompt&nbsp;&nbsp;

</font><font color="#ff9900">&lt;==强制出现 boot 的开机讯息啰！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">Compact&nbsp;

</font><font color="#ff9900">&lt;==可以整合一些读取的扇区，可以保持 map
较小，相当适合软盘开机时使用&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">delay=50 
</font><font color="#ff9900">&lt;==如果有多重引导的话，可以设定这个延迟时间，单位0.1秒&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">timeout=50
</font><font color="#ff9900">&lt;==与
delay 有类似的关系！也是 0.1 秒，如果 5 秒内没有按键盘，直接以第一个 image
开机。&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">default=linux-2.4.18
</font><font color="#ff9900">&lt;==如果开机的过程中，出现了boot之后，使用者没有动作，</font></font></font>
<br><font face="细明体"><font color="#ff9900"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

则以此设定的核心开机，与底下的label需对应&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">boot=/dev/hda&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==Lilo 的开机信息写入到 /dev/hda 这颗硬盘的 MBR 当中。&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">map=/boot/map&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==用来说明 local 主机的地图信息啰！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">install=/boot/boot.b
</font><font color="#ff9900">&lt;==关于开机区的讯息(boot
sector)，不用理他没关系！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">Linear&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==在较大容量的硬盘使用时，可以加入这一个参数试试看</font><font color="#ffffff">！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">lba32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==这个东西也是在大容量的硬盘使用时候会需要的参数！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">password=1234567&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==设定密码！如果为了安全起见，可以设定您的 lilo 密码哩！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">message=/boot/message
</font><font color="#ff9900">&lt;==那个
LILO 的讯息就是在里面出现的啦！</font></font></font>
<p><font face="细明体"><font color="#ffffcc"><font size="-1"># 第二部分，个别的开机设定部分，一个
image 或 other 均代表一个开机设定！</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">image=/boot/vmlinuz-2.4.7-10&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==核心档案啦！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
label=linux-2.4.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">&nbsp;
&lt;==请注意！label 前面以 [tab] 按键来作为分隔！</font></font></font>
<br><font face="细明体"><font color="#ff9900"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

这个字眼则是显示在 boot 里头挑选项目。&nbsp;</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
initrd=/boot/initrd-2.4.7-10.img&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
read-only&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font><font color="#ff9900">&lt;==启动扇区挂载为只读！这是预设状况，实际在</font></font></font>
<br><font face="细明体"><font color="#ff9900"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

挂加载 Linux 系统时，会重新挂载成可写！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
root=/dev/hda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==挂载成 / 这个 root 目录的磁盘！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">other=/dev/hdb1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==如果是『非 Linux 核心』就以 other 来设定</font></font></font>
<br><font face="细明体"><font color="#ff9900"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

开机的磁盘扇区！&nbsp;</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">　　　　label=Windows2k&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==同样的要有 label 来表示这个启动扇区的名称！</font></font></font></p></td>
</tr>
</tbody></table>
　
<br>注意一下上面那几个咚咚：
<br>&nbsp;
<ul>
<li>
<font color="#000066">delay 与 timeout 的设定是 0.1 秒，所以 delay=50 表示延迟时间为
5 秒！</font></li>
</ul>

<ul>
<li>
<font color="#000066">linear 与 lba32 通常用在 SCSI 或者是较大的硬盘，例如扇区超过
1024 磁道的硬盘，可以使用这个项目来除错！不过，如果是小于 8GB 的硬盘，这两个东西有没有设定就没有什么影响了！</font></li>
</ul>

<ul>
<li>
<font color="#000066">default 需要设定成底下几个 image 或者是 other 的
label 才成！这个地方最常被忘记！因为常常会记得修改 label ，但是忘记跟着改变
default 的内容！此外，如果你想要修正开机默认的操作系统选项，在这里改啦！</font></li>
</ul>

<ul>
<li>
<font color="#000066">password 的用途在于安全防护方面，不过有个困扰，就是『如果你的计算机因为不正常关机（如断电后重开）而在电源恢复的时候重新启动时，则会卡在这个阶段无法直接进入
Linux 系统』，因为你必须提供 password 才能继续的工作呀！</font></li>
</ul>

<ul>
<li>
<font color="#000066">boot 显示的是开机的扇区选择！ 这里也蛮重要的，如果你想要安装在
MBR 里面的话，如同上面的书写模式，就是写入 /dev/hda ，后面不要加上每个
partition 的代码！但是，如果你是想写入 Super Block ，例如我想要写入的是
hda5 这个 Logical 的 partition 时，那么这里就必需要改写为 /dev/hda5 啰！所以，您应该只要一看到这个
boot 后面接的内容，就会知道那个安装的扇区是 MBR 还是 Super Block 啰！</font></li>
</ul>

<ul>
<li>
<font color="#000066">image 可以设定成多数个！如果你的 Linux 系统有多个核心档案的时候，例如我们刚刚编译完成的一个新的核心，然而你又不想丢掉旧核心，就可以设定成两个不同核心的开机系统啰！</font></li>
</ul>

<p><br>大致上就是这样吧！其他不明了是什么东西的选项，可以使用 man lilo.conf
来看看里头的设定！因为还有很多开机时后需要加载的参数可以来设定一番呢！</p></ul>
</blockquote>

<blockquote>
<ul>
<hr width="100%">
<li>
<b><font color="#000099">以<a name="lilo_add"></a>预设的 lilo.conf 新增一个开机档</font></b></li>

<br>好啦！为了测试一下您是否已经知道了 lilo.conf 的设定方式，所以我们来做个实验吧！请在您的『实验主机』上面，不要在提供服务的主机上面完呦！否则死掉了不要怪我没警告您…我们先试图安装在
super block 上面好了！以下面为例，黄色字体的部分是经过我的修改之后的结果，您的
/etc/lilo.conf 应该会长的跟我的差不多才是！
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font color="#ffff00"><font size="-1">boot=/dev/hda1</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">map=/boot/map</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">vga=normal</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">default=linux</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">keytable=/boot/us.klt</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">prompt</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">nowarn</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">timeout=100</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">message=/boot/message</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">menu-scheme=wb:bw:wb:bw</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">image=/boot/vmlinuz</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
label=linux</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
root=/dev/hda1</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
initrd=/boot/initrd.img</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
append="devfs=mount"</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
read-only</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">image=/boot/vmlinuz</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
label=failsafe</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
root=/dev/hda1</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
initrd=/boot/initrd.img</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
append="devfs=nomount failsafe"</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
read-only</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffff00">image=/boot/vmlinuz&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==就给他新增加一个 label ，但是内容不变！</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
label=linux-test</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
root=/dev/hda1</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
initrd=/boot/initrd.img</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
append="devfs=mount"</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
read-only</font></font></font></td>
</tr>
</tbody></table>
　
<br>这样就设定好了！接着下来看一下怎么安装他吧！
<p>
</p><hr width="100%">
<li>
<a name="lilo_setup"></a><b><font color="#000099">安装 lilo</font></b></li>

<br>既然设定好了，自然就是要安装他啰！安装的方式很简单，直接输入 lilo 即可！
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
root]#</font><font color="#ffff00"> lilo</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">Added linux
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">&nbsp; &lt;==有打星号的是『预设的开机配置文件！』</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Added failsafe</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Added linux-test</font></font></font></td>
</tr>
</tbody></table>
　
<br>看到没有！要像上面这样才是安装成功呦！如果出现了错误的讯息，那么肯定是有地方没有安装好！这个时候请特别的再重新设定一次
/etc/lilo.conf 呢！有打星号的是『预设的开机配置文件！』
<p>而如果您还要看看更多的讯息，那么就需要这样：
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
root]# </font><font color="#ffff00">lilo -v</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">LILO version
22.3.2, Copyright (C) 1992-1998 Werner Almesberger</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Development
beyond version 21 Copyright (C) 1999-2002 John Coffman</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Released 11-Jul-2002
and compiled at 21:48:42 on Aug 13 2002.</font></font></font>
<p><font face="细明体"><font color="#ffffff"><font size="-1">Reading boot
sector from /dev/hda1</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Using MENU
secondary loader</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Calling map_insert_data</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Mapping message
file /boot/message -&gt; message-text</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Calling map_insert_file</font></font></font>
</p><p><font face="细明体"><font color="#ffffff"><font size="-1">Boot image:
/boot/vmlinuz -&gt; vmlinuz-2.4.19-16mdk</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Mapping RAM
disk /boot/initrd.img -&gt; initrd-2.4.19-16mdk.img</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Added linux
*</font></font></font>
</p><p><font face="细明体"><font color="#ffffff"><font size="-1">Boot image:
/boot/vmlinuz -&gt; vmlinuz-2.4.19-16mdk</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Mapping RAM
disk /boot/initrd.img -&gt; initrd-2.4.19-16mdk.img</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Added failsafe</font></font></font>
</p><p><font face="细明体"><font color="#ffffff"><font size="-1">Boot image:
/boot/vmlinuz -&gt; vmlinuz-2.4.19-16mdk</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Mapping RAM
disk /boot/initrd.img -&gt; initrd-2.4.19-16mdk.img</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Added linux-test</font></font></font>
</p><p><font face="细明体"><font color="#ffffff"><font size="-1">/boot/boot.0301
exists - no backup copy made.</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Writing boot
sector.</font></font></font></p></td>
</tr>
</tbody></table>
　
<br>如果你需要更多的讯息，那么就使用『 lilo –v –v –v 』多一点 –v 就对啦！
<br>
</p><hr width="100%">
<li>
<a name="lilo_faq"></a><b><font color="#000099">一些问题的解决之道</font></b></li>

<p>
</p><p>好了！ lilo 安装完成之后，总是会有一些问题会发生吧！那么如何来解决问题呢？嗯！可以看一下底下的一些解决之道：
<br>&nbsp;
</p><ul>
<li>
<font color="#000066">我要如何选择不同的开机配置文件？开机的时候我只看的到
boot: 而已?</font></li>

<br>开机之后，如果是以 lilo 来启动 kernel 时，那么他会出现 boot: 的字样，出现这个字样之后，马上按下
&lt;tab&gt; 按键，那么就会出现目前 lilo 所记忆的开机配置文件啰！然后在 boot
后面输入想要的启动文件，就可以啰！</ul>

<ul>
<li>
<font color="#000066">安装好了 Linux 之后，在开机的过程中却只出现『 LI
』就停止了！该如何是好？</font></li>

<br>这个问题可能发生的原因是 Lilo 没有设定好，或者是由于 Linux 安装在非
/dev/hda ( MBR )的硬盘之中，解决的方法可以如下：</ul>

<ul>
<ol>
<li>
用 Linux 光盘开机，然后在出现 boot: 处输入</li>

<br>linux root=/dev/hda1 （这个与你的 Linux 安装的 partition 有关）
<br>顺利开机之后，以 vi 修改 /etc/lilo.conf 将
<br>linear
<br>这一行取消（如果没有这一行的话，那就在 lilo.conf 中加入吧！）然后执行
<br>lilo
<br>再取出光盘并重新启动试试看；
<br>&nbsp;
<li>
进入 BIOS ，将硬盘的 mode 改成 LBA 试看看；</li>

<li>
将Linux往前面一点的扇区安装，例如你可能安装在 /etc/hdc1 ，那你可以重新安装
Linux 在 /dev/hda2 试看看</li>
</ol>
</ul>

<ul>
<li>
<font color="#000066">安装Linux完成之后，却是出现 010101... 等数字在屏幕上，无法进入
Linux ...</font></li>

<br>这个问题的发生很有可能是硬盘出了问题了！这个时候可以使用 fsck 来扫瞄啰！
<ol>
<li>
用软盘或者是光盘开机后，使用fsck这个硬盘修正软件扫瞄一下您的 root partition
，例如：fsck /dev/hda1</li>

<li>
进入 BIOS ，将硬盘的 mode 改成 LBA 试看看；</li>
</ol>
</ul>

<ul>
<li>
<font color="#000066">我们知道 DOS 需要在第一颗硬盘的第一个扇区才能正常开机使用！那要是他并非在第一个扇区呢？例如当
DOS 系统在 /dev/hdb1 （第一条扁平电缆的 slave ）？</font></li>

<br>解决知道就是以 lilo 修正磁盘的配置啦！如下所示来修改 /etc/lilo.conf
<br>other=/dev/hdb1
<br>　　　label=DOS
<br>　　　map_drive=0x80
<br>　　　to=0x81
<br>　　　map_drive=0x81
<br>　　　to=0x80
<br>然后再执行 lilo 写入 MBR 当中！</ul>

<ul>
<li>
<font color="#000066">我不要玩 Linux 了，如何移除 lilo ？</font></li>

<br>只要以 Windows 的开机片开机，然后以 Windows 系统的 fdisk 下达：
<br>fdisk /mbr
<br>就可以将 Lilo 自 MBR 当中移除啰！</ul>

<ul>
<li>
<font color="#000066">无法正常的进入 Lilo 怎么办？</font></li>

<br>这的时候开机片就很重要啦！使用开机片，在出现 boot: 的时候，输入
<br>linux -s
<br>就可以进入啦！这里请特别留意！那个 linux 指的是 label 呢！就像刚刚我们有三个
label ，分别是 linux, linux-test 与 failsafe ，那么如果我要以 linux-test
这个开机配置文件的单人维护模式登入，就必需要改写成
<br>linux-test –s
<br>linux-test single
<br>请特别留意！！</ul>
</ul>
</blockquote>

<hr width="100%"><a name="grub"></a><font color="#000099"><font size="+1">Grub</font></font>
<blockquote>grub 是较新的 boot loader 程序，他具有相当多的优点，这里不一一列举啦！无论如何，
lilo 能做的， grub 几乎都可以做的到，包括选单、密码、指向等等的功能！不过，
grub 比 lilo 要先进的几点是：
<ol>
<li>
<font color="#000066">他可以让您在开机的时候『自行编辑与修改开机设定项目』，有点像是
bash 的指令模式；</font></li>

<li>
<font color="#000066">他可以自动『动态寻找配置文件』，亦即他可以依据 /boot/grub/menu.lst
的设定而改变其设定！因此，修改设定只要改 /boot/grub/menu.lst 即可，不需要再重新安装
grub ！</font></li>
</ol>
很棒吧！不过，在设定底下的工作之前，请先确认您的 grub 这个套件已经安装上来来！如果还没有安装的话，那么先查阅一下
RPM 的安装方法再说！底下假设 grub 这个套件已经安装在您的主机上啰！
<ul>
<hr width="100%">
<li>
<a name="grub_file"></a><b><font color="#000099">配置文件 /boot/grub/menu.lst</font></b></li>

<br>Grub 的配置文件也很简单，就是 /boot/grub/menu.lst 这个档案，请注意，那个
lst 是 L 的小写呢！如果有兴趣的话，可以使用 info grub 好好的去看一下他的所有功能，底下仅列出一些我们常用的功能与设定而已喔！
<br>&nbsp;
<ul>
<li>
<b><font color="#000066">关于硬盘的代号：</font></b></li>

<br>在 grub 里面，有一点是比较让人觉得不适应的，那就是他的硬盘代号与 lilo
还有 Linux 传统的代号不一样～他的代号主要有点像这样：
<br>&nbsp;
<ul><font face="细明体"><font color="#000066">(hd0,0)</font></font></ul>

<p><br>hd 指的是 IDE 的硬盘，而里面的 0,0 代表什么呢？第一个 0 代表他是第一个
IDE 的 master ，而第二个 0 代表他是第一块 partition 的代号，所以呢，这个代号就是
hda1 啦！所以，我们可以得到底下这个对应表：
<br>&nbsp;
<table width="600" border="1" cols="3">
<tbody><tr bgcolor="#ffcccc">
<td width="150">装置</td>

<td width="200">
<center>Lilo</center>
</td>

<td width="250">
<center>Grub</center>
</td>
</tr>

<tr>
<td width="100"><font face="细明体"><font color="#000066">IDE1 master</font></font></td>

<td><font face="细明体"><font color="#000066">hda, hda1, hda2</font></font></td>

<td><font face="细明体"><font color="#000066">(hd0), (hd0,0), (hd0,1)</font></font></td>
</tr>

<tr>
<td><font face="细明体"><font color="#000066">IDE1 slave</font></font></td>

<td><font face="细明体"><font color="#000066">hdb, hdb1, hdb2</font></font></td>

<td><font face="细明体"><font color="#000066">(hd1), (hd1,0), (hd1,1)</font></font></td>
</tr>

<tr>
<td><font face="细明体"><font color="#000066">IDE2 master&nbsp;</font></font></td>

<td><font face="细明体"><font color="#000066">hdc, hdc1, hdc2</font></font></td>

<td><font face="细明体"><font color="#000066">(hd2), (hd2,0), (hd2,1)</font></font></td>
</tr>

<tr>
<td><font face="细明体"><font color="#000066">IDE2 slave&nbsp;</font></font></td>

<td><font face="细明体"><font color="#000066">hdd, hdd1, hdd2&nbsp;</font></font></td>

<td><font face="细明体"><font color="#000066">(hd3), (hd3,0), (hd3,1)</font></font></td>
</tr>
</tbody></table>

</p><p>这里需要先记忆一下啰！</p></ul>

<p><br>好了，那么将我的 menu.lst 列出来一下吧先！
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
root]#</font><font color="#ffff00"> vi /boot/grub/menu.lst</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">timeout 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==多久之后键盘没有动静，就直接以 default 的设定开机，这里是秒数！</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">Color black/cyan
yellow/cyan&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#ff9900">&lt;==设定颜色的参数</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">i18n (hd0,0)/boot/grub/messages&nbsp;</font><font color="#ff9900">
&lt;==设定 i18n 多国语系的讯息提示</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">keytable (hd0,0)/boot/us.klt&nbsp;&nbsp;

</font><font color="#ff9900">&lt;==设定键盘形式，通常使用美规的键盘即可！</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">Default 
0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==默认的开机选项，依照底下的排序，第一个为 0 ！</font></font></font>
<p><font face="细明体"><font size="-1"><font color="#ffffff">title 
linux&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==这是第一个开机配置文件，亦即排序为 0 号！</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;
kernel (hd0,0)/boot/vmlinuz root=/dev/hda1 devfs=mount</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;
initrd (hd0,0)/boot/initrd.img</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==上面两个则是开机配置文件的基本内容，分别是</font></font></font>
<br><font face="细明体"><font color="#ff9900"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

核心档案所在地与 Ramdisk 的设定内容！</font></font></font>
</p><p><font face="细明体"><font size="-1"><font color="#ffffff">title failsafe&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff9900">
&lt;==这是第二个开机配置文件，亦即排序为 1 号！</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;
kernel (hd0,0)/boot/vmlinuz root=/dev/hda1 devfs=nomount failsafe</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;
initrd (hd0,0)/boot/initrd.img</font></font></font>
</p><p><font face="细明体"><font color="#ffffff"><font size="-1">title windows</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;&nbsp;&nbsp;&nbsp;
chainloader (hd1,0) +1</font></font></font></p></td>
</tr>
</tbody></table>
　
</p><ul>
<li>
<b><font color="#000099">default 与 title 的计算方式：</font></b></li>

<br>基本的说明已经在上表当中了，这里需要在说明的是关于 default 开机档的计算。如果今天我有四个开机配置文件，那么
default 算的是什么呢？就是『排序』啦！假如我底下依序出现的配置文件 title
分别是 linux, linux-test, windows, failsafe 的话，那么开机的时候， grub
的选单就会显示：
<br><font face="细明体"><font color="#000066">&nbsp;&nbsp; linux</font></font>
<br><font face="细明体"><font color="#000066">&nbsp;&nbsp; linux-test</font></font>
<br><font face="细明体"><font color="#000066">&nbsp;&nbsp; windows</font></font>
<br><font face="细明体"><font color="#000066">&nbsp;&nbsp; failsafe</font></font>
<br>其中，linux 就是 0 ，而 failsafe 就是 3 ，如果您要调整开机时后的选单顺序，就在
/boot/grub/menu.lst 修改一下他们的顺序即可！但是记得 default 要跟着变，因为他也是依据排序而变的呦！这点请不要忘记了?</ul>

<ul>
<li>
<b><font color="#000066">title 内容的设定方式：</font></b></li>

<br>基本上，如果是一般的硬盘环境中，我们仅需要两行就可以设定好 title 的内容了，分别是：
<br>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font color="#ffff00"><font size="-1">root&nbsp;&nbsp;
[开机根目录 / 所在的磁盘代号]</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">kernel [启动文件的所在地完整档名]
[root=/dev/硬盘代号]</font></font></font>
<p><font face="细明体"><font color="#ffffcc"><font size="-1">范例：</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">root&nbsp;&nbsp;
(hd0,0)</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">kernel /boot/vmlinuz-2.4.19-16mdk
root=/dev/hda1</font></font></font>
</p><p><font face="细明体"><font color="#ff9900"><font size="-1">设定上面就是这样而已！所以，开机完毕之后，请将您的
kernel 文件名(完整文件名)与开机的根目录所在的磁盘代号记忆一下，那么下次就可以手动设定开机设定项目呢！但如果是
windows 方面的设定时，那就直接使用 chainloader 这个项目即可，有点像这样：</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">chainloader&nbsp;
[硬盘代号] +1</font></font></font>
</p><p><font face="细明体"><font color="#ffffcc"><font size="-1">范例：</font></font></font>
<br><font face="细明体"><font color="#ffff00"><font size="-1">chainloader
(hd1,0) +1</font></font></font></p></td>
</tr>
</tbody></table>
　</ul>

<hr width="100%">
<li>
<b><font color="#000099">安<a name="grub_install"></a>装 grub 在系统中</font></b></li>

<br>要安装 grub 跟 /boot/grub/menu.lst 并没有相关性！因为刚刚我们就提过了，
grub 为动态去搜寻配置文件的，所以写入 MBR 或 super block 时，并没有将 menu.lst
写入ㄋㄟ?好了，那我们就来安装看看吧！安装的方式主要也是分为安装在 MBR 与
super block 呢！底下我们就来谈谈这两种安装的方式：基本上的动作就是：
<br>　
<ol>
<li>
<font color="#000066">使用 root [磁盘代号] 选择开机根目录 / 所在磁盘代号；</font></li>

<li>
<font color="#000066">使用 setup [磁盘代号] 选择 MBR 或 Super block 直接安装进去！</font></li>

<li>
<font color="#000066">使用 quit 就可以离开 grub 了！</font></li>
</ol>
<font color="#000066">　</font>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
root]# </font><font color="#ffff00">grub</font></font></font>
<p><font face="细明体"><font color="#ffffcc"><font size="-1"># 先安装在 Super
Block 底下试看看：</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">grub&gt; </font><font color="#ffff00">root
(hd0,0)</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#ff9900">&lt;==这里输入我要的
root 硬盘扇区！</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Filesystem
type is ext2fs, partition type 0x83</font></font></font>
</p><p><font face="细明体"><font size="-1"><font color="#ffffff">grub&gt; </font><font color="#ffff00">setup
(hd0,0)&nbsp;&nbsp;</font><font color="#ffffff">&nbsp;</font><font color="#ff9900">&nbsp;
&lt;==实际安装上来！使用 setup 指令！</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Checking
if "/boot/grub/stage1" exists... yes</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Checking
if "/boot/grub/stage2" exists... yes</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Checking
if "/boot/grub/e2fs_stage1_5" exists... yes</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Running
"embed /boot/grub/e2fs_stage1_5 (hd0,0)"... failed (this is not fatal)</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Running
"embed /boot/grub/e2fs_stage1_5 (hd0,0)"... failed (this is not fatal)</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Running
"install /boot/grub/stage1 (hd0,0) /boot/grub/stage2 p /boot/grub/menu</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">.lst "... succeeded</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Done.</font></font></font>
</p><p><font face="细明体"><font color="#ffffcc"><font size="-1"># 再安装在 MBR
试看看：</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">grub&gt; </font><font color="#ffff00">root
(hd0,0)</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Filesystem
type is ext2fs, partition type 0x83</font></font></font>
</p><p><font face="细明体"><font size="-1"><font color="#ffffff">grub&gt; </font><font color="#ffff00">setup
(hd0)</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Checking
if "/boot/grub/stage1" exists... yes</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Checking
if "/boot/grub/stage2" exists... yes</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Checking
if "/boot/grub/e2fs_stage1_5" exists... yes</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Running
"embed /boot/grub/e2fs_stage1_5 (hd0)"...&nbsp; 17 sectors are embedded.</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">succeeded</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">&nbsp;Running
"install /boot/grub/stage1 (hd0) (hd0)1+17 p (hd0,0)/boot/grub/stage2</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">/boot/grub/menu.lst"...
succeeded</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Done.</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">grub&gt; </font><font color="#ffff00">quit&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ffff00">
&lt;==离开 grub 啰！</font></font></font></p></td>
</tr>
</tbody></table>
　
<br>这样就安装进去啰！很方便吧！并不难吧！
<p>
</p><hr width="100%">
<li>
<a name="grub_manual"></a><b><font color="#000099">开机手动设定选项</font></b></li>

<br>事实上，每次动手修改完 /boot/grub/menu.lst 就已经完成了 grub 的设定啰！因为他相当的聪明！但是，如果我设定错误怎么办？没关系！有很多的方法可以使用呢！如果您可以顺利的以硬盘进入
grub 画面，那么恭喜您，可以继续下面的行动了！但是如果您的 Linux 竟然无法顺利的开机了，也就是说，使用硬盘开不了机！那么也没有关系，别担心，就直接给他使用
CD 开机，然后在进入 grub 画面之后，再继续下面的动作！
<br>&nbsp;
<ul>
<li>
<b><font color="#000066">在 grub 画面下进行手动加入的动作：</font></b></li>

<br>在 grub 画面中，通常画面的最下方都会显示一些基本的讯息，例如下方的
Mandrake 默认文字接口 grub 登入图标：
<br><img src="0510osloader_files/0510osloader_grub_1.jpg" nosave="" width="696" height="378">
<br>在这个画面中，您可以输入 e 或 c 来选择『编辑』或『进入指令列模式』，无论如何，这两个选项将使您进入指令列模式当中啦！所以您就可以看到一个大大的
grub&gt; 提示字符，然后就可以修改或者是自定义一些项目啦！而这些修改或者设定的项目，并不会主动的去覆盖您的
/boot/grub/menu.lst ，而是这次登入所做的修改而已呢！通常我都是选择 e 进入编辑的画面，然后选择
kernel 与 root 那两项内容进行编辑即可！例如我们上面提过的，我的 root 与
kernel 已经知道了正确的讯息，所以我就可以按下 c 来输入底下的字样：
<br>&nbsp;
<ul><font face="细明体"><font color="#000066">grub&gt; root (hd0,0)</font></font>
<br><font face="细明体"><font color="#000066">grub&gt; kernel /boot/vmlinuz-2.4.19-16mdk
root=/dev/hda1</font></font></ul>

<p><br>这样就可以进入我们的主机了呢！很厉害吧！</p></ul>
</ul>
</blockquote>

<hr width="100%"><a name="rescue"></a><font color="#000099"><font size="+1">可启动盘与救援磁盘制作</font></font>
<blockquote>不论任何时候，制作可以开机的磁盘与救援的磁盘，都是一件很值得鼓励的事情！这里我们提供简单的方式来让您的磁盘可以开机呦！
<br><font color="#000066">　</font>　
<table width="650" bgcolor="#000000" border="1" cols="1">
<tbody><tr>
<td><font face="细明体"><font color="#ffffcc"><font size="-1"># 制作软盘开机片：</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
root]# </font><font color="#ffff00">mkbootdisk --device /dev/fd0 `uname
-r`</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Insert a disk
in /dev/fd0. Any information on the disk will be lost.</font></font></font>
<br><font face="细明体"><font color="#ffffff"><font size="-1">Press &lt;Enter&gt;
to continue or ^C to abort:</font></font></font>
<p><font face="细明体"><font color="#ffffcc"><font size="-1"># 制作救援磁盘：</font></font></font>
<br><font face="细明体"><font size="-1"><font color="#ffffff">[root @test
root]# </font><font color="#ffff00">mkrescue --device /dev/fd0</font></font></font></p></td>
</tr>
</tbody></table>
　
<br>不过， mkrescue 比较麻烦的一点是，这个程序仅支持 lilo 这个 loader 的
image file ，所以如果刚刚您是使用 grub 来设定 MBR 的话，那么 mkrescue 就无法动作了?</blockquote>

<hr width="100%"><a name="FAQ"></a><font color="#000099"><font size="+1">本章习题练习
( 要看答案请将鼠标移动到『答：』底下的空白处，按下左键圈选空白处即可察看
)</font></font>
<ul>
<li>
我有个朋友跟我说，他想要让一个程序在 Linux 系统下一开机就启动，但是在关机前会自动的先结束该程序，我该怎么建议他？</li>

<br>答：
<ul><font color="#ffffff">由于 /etc/rc.d/rc[0-6].d 里面有的 Sxxname 与
Kxxname 可以设定开机启动与关机结束的事项！所以我就可以轻易的写一个 script
放在 /etc/rc.d/init.d 里面，并连结到我的 run-level 里头，就可以让他自由自在的启动与结束了！</font></ul>

<li>
万一不幸，我的一些模块没有办法让 Linux 的核心捉到，但是偏偏这个核心明明就有支持该模块，我要让该模块在开机的时候就被加载，那么应该写入那个档案？</li>

<br>答：
<ul><font color="#ffffff">应该写入 /etc/modules.conf 这个档案，他是模块加载相关的地方呢！</font></ul>
</ul>

<hr width="100%"><font face="新细明体"><font color="#000066"><font size="-1">2003/02/10：第一次完成</font></font></font>
<br>

<hr width="100%">
<center>
<font color="#000066"><font size="-1">Designed by <a href="mailto:vbird@mail.vbird.idv.tw">VBird</a>
during 2001-2004.&nbsp; Aerosol Lab.</font></font>
﻿<div id="apDiv4">
      <p>本网页主要以Firefox配合解析度 1024x768 作为设计依据&nbsp;&nbsp;&nbsp;&nbsp; 鸟哥自由软件整合应用研究室</p></div></center>
</div></center>
</body></html>
