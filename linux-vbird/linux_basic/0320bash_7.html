<html><head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="Author" content="2011/04/18,white">
	<meta name="Description" content="学习 bash shell">
	<title>鸟哥的 Linux 私房菜 -- 学习 bash shell</title>
    <script src="../script/SpryMenuBar.js" type="text/javascript"></script>
	<script src="../script/index.js" type="text/javascript"></script>
	<link href="../css/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
    <link href="../css/main.css" rel="stylesheet" type="text/css" />
    </head><body style="margin: 0pt; padding: 0pt;" class="table"onload="MM_preloadImages('../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html')">

<center>
<div id="apDiv5">
<div> <LINK REL="SHORTCUT ICON" HREF="../index-2.html">
<!-- ImageReady Slices (title3.ai) -->
<table id="___01" width="898" height="81" border="0" align="center" cellpadding="0" cellspacing="0";>
	<tr>
		<td colspan="15">
			<img src="image/title/title_01.png" width="900" height="1" alt=""></td>
	</tr>
	<tr>
		<td rowspan="4" bgcolor="#182448"><p><img src="http://linux.vbird.org/cgi-bin/Count.cgi?dd=C&amp;ft=5&amp;sh=T&amp;md=8&amp;pad=Y&amp;df=vbird.dic.ksu.edu.tw.dat" width="93" align="left" title="計數器" /></p>
	    <p><font color="#FFFFFF" size="-1">since2012/04/23</font></p></td>
		<td rowspan="4" align="left" valign="top"><a href="../index.html"><img src="image/title/title_03.png" alt="" width="263" height="79" border="0"></a></td>
		<td colspan="13">
			<img src="image/title/title_04.png" alt="" width="535" height="9" border="0"></td>
	</tr>
	<tr>
		<td rowspan="3">
			<img src="image/title/title_05.png" alt="" width="53" height="70" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="0110whatislinux.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image51','','image/title/title_06.png',1)"><img src="image/title/title3_06.png" name="Image51" width="106" height="25" border="0" id="Image51" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_07.png" alt="" width="27" height="37" border="0"></td>
		<td colspan="3" align="left" valign="top"><a href="../linux_server/0110network_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image52','','image/title/title_08.png',1)"><img src="image/title/title3_08.png" name="Image52" width="107" height="25" border="0" id="Image52" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_09.png" alt="" width="37" height="37" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="../about.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image53','','image/title/title_10.png',1)"><img src="image/title/title3_10.png" name="Image53" width="75" height="25" border="0" id="Image53" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_11.png" alt="" width="35" height="70" border="0"></td>
		<td align="left" valign="top"><a href="mailto:vbird@mail.vbird.idv.tw" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image54','','image/title/title_12.png',1)"><img src="image/title/title3_12.png" name="Image54" width="74" height="25" border="0" id="Image54" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_13.png" alt="" width="21" height="70" border="0"></td>
	</tr>
	<tr>
		<td colspan="2">
			<img src="image/title/title_14.png" alt="" width="106" height="12" border="0"></td>
		<td colspan="3">
			<img src="image/title/title_15.png" alt="" width="107" height="12" border="0"></td>
		<td colspan="2">
			<img src="image/title/title_16.png" width="75" height="12" alt=""></td>
		<td rowspan="2">
			<img src="image/title/title_17.png" alt="" width="74" height="45" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/title_18.png" alt="" width="15" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar1" class="MenuBarHorizontal">
	  <li><a href="linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image44','','image/title/title_19.png',1)"><img src="image/title/title3_19.png" name="Image44" width="123" height="33" border="0" id="Image44" /></a>
			    <ul>
			      <li><a href="Mandrake9.0/mandrake9.0.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image46','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image46" width="120" height="26" border="0" id="Image46" alt="" /></a></li>
                  <li><a href="fedora_4/fc4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image47','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image47" width="120" height="26" border="0" id="Image47" alt="" /></a></li>
                  <li><a href="linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image48','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image48" width="120" height="26" border="0" id="Image48" alt="" /></a></li>
                </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_20.png" alt="" width="42" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar2" class="MenuBarHorizontal">
	  <li><a href="../linux_server/index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image45','','image/title/title_21.png',1)"><img src="image/title/title3_21.png" name="Image45" width="125" height="33" border="0" id="Image45" /></a>
			    <ul>
			      <li><a href="../linux_server/linux_redhat9/redhat9.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image43','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image43" width="120" height="26" border="0" id="Image43" alt=""/></a></li>
			      <li><a href="../linux_server/centos4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image49','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image49" width="120" height="26" border="0" id="Image49" alt="" /></a></li>
			      <li><a href="../linux_server/index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image50','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image50" width="120" height="26" border="0" id="Image50" alt="" /></a></li>
		        </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_22.png" alt="" width="47" height="33" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/Spacer.gif" width="101" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="263" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="53" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="15" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="91" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="27" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="5" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="42" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="60" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="37" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="28" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="47" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="35" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="74" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="22" height="1" alt=""></td>
	</tr>
</table>
<!-- End ImageReady Slices -->
<script type="text/javascript">
<!--
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
var MenuBar2 = new Spry.Widget.MenuBar("MenuBar2", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
//-->
</script>
</div>
<table summary="本文内容的排版" style="width: 898px;" border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td style="width: 16px; height: 16px;">　</td>
    <td style="width: 866px; height: 16px;">　</td>
    <td style="width: 16px; height: 16px;">　</td></tr>
<tr><td style="width: 16px; font-size: 6px;">　</td>
    <td width="866">
<!-- 本文的档头部分 -->
<div style="text-align: center;">
    <a href="0320bash.html">
    <span class="text_head0">第十一章、认识与学习<span class="text_head_en"> BASH </span></span></a><br>
</div>
    <div style="text-align: right;">
        <span class="text_history">最近升级日期：2009/08/25</span>
    </div>
<!-- 本文的连结区部分 -->
<div class="block1">
<span class="text_h1">
7. <a href="#hint">重点回顾</a><br>
8. <a href="#ex">本章习题</a><br>
9. <a href="#reference">参考数据与延伸阅读</a><br>
<span class="text_h2">
10. <a href="http://phorum.vbird.org/viewtopic.php?t=23884" target="_blank">针对本文的建议：http://phorum.vbird.org/viewtopic.php?t=23884</a>
</span>
</span></div>
<!-- 本文的正式部分 -->
<hr><a name="hint"></a><img src="../image/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">重点回顾</span><br>
<div class="block1">
<ul class="text_import2">
	<li>由于核心在内存中是受保护的区块，因此我们必须要透过『 Shell 』将我们输入的命令与 Kernel 沟通，好让 
		Kernel 可以控制硬件来正确无误的工作</li>
	<li>学习 shell 的原因主要有：文字接口的 shell 在各大 distribution 都一样；远程管理时文字接口速度较快；
		shell 是管理 Linux 系统非常重要的一环，因为 Linux 内很多控制都是以 shell 撰写的。</li>
	<li>系统合法的 shell 均写在 /etc/shells 文件中；</li>
	<li>用户默认登陆取得的 shell 记录于 /etc/passwd 的最后一个字段；</li>
	<li>bash 的功能主要有：命令编修能力；命令与文件补全功能；命令别名配置功能；工作控制、前景背景控制；程序化脚本；通配符</li>
	<li>type 可以用来找到运行命令为何种类型，亦可用于与 which 相同的功能；</li>
	<li>变量就是以一组文字或符号等，来取代一些配置或者是一串保留的数据</li>
	<li>变量主要有环境变量与自定义变量，或称为全局变量与局部变量</li>
	<li>使用 env 与 export 可观察环境变量，其中 export 可以将自定义变量转成环境变量；</li>
	<li>set 可以观察目前 bash 环境下的所有变量；</li>
	<li>$? 亦为变量，是前一个命令运行完毕后的回传值。在 Linux 回传值为 0 代表运行成功；</li>
	<li>locale 可用于观察语系数据；</li>
	<li>可用 read 让用户由键盘输入变量的值</li>
	<li>ulimit 可用以限制用户使用系统的资源情况</li>
	<li>bash 的配置文件主要分为 login shell 与 non-login shell。login shell 主要读取 /etc/profile 与 ~/.bash_profile，
		non-login shell 则仅读取 ~/.bashrc</li>
	<li>通配符主要有： *, ?, [] 等等</li>
	<li>数据流重导向透过 &gt;, 2&gt;, &lt; 之类的符号将输出的信息转到其他文件或装置去；</li>
	<li>连续命令的下达可透过 ; &amp;&amp; || 等符号来处理</li>
	<li>管线命令的重点是：『管线命令仅会处理 standard output，对于 standard error output 会予以忽略』
		『管线命令必须要能够接受来自前一个命令的数据成为 standard input 继续处理才行。』</li>
	<li>本章介绍的管线命令主要有：cut, grep, sort, wc, uniq, tee, tr, col, join, paste, expand, split, xargs 等。</li>
</ul>
</div>


<hr><a name="ex"></a><img src="../image/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">本章习题</span><br>
( 要看答案请将鼠标移动到『答：』底下的空白处，按下左键圈选空白处即可察看 )
<div class="block1">
<ul>
	<li>情境模拟题一：由于 ~/.bash_history 仅能记录命令，我想要在每次注销时都记录时间，并将后续的命令 50 笔记录下来，
	可以如何处理？<br><br>
	<ul>
	<li>目标：了解 history ，并透过数据流重导向的方式记录历史命令；</li>
	<li>前提：需要了解本章的数据流重导向，以及了解 bash 的各个环境配置文件信息。</li>
	</ul><br>
	其实处理的方式非常简单，我们可以了解 date 可以输出时间，而利用 ~/.myhistory 来记录所有历史记录，
	而目前最新的 50 笔历史记录可以使用 history 50 来显示，故可以修改 ~/.bash_logout 成为底下的模样：<br>

<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">vim ~/.bash_logout</span>
<span class="term_write">date &gt;&gt; ~/.myhistory
history 50 &gt; &gt; ~/.myhistory</span>
clear
</pre></td></tr></tbody></table><br></li>


</ul>

<hr>简答题部分：
<ul>
	<li>在 Linux 上可以找到哪些 shell(举出三个) ？那个文件记录可用的 shell ？而 Linux 默认的 shell 是？
	<div class="blockex">
		1) /bin/bash, /bin/tcsh, /bin/csh<br>
	 	2) /etc/shells<br>
		3) bash ，亦即是 /bin/bash。
	</div></li>

	<li>在 shell 环境下，有个提示字符  (prompt)，他可以修改吗？要改什么？默认的提示字符内容是？
	<div class="blockex">
		可以修改的，改 PS1 这个变量，这个 PS1 变量的默认内容为：『[\u@\h \W]\$』
	</div></li>

	<li>如何显示 HOME 这个环境变量？
	<div class="blockex">
		echo $HOME
	</div></li>

	<li>如何得知目前的所有变量与环境变量的配置值？
	<div class="blockex">
		环境变量用 env 或 export 而所有变量用 set 即可显示
	</div></li>

	<li>我是否可以配置一个变量名称为 3myhome ？
	<div class="blockex">
		不行！变量不能以数字做为开头，参考变量配置守则的内容
	</div></li>

	<li>在这样的练习中『A=B』且『B=C』，若我下达『unset $A』，则取消的变量是 A 还是 B？
	<div class="blockex">
		被取消的是 B 喔，因为 unset $A 相当于 unset B 所以取消的是 B ，A 会继续存在！
	</div></li>

	<li>如何取消变量与命令别名的内容？
	<div class="blockex">
		使用 unset 及 unalias 即可
	</div></li>

	<li>如何配置一个变量名称为 name 内容为 It's my name ？
	<div class="blockex">
		name=It\'s\ my\ name 或 name="It's my name"
	</div></li>

	<li>bash 环境配置文件主要分为哪两种类型的读取？分别读取哪些重要文件？
	<div class="blockex">
		(1)login shell：主要读取 /etc/profile 及 ~/.bash_profile<br>
		(2)non-logni shell：主要读取 ~/.bashrc 而已。
	</div></li>

	<li>CentOS 5.x 的 man page 的路径配置文件案？
	<div class="blockex">
		/etc/man.config
	</div></li>

	<li>试说明 ', ", 与 ` 这些符号在变量定义中的用途？
	<div class="blockex">
		参考变量守则那一章节，其中， " 可以具有变量的上下文属性，' 则仅有一般字符，至于 ` 之内则是可先被运行的命令。
	</div></li>

	<li>跳脱符号 \ 有什么用途？
	<div class="blockex">
		可以用来跳脱特殊字符，例如 Enter, $ 等等，使成为一般字符！
	</div></li>

	<li>连续命令中， ;, &amp;&amp;, || 有何不同？
	<div class="blockex">
		分号可以让两个 command 连续运行，不考虑 command1
		的输出状态， &amp;&amp; 则前一个命令必需要没有错误信息，亦即回传值需为
		0 则 command2 才会被运行， || 则与 &amp;&amp; 相反！
	</div></li>

	<li>如何将 last 的结果中，独立出账号，并且印出曾经登陆过的账号？
	<div class="blockex">
		&nbsp;last | cut -d ' ' -f1 | sort | uniq
	</div></li>

	<li>请问 foo1 &amp;&amp; foo2 | foo3 &gt; foo4 ，这个命令串当中， foo1/foo2/foo3/foo4 是命令还是文件？
	整串命令的意义为？
	<div class="blockex">
		foo1, foo2 与 foo3 都是命令， foo4 是装置或文件。整串命令意义为：<br>
		(1)当 foo1 运行结果有错误时，则该命令串结束；<br>
		(2)若 foo1 运行结果没有错误时，则运行 foo2 | foo3 &gt; foo4 ；其中：<br>
			(2-1)foo2 将 stdout 输出的结果传给 foo3 处理；<br>
			(2-2)foo3 将来自 foo2 的 stdout 当成 stdin ，处理完后将数据流重新导向 foo4 这个装置/文件
	</div></li>

	<li>如何秀出在 /bin 底下任何以 a 为开头的文件文件名的详细数据？
	<div class="blockex">
		ls -l /bin/a*
	</div></li>

	<li>如何秀出 /bin 底下，文件名为四个字符的文件？
	<div class="blockex">
		ls -l /bin/????
	</div></li>

	<li>如何秀出 /bin 底下，档名开头不是 a-d 的文件？
	<div class="blockex">
		ls -l /bin/[^a-d]*
	</div></li>


	<li>我想要让终端机接口的登陆提示字符修改成我自己喜好的模样，应该要改哪里？(filename)
	<div class="blockex">
		/etc/issue
	</div></li>

	<li>承上题，如果我是想要让使用者登陆后，才显示欢迎信息，又应该要改哪里？
	<div class="blockex">
		/etc/motd
	</div></li>
</ul>
</div>


<hr><a name="reference"></a><img src="../image/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">参考数据与延伸阅读</span><br>
<div class="block1">
<ul>
	<li><a name="ps1"></a>注1：Webmin 的官方网站：<a href="http://www.webmin.com/" target="_blank">http://www.webmin.com/</a></li>
	<li><a name="ps2"></a>注2：关于 shell 的相关历史可以参考网络农夫兄所整理的优秀文章。不过由于网络农夫兄所建置的网站暂时关闭，
		因此底下的链接为鸟哥到网络上找到的片段文章连结。若有任何侵权事宜，请来信告知，谢谢：<br>
		<a href="http://linux.vbird.org/linux_basic/0320bash/csh/" target="_blank">http://linux.vbird.org/linux_basic/0320bash/csh/</a></li>
	<li><a name="ps3"></a>注3：使用 man bash，再以 PS1 为关键词去查询，按下数次 n 往后查询后，可以得到 PS1 的变量说明。</li>
	<li><a name="ps4"></a>注4：i18n 是由一些 Linux distribution 贡献者共同发起的大型计划，目的在于让众多的 Linux
		distributions 能够有良好的万国码 (Unicode) 语系的支持。详细的数据可以参考：<br>
		i18n 的官方网站：<a href="http://www.openi18n.org/" target="_blank">http://www.openi18n.org/</a><br>
		康桥大学 Dr Markus Kuhn 的文献：<a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html" target="_blank">http://www.cl.cam.ac.uk/~mgk25/unicode.html</a><br>
		Debian 社群所写的文件：<a href="http://www.debian.org/doc/manuals/intro-i18n/" target="_blank">http://www.debian.org/doc/manuals/intro-i18n/</a></li>
	<li>卧龙小三的教学文件：<a href="http://linux.tnc.edu.tw/techdoc/shell/book1.html" target="_blank">http://linux.tnc.edu.tw/techdoc/shell/book1.html</a></li>
	<li>GNU 计划的 BASH 说明：<a href="http://www.gnu.org/manual/bash-2.05a/html_mono/bashref.html" target="_blank">http://www.gnu.org/manual/bash-2.05a/html_mono/bashref.html</a><br>
		鸟哥的备份：<a href="http://linux.vbird.org/linux_basic/0320bash/0320bash_reference.php">http://linux.vbird.org/linux_basic/0320bash/0320bash_reference.php</a></li>
	<li>man bash</li>


</ul>
</div>
<hr />
    </td>
    <td style="width: 16px; font-size: 6px;">　</td></tr>
<tr><td style="width: 16px; height: 16px;">　</td>
    <td style="width: 866px; height: 16px;">　</td>
    <td style="width: 16px; height: 16px;">　</td></tr>
</tbody></table>

<div style="padding-top: 0px; text-align: center;">
<span style="font-size: 80%;">
	<a href="http://linux.vbird.org/" target="_top" title="前往鸟哥的首页">http://linux.vbird.org</a>
	is designed by <a href="mailto:vbird@mail.vbird.idv.tw" title="联络鸟哥(我不要广告信！)">VBird</a>
		during 2001-2011. <a href="http://www.ksu.edu.tw/" target="_blank">ksu.edu</a></span>
         ﻿<div id="apDiv4">
      <p>本网页主要以Firefox配合解析度 1024x768 作为设计依据&nbsp;&nbsp;&nbsp;&nbsp; 鸟哥自由软件整合应用研究室</p></div></div>
</div>
</center>
</body></html>
