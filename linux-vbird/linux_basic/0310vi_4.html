<html><head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf8">
	<meta name="Author" content="2011/04/17,lee">
	<meta name="Description" content="利用 vi 这个字处理器喔！">
	<title>鸟哥的 Linux 私房菜 -- vim 程序编辑器</title>
    <script src="../script/SpryMenuBar.js" type="text/javascript"></script>
	<script src="../script/index.js" type="text/javascript"></script>
	<link href="../css/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
    <link href="../css/main.css" rel="stylesheet" type="text/css" />
    </head><body style="margin: 0pt; padding: 0pt;" class="table"onload="MM_preloadImages('../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html','../index-2.html')">

<center>
<div id="apDiv5">
<div> <LINK REL="SHORTCUT ICON" HREF="../index-2.html">
<!-- ImageReady Slices (title3.ai) -->
<table id="___01" width="898" height="81" border="0" align="center" cellpadding="0" cellspacing="0";>
	<tr>
		<td colspan="15">
			<img src="image/title/title_01.png" width="900" height="1" alt=""></td>
	</tr>
	<tr>
		<td rowspan="4" bgcolor="#182448"><p><img src="http://linux.vbird.org/cgi-bin/Count.cgi?dd=C&amp;ft=5&amp;sh=T&amp;md=8&amp;pad=Y&amp;df=vbird.dic.ksu.edu.tw.dat" width="93" align="left" title="計數器" /></p>
	    <p><font color="#FFFFFF" size="-1">since2012/04/23</font></p></td>
		<td rowspan="4" align="left" valign="top"><a href="../index.html"><img src="image/title/title_03.png" alt="" width="263" height="79" border="0"></a></td>
		<td colspan="13">
			<img src="image/title/title_04.png" alt="" width="535" height="9" border="0"></td>
	</tr>
	<tr>
		<td rowspan="3">
			<img src="image/title/title_05.png" alt="" width="53" height="70" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="0110whatislinux.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image51','','image/title/title_06.png',1)"><img src="image/title/title3_06.png" name="Image51" width="106" height="25" border="0" id="Image51" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_07.png" alt="" width="27" height="37" border="0"></td>
		<td colspan="3" align="left" valign="top"><a href="../linux_server/0110network_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image52','','image/title/title_08.png',1)"><img src="image/title/title3_08.png" name="Image52" width="107" height="25" border="0" id="Image52" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_09.png" alt="" width="37" height="37" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="../about.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image53','','image/title/title_10.png',1)"><img src="image/title/title3_10.png" name="Image53" width="75" height="25" border="0" id="Image53" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_11.png" alt="" width="35" height="70" border="0"></td>
		<td align="left" valign="top"><a href="mailto:vbird@mail.vbird.idv.tw" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image54','','image/title/title_12.png',1)"><img src="image/title/title3_12.png" name="Image54" width="74" height="25" border="0" id="Image54" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_13.png" alt="" width="21" height="70" border="0"></td>
	</tr>
	<tr>
		<td colspan="2">
			<img src="image/title/title_14.png" alt="" width="106" height="12" border="0"></td>
		<td colspan="3">
			<img src="image/title/title_15.png" alt="" width="107" height="12" border="0"></td>
		<td colspan="2">
			<img src="image/title/title_16.png" width="75" height="12" alt=""></td>
		<td rowspan="2">
			<img src="image/title/title_17.png" alt="" width="74" height="45" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/title_18.png" alt="" width="15" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar1" class="MenuBarHorizontal">
	  <li><a href="linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image44','','image/title/title_19.png',1)"><img src="image/title/title3_19.png" name="Image44" width="123" height="33" border="0" id="Image44" /></a>
			    <ul>
			      <li><a href="Mandrake9.0/mandrake9.0.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image46','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image46" width="120" height="26" border="0" id="Image46" alt="" /></a></li>
                  <li><a href="fedora_4/fc4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image47','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image47" width="120" height="26" border="0" id="Image47" alt="" /></a></li>
                  <li><a href="linux_basic.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image48','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image48" width="120" height="26" border="0" id="Image48" alt="" /></a></li>
                </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_20.png" alt="" width="42" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar2" class="MenuBarHorizontal">
	  <li><a href="../linux_server/index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image45','','image/title/title_21.png',1)"><img src="image/title/title3_21.png" name="Image45" width="125" height="33" border="0" id="Image45" /></a>
			    <ul>
			      <li><a href="../linux_server/linux_redhat9/redhat9.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image43','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image43" width="120" height="26" border="0" id="Image43" alt=""/></a></li>
			      <li><a href="../linux_server/centos4.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image49','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image49" width="120" height="26" border="0" id="Image49" alt="" /></a></li>
			      <li><a href="../linux_server/index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image50','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image50" width="120" height="26" border="0" id="Image50" alt="" /></a></li>
		        </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_22.png" alt="" width="47" height="33" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/Spacer.gif" width="101" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="263" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="53" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="15" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="91" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="27" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="5" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="42" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="60" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="37" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="28" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="47" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="35" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="74" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="22" height="1" alt=""></td>
	</tr>
</table>
<!-- End ImageReady Slices -->
<script type="text/javascript">
<!--
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
var MenuBar2 = new Spry.Widget.MenuBar("MenuBar2", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
//-->
</script>
</div>
<table summary="本文内容的排版" style="width: 898px;" border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td style="width: 16px; height: 16px;">　</td>
    <td style="width: 866px; height: 16px;">　</td>
    <td style="width: 16px; height: 16px;">　</td></tr>
<tr><td style="width: 16px; font-size: 6px;">　</td>
    <td width="866">
<!-- 本文的档头部分 -->
<div style="text-align: center;">
    <a href="0310vi.html">
    <span class="text_head0">第十章、<span class="text_head_en">vim </span>程序编辑器</span></a><br>
</div>
    <div style="text-align: right;">
        <span class="text_history">最近更新日期：2009/08/20</span>
    </div>
<!-- 本文的连结区部分 -->
<div class="block1">
<span class="text_h1">
4. <a href="#tips">其他 vim 使用注意事项</a><br>
	<span class="text_h2">
	　　4.1 <a href="#tips_code">中文编码的问题</a><br>
	　　4.2 <a href="#tips_dos">DOS 与 Linux 的断行字符</a>： <a href="#dos2unix">dos2unix</a>,
		<a href="#unix2dos">unix2dos</a><br>
	　　4.3 <a href="#tips_translate">语系编码转换</a>： <a href="#iconv">iconv</a><br>
	</span>
</span></div>
<!-- 本文的正式部分 -->
<hr><a name="tips"></a><img src="../image/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">其他 vim 使用注意事项</span><br>
<div class="block1">
	<p>vim 其实不是那么好学，虽然他的功能确实非常强大！所以底下我们还有一些需要注意的地方要来跟大家分享喔！<br><br></p>

	<hr><a name="tips_code"></a><img src="../image/logo.png" alt="小标题的图示" width="24" align="middle" height="23"><span class="text_h2">中文编码的问题</span><br>
	<div class="block2">
		<p>很多朋友常常哀嚎，说他们的 vim 里面怎么无法显示正常的中文啊？其实这很有可能是因为编码的问题！
		因为中文编码有 big5 与 utf8 两种，如果你的档案是使用 big5 编码制作的，但在 vim 的终端接口中你使用的是万国码(utf8)，
		由于编码的不同，你的中文档案内容当然就是一堆乱码了！怎么办？这时你得要考虑许多东西啦！有这些：</p>
		<ol>
		<li>你的 Linux 系统默认支持的语系数据：这与 /etc/sysconfig/i18n 有关；</li>
		<li>你的终端界面 (bash) 的语系： 这与 LANG 这个变数有关；</li>
		<li>你的档案原本的编码；</li>
		<li>开启终端机的软件，例如在 GNOME 底下的窗口接口。</li>
		</ol>

		<p>事实上最重要的是上头的第三与第四点，只要这两点的编码一致，你就能够正确的看到与编辑你的中文档案。
		否则就会看到一堆乱码啦！</p>

		<p>一般来说，中文编码使用 big5 时，在写入某些数据库系统中，在『许、盖、功』这些字体上面会发生错误！
		所以近期以来大多希望大家能够使用万国码 utf8 来进行中文编码！但是在 Windows XP 上的软件常常默认使用 big5 的编码，
		包括鸟哥由于沿用以前的文件数据文件，也大多使用 big5 的编码。此时就得要注意上述的这些咚咚啰。</p>

		<p>在 Linux 本机前的 tty1~tty6 原本默认就不支持中文编码，所以不用考虑这个问题！因为你一定会看到乱码！呵呵！
		现在鸟哥假设俺的文件档案内编码为 big5 时，而且我的环境是使用 Linux 的 GNOME ，启动的终端接口为 GNOME-terminal 软件，
		那鸟哥通常是这样来修正语系编码的行为：</p>

<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">LANG=zh_TW.big5</span>
</pre></td></tr></tbody></table>

		<p>然后在终端接口工具栏的<span class="text_import2">『终端机』--&gt;『设定字符编码』
		--&gt;『中文 (正体) (BIG5)』</span>项目点选一下，
		如果一切都没有问题了，再用 vim 去开启那个 big5 编码的档案，就没有问题了！以上！报告完毕！</p>
	</div>

	<hr><a name="tips_dos"></a><img src="../image/logo.png" alt="小标题的图示" width="24" align="middle" height="23"><span class="text_h2">DOS 与 Linux 的断行字符</span><br>
	<div class="block2">
		<p>我们在<a href="0220filemanager.html">第七章</a>里面谈到
		<a href="0220filemanager.html#cat">cat</a> 这个指令时，曾经提到过 DOS 与 Linux 断行字符的不同。
		而我们也可以利用 cat -A 来观察以 DOS (Windows 系统) 建立的档案的特殊格式，
		也可以发现在 DOS 使用的断行字符为 ^M$ ，我们称为 CR 与 LF 两个符号。
		而在 Linux 底下，则是仅有 LF ($) 这个断行符号。这个断行符号对于 Linux 的影响很大喔！
		为什么呢？</p>

		<p>我们说过，在 Linux 底下的指令在开始执行时，他的判断依据是 『Enter』，而 Linux 的 Enter 为 LF 符号，
		不过，由于 DOS 的断行符号是 CRLF ，也就是多了一个 ^M 的符号出来，
		在这样的情况下，如果是一个 shell script 的程序档案，呵呵～将可能造成『程序无法执行』的状态～
		因为他会误判程序所下达的指令内容啊！这很伤脑筋吧！</p>

		<p>那怎么办啊？很简单啊，将格式转换成为 Linux 即可啊！『废话』，这当然大家都知道，但是，
		要以 vi 进入该档案，然后一个一个删除每一行的 CR 吗？当然没有这么没人性啦！
		我们可以透过简单的指令来进行格式的转换啊！</p>

<a name="dos2unix"></a><a name="unix2dos"></a>
<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">dos2unix [-kn] file [newfile]</span>
[root@www ~]# <span class="term_command">unix2dos [-kn] file [newfile]</span>
<span class="term_say">选项与参数：
-k  ：保留该档案原本的 mtime 时间格式 (不更新档案上次内容经过修订的时间)
-n  ：保留原本的旧档，将转换后的内容输出到新档案，如： dos2unix -n old new</span>

<span class="term_hd">范例一：将刚刚上述练习的 /tmp/vitest/man.config 修改成为 dos 断行</span>
[root@www ~]# <span class="term_command">cd /tmp/vitest</span>
[root@www vitest]# <span class="term_command">cp -a /etc/man.config .</span>
[root@www vitest]# <span class="term_command">ll man.config</span>
-rw-r--r-- 1 root root <span class="term_write">4617</span> Jan  6  2007 man.config
[root@www vitest]# <span class="term_command">unix2dos -k man.config</span>
unix2dos: converting file man.config to DOS format ...
<span class="term_say"># 屏幕会显示上述的讯息，说明断行转为 DOS 格式了！</span>
[root@www vitest]# <span class="term_command">ll man.config</span>
-rw-r--r-- 1 root root <span class="term_write">4758</span> Jan  6  2007 man.config
<span class="term_say"># 断行字符多了 ^M ，所以容量增加了！</span>

<span class="term_hd">范例二：将上述的 man.config 转成 man.config.linux 的 Linux 断行字符</span>
[root@www vitest]# <span class="term_command">dos2unix -k -n man.config man.config.linux</span>
dos2unix: converting file man.config to file man.config.linux in UNIX format ...
[root@www vitest]# <span class="term_command">ll man.config*</span>
-rw-r--r-- 1 root root 4758 Jan  6  2007 man.config
-rw------- 1 root root 4617 Jan  6  2007 man.config.linux
</pre></td></tr></tbody></table>

		<p>因为断行字符以及 DOS 与 Linux 操作系统底下一些字符的定义不同，因此，
		不建议你在 Windows 系统当中将档案编辑好之后，才上传到 Linux 系统，会容易发生错误问题。
		而且，如果你在不同的系统之间复制一些纯文本档案时，千万记得要使用 unix2dos 或 dos2unix 来转换一下断行格式啊！</p>
	</div>

	<hr><a name="tips_translate"></a><img src="../image/logo.png" alt="小标题的图示" width="24" align="middle" height="23"><span class="text_h2">语系编码转换</span><br>
	<div class="block2">
		<p>很多朋友都会有的问题，就是想要将语系编码进行转换啦！举例来说，想要将 big5 编码转成 utf8 。
		这个时候怎么办？难不成要每个档案打开会转存成 utf8 吗？不需要这样做啦！使用 iconv 这个指令即可！
		鸟哥将之前的 vi 章节做成 big5 编码的档案，你可以照底下的连结来下载先：</p>

		<ul><li><a href="../index-2.html">http://cn.linux.vbird.org/linux_basic/0310vi/vi.big5</a></li></ul>

		<p>在终端机的环境下你可以使用『 wget 网址』来下载上述的档案喔！鸟哥将他下载在 /tmp/vitest 目录下。
		接下来让我们来使用 iconv 这个指令来玩一玩编码转换吧！</p>

<a name="iconv"></a>
<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">iconv --list</span>
[root@www ~]# <span class="term_command">iconv -f 原本编码 -t 新编码 filename [-o newfile]</span>
<span class="term_say">选项与参数：
--list ：列出 iconv 支持的语系数据
-f     ：from ，亦即来源之意，后接原本的编码格式；
-t     ：to ，亦即后来的新编码要是什么格式；
-o file：如果要保留原本的档案，那么使用 -o 新档名，可以建立新编码档案。</span>

<span class="term_hd">范例一：将 /tmp/vitest/vi.big5 转成 utf8 编码吧！</span>
[root@www ~]# <span class="term_command">cd /tmp/vitest</span>
[root@www vitest]# <span class="term_command">iconv -f big5 -t utf8 vi.big5 -o vi.utf8</span>
[root@www vitest]# <span class="term_command">file vi*</span>
vi.big5: ISO-8859 text, with CRLF line terminators
vi.utf8: UTF-8 Unicode text, with CRLF line terminators
<span class="term_say"># 是吧！有明显的不同吧！ ^_^</span>
</pre></td></tr></tbody></table>

		<p>这指令支持的语系非常之多，除了正体中文的 big5, utf8 编码之外，也支持简体中文的 gb2312 ，
		所以对岸的朋友可以简单的将鸟站的网页数据下载后，利用这个指令来转成简体，就能够轻松的读取文件数据啰！
		不过，不要将转成简体的档案又上传成为您自己的网页啊！这明明是鸟哥写的不是吗？ ^_^</p>

		<p>不过如果是要将正体中文的 utf8 转成简体中文的 utf8 编码时，那就得费些功夫了！
		举例来说，如果要将刚刚那个 vi.utf8 转成简体的 utf8 时，可以这样做：</p>

<table class="term"><tbody><tr><td class="term"><pre>[root@www vitest]# <span class="term_command">iconv -f utf8 -t big5 vi.utf8 | \</span>
&gt; <span class="term_command">iconv -f big5 -t gb2312 | iconv -f gb2312 -t utf8 -o vi.gb.utf8</span>
</pre></td></tr></tbody></table>
	</div>
</div>
<hr />
    </td>
    <td style="width: 16px; font-size: 6px;">　</td></tr>
<tr><td style="width: 16px; height: 16px;">　</td>
    <td style="width: 866px; height: 16px;">　</td>
    <td style="width: 16px; height: 16px;">　</td></tr>
</tbody></table>

<div style="padding-top: 0px; text-align: center;">
<span style="font-size: 80%;">
	<a href="http://linux.vbird.org/" target="_top" title="前往鸟哥的首页">http://linux.vbird.org</a>
	is designed by <a href="mailto:vbird@mail.vbird.idv.tw" title="联络鸟哥(我不要广告信！)">VBird</a>
		during 2001-2011. <a href="http://www.ksu.edu.tw/" target="_blank">ksu.edu</a></span>
         ﻿<div id="apDiv4">
      <p>本网页主要以Firefox配合解析度 1024x768 作为设计依据&nbsp;&nbsp;&nbsp;&nbsp; 鸟哥自由软件整合应用研究室</p></div></div>
</div>
</center>
</body></html>
